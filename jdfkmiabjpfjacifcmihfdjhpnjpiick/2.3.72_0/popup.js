!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="./",r(r.s=436)}({0:function(t,e,r){"use strict";r.r(e),function(t){r.d(e,"query",(function(){return c})),r.d(e,"queryAll",(function(){return l})),r.d(e,"findParent",(function(){return h})),r.d(e,"nearestParent",(function(){return d})),r.d(e,"getNodePropOrEmptyString",(function(){return f})),r.d(e,"stripTagsExcept",(function(){return p})),r.d(e,"toArray",(function(){return m})),r.d(e,"unique",(function(){return v})),r.d(e,"isMatches",(function(){return g})),r.d(e,"getYoutubeInfo",(function(){return y})),r.d(e,"getYoutubeDashMPDInfo",(function(){return b})),r.d(e,"send",(function(){return _})),r.d(e,"get",(function(){return w})),r.d(e,"_getSize",(function(){return E})),r.d(e,"getSize",(function(){return T})),r.d(e,"logDownloadError",(function(){return O})),r.d(e,"beautifyFileSize",(function(){return x})),r.d(e,"detectMediaTypeAndExt",(function(){return S})),r.d(e,"getFileNameFromContentDisposition",(function(){return A})),r.d(e,"getMediaType",(function(){return k})),r.d(e,"getProp",(function(){return R})),r.d(e,"call",(function(){return I})),r.d(e,"defined",(function(){return D})),r.d(e,"debounce",(function(){return P})),r.d(e,"flatten",(function(){return N})),r.d(e,"generateId",(function(){return U})),r.d(e,"sendMessage",(function(){return M})),r.d(e,"isSpecialUrls",(function(){return q})),r.d(e,"getFilenameFromTitleOfDownload",(function(){return B})),r.d(e,"getVideoId",(function(){return Y})),r.d(e,"isValidData",(function(){return $})),r.d(e,"getBestFitResolution",(function(){return Q})),r.d(e,"createMP3Resources",(function(){return F})),r.d(e,"splitMediaByTitle",(function(){return H})),r.d(e,"i18n",(function(){return V})),r.d(e,"isSameMedia",(function(){return z})),r.d(e,"isTikTok",(function(){return G})),r.d(e,"cleanSymbols",(function(){return W})),r.d(e,"fetchWithTimeout",(function(){return X})),r.d(e,"sleep",(function(){return K})),r.d(e,"beDefinedOr",(function(){return J})),r.d(e,"mergeArray",(function(){return Z})),r.d(e,"Storage",(function(){return tt})),r.d(e,"nextTick",(function(){return et})),r.d(e,"jwtDecode",(function(){return rt})),r.d(e,"formatDomain",(function(){return nt})),r.d(e,"paddZero",(function(){return it})),r.d(e,"transformVersionToNumber",(function(){return ot})),r.d(e,"getDateNumber",(function(){return at})),r.d(e,"useDebounce",(function(){return st})),r.d(e,"checkSameDate",(function(){return ut})),r.d(e,"checkDateInRow",(function(){return ct})),r.d(e,"checkIsDarkMode",(function(){return lt})),r.d(e,"devLog",(function(){return ht}));var n=r(1),i=r(6),o=r(4),a=r(3);function s(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */s=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),s=new S(i||[]);return n(a,"_invoke",{value:E(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function p(){}function m(){}var v={};c(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(A([])));y&&y!==e&&r.call(y,o)&&(v=y);var b=m.prototype=f.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var i;n(this,"_invoke",{value:function(n,o){function a(){return new e((function(i,a){!function n(i,o,a,s){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function E(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return k()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=T(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function T(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new w(l(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(b),c(b,u,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}var u=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))};function c(t,e){return(e=e||document).querySelector(t)}function l(t,e){var r,n;return m(null!==(n=null===(r=(e=e||document).querySelectorAll)||void 0===r?void 0:r.call(e,t))&&void 0!==n?n:[])}function h(t,e){for(;null!==t&&t.classList&&!t.classList.contains(e);)t=t.parentNode;return t}function d(t,e){for(var r,n=null===(r=document.body.parentNode)||void 0===r?void 0:r.parentNode,i=t;null!=i&&i!=n&&!i.matches(e);)i=i.parentElement;return n==i?null:i}function f(t,e){return t&&t[e]||""}function p(t){return t.replace(/<(?!\/?(?:b|em))[^>]+>/g,"")}function m(t){return Array.prototype.slice.call(t)}function v(t){return Array.from(new Set(t))}function g(t,e){var r,n,i;if(Array.isArray(t)){for(r=0;r<t.length;++r)if(g(t[r],e))return!0;return!1}for(r=0,n=(e=Array.isArray(e)?e:[e]).length;r<n;++r)if("string"==typeof(i=e[r])&&-1!==t.indexOf(i)||i instanceof RegExp&&t.match(i))return!0;return!1}function y(t){return u(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(e=>{EE.emit("message.background.send",{type:"youtube_get_info",data:{method:"GET",url:t}}),EE.on("youtube_get_info_result",r=>{r.data.url===t&&e(r.data)})}));case 1:case"end":return e.stop()}}),e)})))}function b(t){return u(this,void 0,void 0,s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(e=>{EE.emit("message.background.send",{type:"youtube_get_mpd_info",data:{url:t,method:"GET"}}),EE.on("youtube_set_mpd_info",t=>{var r,n;t&&"resolve"===(null===(r=t.data)||void 0===r?void 0:r.success)&&e(null===(n=t.data)||void 0===n?void 0:n.response)})}));case 1:case"end":return e.stop()}}),e)})))}function _(e,r,i,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"FormData";function u(t){return[/www\.facebook\.com\/video\/tahoe\/async\/\d+\/\?originalmediaid=\d.+&payloadtype=primary/,/vnecdn\.net/,/vnecdn\.net\/vnexpress\/video\/.+master.m3u8$/,/.smamuhh1metro/,/gpt[0-9]+\.phimmoi\.net/,/vtvgiaitri\.vn/,/hydra/,/www\.facebook\.com\/api\/graphql/,/www.facebook.com\/video\/tahoe\/async/,/www\.nhaccuatui\.com\/flash\/xml\?key3/,/content-aapm1\.uplynk\.com/,/master2-eu\.playerx\.stream/,/i\.instagram\.com\/api\/v1\/media/,/s\d+\.imacdn\.com/,/ok\d+-\d+\.vkuser\.net/,/vd\d+\.mycdn\.me/,/cdn\.javhd\..+\/stream\/.+\.m3u8/,/search-api.artlist.io\/v2\/graphql/i].some(e=>t.match(e))}if(t.IS_CONTENT_SCRIPT&&!u(r)){var c="background_request."+U();return EE.emit("message.background.send",{type:n.a.FETCH,data:{id:c,method:e,url:r,params:i,headers:o,includeCredentials:a,paramType:s}}),new Promise((t,e)=>{EE.on("background_request_result",r=>{var n=r.data;n.id===c&&("resolve"===n.success?t(n.response):e(n.response))})})}var l=null,h=new Headers;if("object"==typeof o)for(var d in o)location.href.includes("nhaccuatui.com/video/")&&"X-Savior-Replace-Cookie"==d||h.append(d,o[d]);"object"==typeof i&&("FormData"===s?(l=Object.keys(i).map(t=>t+"="+i[t]).join("&"),location.host.includes("facebook")&&(l=Object.keys(i).map(t=>`${t}=${encodeURIComponent(i[t])}`).join("&"))):l=JSON.stringify(i)),"POST"===e&&("FormData"===s?h.append("Content-type","application/x-www-form-urlencoded"):h.append("Content-type","application/json"));var f={method:e,headers:h,cache:"reload",body:l||void 0};return a&&(f.credentials="include"),fetch(r,f).then(t=>t.text().then(e=>({status:t.status,statusText:t.statusText,ok:t.ok,redirected:t.redirected,url:t.url,type:t.type,bodyUsed:t.bodyUsed,body:t.body,headers:t.headers,responseText:e})))}function w(t,e){return _("GET",t,{},e)}function E(t){var e,r=new XMLHttpRequest;return t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http";if("//"===t.slice(0,2))return e+":"+t;return t}(t),new Promise((n,i)=>{function o(t){t?n(t):i(t),r.abort(),clearTimeout(e),e=void 0}r.open("GET",t),r.onreadystatechange=function(){if(!(this.readyState<2)){var t=null;try{t=+(this.getResponseHeader("Content-Length")||""),Number.isNaN(t)&&(t=null)}catch(t){}null===t&&200!==this.status||(200!==this.status&&(t=null),o(t))}},r.send(null),e=setTimeout(o,1e4)})}function T(t){return new Promise(e=>{var r=U(),n=t+"_size";function i(i,o){i==r&&(o?e(o):E(t).then(t=>{e(t),EE.emit("media-provider.cache.put",U(),n,t)}).catch(()=>{O({url:JSON.stringify(t),referrer:document.referrer||location.host||JSON.stringify(t),error:"Error: Cannot get media size or media url is wrong"}),e(null),EE.emit("media-provider.cache.put",U(),n,null)}))}EE.emit("media-provider.cache.get",r,n),EE.on("media-provider.cache.hit",i),EE.on("media-provider.cache.miss",i)})}function O(t){o.a.log("recordCustomData",[{key:"savior_download_error",value:JSON.stringify(t)}])}function x(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=["B","KB","MB","GB","TB","PB"],n=-1!==window.navigator.appVersion.indexOf("Win")?1024:1e3;if(!t)return"";var i,o=n;for(i=0;i<r.length&&t>=o;++i)t/=o;var a=r[i],s=Math.round(10*t)/10;return e&&a&&"kb"===a.toLowerCase()&&(s=s.toFixed(0)),s+r[i]}function S(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=["application/x-mpegurl","application/vnd.apple.mpegurl","audio/x-mpegurl","audio/mpegurl"];if(-1!==o.indexOf(r))return t.type="video",t.ext="m3u8",t;var s=["application/dash+xml"];if(-1!==s.indexOf(r))return t.type="video",t.ext="mpd",t;var u=k(r,t.exts||[]);if(u&&n.o[u]){t.type=u;var c=r.match(/mp4|webm/g);t.exts&&0!==t.exts.length||!c||!c[0]||(t.ext=c[0])}var l=Object(a.d)(r),h=l.ext;if(t.ext||(t.ext=h),q(t.url)&&(t.ext="m3u8",t.exts=["m3u8"]),"application/octet-stream"==r){var d=(null===(e=A(i))||void 0===e?void 0:e.split("."))||[];if(d&&d.length){var f=d.shift(),p=d;f&&(t.filename=f),p&&p.length&&(t.exts=p,h=p[p.length-1],t.ext=h,"mp4"==h&&(t.type="video"))}}return"mp4"==h&&(t.ext="mp4"),t}function A(t){var e;return null===(e=t.match(/filename=["']([^"']+)["']/i))||void 0===e?void 0:e[1]}function k(t,e){var r;for(var i in n.o){if(r=n.o[i],t&&t.match(r.rgxp))return i;if(Array.isArray(e)&&L(e,r.extensions)||-1!==r.extensions.indexOf(e))return i}return null}function L(t,e){for(var r=t.concat(e),n={},i=0;i<r.length;++i){var o=r[i];if(n[o])return o;n[o]=!0}return null}function R(t,e){return function t(e,r){var n=r.shift();return!n||"object"!=typeof e&&"function"!=typeof e||null===e?null:0===r.length?e[n]:t(e[n],r)}(t,e.split("."))}function I(t,e){if(t&&!(t.length<=0))for(var r=[].slice.call(arguments,2),n=0;n<t.length;n++)t[n].apply(e,r)}function D(t){return void 0!==t}function P(t,e,r){var n,i=!1;function o(){if(!i){var o=this,a=arguments;n?clearTimeout(n):r&&t.apply(o,a),n=setTimeout(s,e||100)}function s(){r||t.apply(o,a),n=void 0}}return o.destroy=()=>{clearTimeout(n),i=!0},o}function N(t,e){var r,n=Object.prototype.toString,i=[],o=e&&t||t.slice();if(!t.length)return i;r=o.pop();do{"[object Array]"===n.call(r)?o.push.apply(o,r.filter(t=>!!t)):i.push(r)}while(o.length&&void 0!==(r=o.pop()));return i.reverse(),i}var C,j=0;function U(){return j++}function M(t){return new Promise(e=>{var r=t.type+"_"+U();t.id=r,EE.emit("message.background.send",t),EE.on("utils.send_message_result",t=>{t.id===r&&e(t.data)})})}function q(t){if(t&&"object"!=typeof t){return[/(http|https):\/\/[\s\S]*(streamasia\.|\.bongngo\.|\.manga123\.net)[\s\S]*\/playlist\/|stream\.vltv\.xyz\/m3u8\/|apix\.gooqlevideo\.com\/player|khophim18\.net\/m3u8|iamplayer\.xyz\/stream.*\/Manifest/g,/hls\.mediacdn\.vn\/.+\/\S+\.mp4\.json/gi,/hls\.(tuoitre)\.vn\/\1\/\S+\.mp4\.json/gi,/vdrm\.vtvgiaitri\.vn\/stream/,/api(-v[0-9]*)*\.soundcloud\.com\/media\/soundcloud:tracks:[0-9]+/gi,/https:\/\/zingmp3\.vn\/api\/v2\/.+\?id=/,/^\/sequence\/(play|full)\/([a-z0-9]+)/i,/\/video\/(\d+)\/config(\?|$)/i,/key[0-9]=[0-9a-f]{32}/i,/^\/(api|get)_video_info/,/\.mp4.+?\.ts\?nimblesessionid=/,/meo\.saku\.net\/player/,/get\.gooqlevideo\.com\/player/,/streamsb\.biz\/playlist\/json\/[a-z0-9]+\/[a-z0-9]+/i,/discordapp\.com\/attachments\/\d+\/\d+\/[a-z0-9_\- ]+\.mp4/,/vidsugar\.com\/.+api\.json/i,/\-hls.*\.cuoiia\.top\/(cdn|media|hls)/,/vkvd\d*\.mycdn\.me/,/vk[a-z0-9\-]+\.vkuser\.net/i,/v\.douyu\.com\/api\/stream\/getStreamUrl/,/api\-.+\.(play|plhq)[\s\S]*\.(xyz|net|site|click|cfd|com)\/api\/.+(playiframe|getblob)/,/ssplay\.net\/[a-z0-9]{2,4}\/(\d+\/(\d+)\/[a-z0-9]+\/[a-z0-9]+|[a-z\d]+\/[a-z\d]+)/i,/\.helurl\.com\/uploads\/.+filename/i,/((smutr\.com)|(cdnka\.net))\/remote_control\.php?.+&file=.+\.(mp4|m3u8)/i,/\.video-delivery\.net/i,/\.asiaplayer\.site\/m3u8\/.+\/[a-z0-9]+\/master\.txt/i,/.+\.play[\s\S]*(xyz|net)\/(m3u8|hls)/i,/.+\.plhqtv[\s\S]*(xyz|net)\/(type1rdv3)/i,/v[0-9]*\.sanstream\.xyz\/video\/.*\/master.html\?.*/i,/cdn.+\/segment.+\/?token.+/i,/helvid\.([a-z0-9]+)\/hash.php\?.+/i,/southeastasia1-mediap.svc.ms\/.+\/videomanifest/i,/cdn\.animevui\.[a-z]+\/file/i,/\.xyz\/cdn\/hls\/.+\/master\.txt/i,/hls\.streamcdn\.[a-z]+\/m3u8\//i,/\.streamc\.xyz\/get[a-z0-9]*\.php\?hash=/i,/\.streamc\.xyz\/getPlaylist\.php+/i,/intl-api.iq.com.+\/cache\-video\.iq\.com\/dash\?.+/i,/api\.bilibili\.com\/.+\/wbi\/playurl/i,/cdn\/hls\/[a-z0-9\-_]+\/master\.txt/i,/stream12345\.online\/video\/[a-z0-9\-_]+\/master\.html/i,/content\.vdcdn\.top\/stream\/master\.php/i,/([a-z0-9\-_]+\.)?cliphub\.[a-z0-9\.\-]+\/videos/i,/https:\/\/hls\.fasthls\.top\/media\/.+/i,/eporner\.com\/xhr\/video\/.+\?hash\=.+/i,/phimlongtieng\.net\/pmm\/[a-z0-9]+\.html/i,/video\.twimg\.com\/.+video\/(\d+)(\/pu)?\/pl\/[a-z0-9\-_]+\.m3u8/i,/syntheticvideo\..+\/sources\?videoId/i,/goplayer\.xyz\/video\/[a-z0-9\-_]+\/(master|playlist)\./i,/m3u8\.cloustream\.net/i].some(e=>e.test(t))}}function B(t){var e=t.title||t.filename||document.title;"subtitles"==t.type&&(e=e+" ("+(t.i18n_quality||t.quality)+")");var r="."+t.ext;return e=(e=(null==e?void 0:e.replace(/\s+/g," ").replace(/[/\\:*?"<>|\u200c\u200d]/g,"-"))+r).match(/[*~]/gi)?"_"+e.replace(/[*~]/gi,"."):e}function Y(t){var e;if(!t)return null;for(var r,n=[/^https?:\/\/(?:www\.)?youtube(?:-nocookie)?(?:\.googleapis)?\.com\/(?:(?:v)|(?:embed)|(?:e))\/(?!videoseries)([^&?]+)/i,/https?:\/\/(?:www\.)?youtu\.be\/([^#&?]+)/i,/https?:\/\/(?:www\.)?youtube\.com\/.*(?:\?|&)v=([^#&?]+)/i,/https?:\/\/(?:www\.)?youtube\.com\/shorts\/(.*)$/,/^https?:\/\/music\.youtube\.com\/watch\?v=([^#&?]+)/,/^https?:\/\/m\.youtube\.com\/watch\?v=([^#&?]+)/,/youtube.*.com\/embed\/([a-z0-9\-_]+)/i,/^https?:\/\/(?:www\.)?youtube\.com\/live\/([^#&?]+)/],i=0;i<n.length;++i)if(r=t.match(n[i]))return r[1];if(t.match(/youtube\.com\/embed\/videoseries/i)&&(null===(e=document.querySelector('link[rel="canonical"]'))||void 0===e?void 0:e.href))return Y(t);return null}function $(t){if(i.a.M3U8&&Object(n.C)(t.ext))return!0;var e=t.type;if(!e)return!1;var r=n.o[e],o=r&&r.extensions;return r&&-1!==o.indexOf(t.ext)}function Q(t){for(var e=0,r=n.u.length;e<r&&n.u[e]>=t;)e++;return n.u[e-1]}function F(t){var e=t.filter((function(t){return"video"===t.type&&!(!i.a.DOWNLOAD.M3U8_AUDIO&&["m3u","m3u8"].includes(t.ext))&&("object"==typeof t.url&&t.url.audioUrl||"string"==typeof t.url)})),r=[{bitrate:"128kbps",name:"Medium",qualityValue:100,itag:"140"},{bitrate:"192kbps",name:"High",qualityValue:200,itag:"22"},{bitrate:"192kbps",name:"High",qualityValue:200,itag:"37"},{bitrate:"192kbps",name:"High",qualityValue:200,itag:"38"},{bitrate:"192kbps",name:"High",qualityValue:200,itag:"45"},{bitrate:"192kbps",name:"High",qualityValue:200,itag:"46"},{bitrate:"192kbps",name:"High",qualityValue:200,itag:"84"},{bitrate:"192kbps",name:"High",qualityValue:200,itag:"85"},{bitrate:"192kbps",name:"High",qualityValue:200,itag:"101"},{bitrate:"192kbps",name:"High",qualityValue:200,itag:"102"},{bitrate:"192kbps",name:"High",qualityValue:200,itag:"172"}],n="www.youtube.com"===location.host?r:[r[0]],o=[];return e.length?(H(e).forEach((function(t){var e=t.media,i=n.map((function(t){var n=function(t,e){e=e.toLowerCase();var r=[...t],n=t.filter((function(t){return"mp4"===t.ext}));n.length&&(r=n);var i=r.filter((function(t){return t.quality&&"full hd"===t.quality.toLowerCase()})),o=r.filter((function(t){return t.quality&&"hd"===t.quality.toLowerCase()})),a=r.filter((function(t){return t.quality&&["normal","medium","standard"].includes(t.quality.toLowerCase())}));switch(e){case"high":i.length?r=i:o.length?r=o:a.length&&(r=a);break;case"medium":default:a.length?r=a:o.length?r=o:i.length&&(r=i)}var s=r.filter((function(t){return"object"==typeof t.url&&t.url.audioUrl}));s.length&&(r=s);return r[0]}(e,t.name),i=Object.assign({},n);if(i.useConverter=!0,"object"==typeof i.url&&(i.url=i.url.audioUrl,delete i.useConverter),["m3u8","m3u"].includes(i.ext)&&(i._hls=!0,delete i._isDashMPD),i.ext="mp3",i.soundOnly=!0,i.quality=t.name,i.resolution=t.bitrate,i.type="audio",i.sortValues={qualityValue:t.qualityValue},"www.youtube.com"===location.host){var o=new URLSearchParams(i.url).get("itag"),a=r.find(t=>t.itag===o)||r[0];i.resolution!==a.bitrate&&i.quality!==a.name&&(i.resolution="0kbps")}return i}));i=i.reduce((t,e)=>(t.some(t=>parseInt(t.resolution)>=parseInt(e.resolution))||(t=[]).push(e),t),[]),o=o.concat(i)})),o):o}function H(t){var e=[];return t.forEach(t=>{t.title||(t.title=t.filename);var r=t.title||t.filename,n=e.find(t=>t.title===r||t.filename===r);n?n.media.push(t):e.push({media:[t],title:r})}),e}try{C=chrome.i18n.getMessage||(()=>"")}catch(t){C=()=>""}var V=C,z=(t,e)=>t.type===e.type&&("string"!=typeof t.url&&"string"!=typeof e.url?t.url.videoUrl==e.url.videoUrl:t.url===e.url),G=e=>{var r;return(e=null!==(r=null!=e?e:t.tab_url)&&void 0!==r?r:window.location.href).match(/^https:\/\/(www\.)?tiktok\.com/)},W=t=>t?t.replaceAll(/[^aAàÀảẢãÃáÁạẠăĂằẰẳẲẵẴắẮặẶâÂầẦẩẨẫẪấẤậẬbBcCdDđĐeEèÈẻẺẽẼéÉẹẸêÊềỀểỂễỄếẾệỆfFgGhHiIìÌỉỈĩĨíÍịỊjJkKlLmMnNoOòÒỏỎõÕóÓọỌôÔồỒổỔỗỖốỐộỘơƠờỜởỞỡỠớỚợỢpPqQrRsStTuUùÙủỦũŨúÚụỤưƯừỪửỬữỮứỨựỰvVwWxXyYỳỲỷỶỹỸýÝỵỴzZ0-9\s\,\.\<\>\/\?\;\:\'\"\!\@\#\$\%\^\&\*\(\)\-\_\+\=\\\|]/g,"").replaceAll(/\s+/g," "):t,X=(t,e,r)=>{var n=e.timeout;return delete e.timeout,n?(r=null!=r?r:new AbortController,setTimeout(()=>r.abort(),n),fetch(t,Object.assign({signal:r.signal},e))):fetch(t,e)},K=t=>new Promise(e=>setTimeout(e,t));function J(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return e}}function Z(t,e,r){return e.forEach(e=>{("function"==typeof r&&r(e,t)||t.includes(e))&&t.push(e)}),t}class tt{static get(t){return new Promise(e=>{chrome.storage.local.get(t,t=>{e(t)})})}}function et(t){"function"==typeof requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,20)}function rt(t){var e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(window.atob(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(r)}function nt(t){return t.trim().replace("www.","").replace(/^https?:\/\//i,"")}function it(t){try{return t<=9?"0"+t:""+t}catch(t){return"00"}}function ot(t){var e=t.split(".");return Number(e.map(t=>it(Number(t))).join(""))}function at(t){var e=t.getFullYear(),r=t.getMonth(),n=t.getDate();return parseInt(`${e}${it(r)}${it(n)}`)}function st(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(n){clearTimeout(e),e=setTimeout(()=>{t(n)},r)}}function ut(t){var e=new Date(t),r=new Date(Date.now());return e.getDate()==r.getDate()&&e.getMonth()==r.getMonth()&&e.getFullYear()==r.getFullYear()}function ct(t){var e=ut(t),r=(new Date(Date.now()).setHours(0,0,0,0)-new Date(t).setHours(0,0,0,0))/86400/1e3==1;return!e&&r}function lt(){var t,e;return!!(null===(e=null===(t=null===window||void 0===window?void 0:window.matchMedia)||void 0===t?void 0:t.call(window,"(prefers-color-scheme: dark)"))||void 0===e?void 0:e.matches)}function ht(){0}}.call(this,r(9))},1:function(t,e,r){"use strict";r.d(e,"o",(function(){return n})),r.d(e,"v",(function(){return i})),r.d(e,"w",(function(){return o})),r.d(e,"C",(function(){return a})),r.d(e,"u",(function(){return s})),r.d(e,"p",(function(){return u})),r.d(e,"t",(function(){return c})),r.d(e,"l",(function(){return l})),r.d(e,"s",(function(){return h})),r.d(e,"b",(function(){return d})),r.d(e,"x",(function(){return f})),r.d(e,"r",(function(){return p})),r.d(e,"i",(function(){return m})),r.d(e,"c",(function(){return v})),r.d(e,"k",(function(){return g})),r.d(e,"j",(function(){return y})),r.d(e,"A",(function(){return b})),r.d(e,"m",(function(){return _})),r.d(e,"h",(function(){return w})),r.d(e,"g",(function(){return E})),r.d(e,"B",(function(){return T})),r.d(e,"y",(function(){return O})),r.d(e,"z",(function(){return x})),r.d(e,"a",(function(){return S})),r.d(e,"n",(function(){return A})),r.d(e,"q",(function(){return k})),r.d(e,"e",(function(){return L})),r.d(e,"d",(function(){return R})),r.d(e,"f",(function(){return I}));var n={audio:{title:"Audio",icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3.34701 16.1464C3.91819 16.7176 4.60481 17.0032 5.40688 17.0032C6.20895 17.0032 6.89558 16.7176 7.46676 16.1464C8.03792 15.5752 8.3235 14.8886 8.3235 14.0865V5.72114H16.2603V11.7404C16.0263 11.5502 15.7699 11.4076 15.491 11.3125C15.2122 11.2174 14.913 11.1699 14.5936 11.1699C13.7915 11.1699 13.1049 11.4555 12.5337 12.0267C11.9625 12.5978 11.6769 13.2845 11.6769 14.0865C11.6769 14.8886 11.9625 15.5752 12.5337 16.1464C13.1049 16.7176 13.7915 17.0032 14.5936 17.0032C15.3957 17.0032 16.0823 16.7176 16.6535 16.1464C17.2246 15.5752 17.5102 14.8886 17.5102 14.0865V5.72114V2.99683H16.6768H16.2603H7.07355V11.7404C6.83957 11.5502 6.58316 11.4076 6.30432 11.3125C6.02547 11.2174 5.72632 11.1699 5.40688 11.1699C4.60481 11.1699 3.91819 11.4555 3.34701 12.0267C2.77582 12.5978 2.49023 13.2845 2.49023 14.0865C2.49023 14.8886 2.77582 15.5752 3.34701 16.1464Z" fill="currentColor"/>\n</svg>\n',rgxp:/audio/i,extensions:["mp3","flac","m4a","wma","ogg","wav","aif","mid","opus"],extensions_weight:["mp3","flac","m4a","wma","ogg","wav","aif","mid","opus"],ctype2extension:{midi:"mid",mp4:"m4a",m4a:"m4a",mpeg:"mp3",mpeg3:"mp3",wav:"wav",aiff:"aif",opus:"opus"}},video:{title:"Video",icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3.79009 16.25C3.36914 16.25 3.01284 16.1041 2.72117 15.8125C2.42952 15.5208 2.28369 15.1645 2.28369 14.7435V5.25642C2.28369 4.83547 2.42952 4.47917 2.72117 4.1875C3.01284 3.89583 3.36914 3.75 3.79009 3.75H13.2772C13.6982 3.75 14.0545 3.89583 14.3461 4.1875C14.6378 4.47917 14.7836 4.83547 14.7836 5.25642V9.07052L17.7163 6.13785V13.8621L14.7836 10.9294V14.7435C14.7836 15.1645 14.6378 15.5208 14.3461 15.8125C14.0545 16.1041 13.6982 16.25 13.2772 16.25H3.79009ZM3.79009 15H13.2772C13.352 15 13.4135 14.9759 13.4615 14.9279C13.5096 14.8798 13.5337 14.8183 13.5337 14.7435V5.25642C13.5337 5.18162 13.5096 5.12019 13.4615 5.0721C13.4135 5.02402 13.352 4.99998 13.2772 4.99998H3.79009C3.7153 4.99998 3.65386 5.02402 3.60577 5.0721C3.55769 5.12019 3.53365 5.18162 3.53365 5.25642V14.7435C3.53365 14.8183 3.55769 14.8798 3.60577 14.9279C3.65386 14.9759 3.7153 15 3.79009 15Z" fill="currentColor"/>\n</svg>\n',rgxp:/video/i,extensions:["mp4","mpeg4","mpg","mpeg","m4v","avi","divx","mov","wmv","movie","asf","webm","flv","3gp","m3u8","m3u","ogv","mpd"],extensions_weight:["mp4","mpeg4","mpg","mpeg","m4v","avi","divx","mov","wmv","movie","asf","webm","flv","m3u8","m3u","3gp"],ctype2extension:{mpeg:"mp4",mp4:"mp4",m4v:"mp4","3gpp":"3gp",flv:"flv",quicktime:"mov",msvideo:"avi","ms-wmv":"wmv","ms-asf":"asf"}},no_watermark_video:{title:"No watermark video",icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M21.53 7.15C21.378 7.06223 21.2055 7.01603 21.03 7.01603C20.8545 7.01603 20.682 7.06223 20.53 7.15L17 8.89C16.9715 8.11357 16.6429 7.37847 16.0834 6.83944C15.5238 6.3004 14.777 5.99948 14 6H5C4.20435 6 3.44129 6.31607 2.87868 6.87868C2.31607 7.44129 2 8.20435 2 9V15C2 15.7957 2.31607 16.5587 2.87868 17.1213C3.44129 17.6839 4.20435 18 5 18H14C14.777 18.0005 15.5238 17.6996 16.0834 17.1606C16.6429 16.6215 16.9715 15.8864 17 15.11L20.56 16.89C20.6963 16.9599 20.8468 16.9975 21 17C21.1872 17.0006 21.3709 16.9486 21.53 16.85C21.6741 16.7599 21.7929 16.6346 21.8751 16.4859C21.9574 16.3372 22.0003 16.1699 22 16V8C22.0003 7.83006 21.9574 7.66283 21.8751 7.51411C21.7929 7.36538 21.6741 7.24007 21.53 7.15ZM15 15C15 15.2652 14.8946 15.5196 14.7071 15.7071C14.5196 15.8946 14.2652 16 14 16H5C4.73478 16 4.48043 15.8946 4.29289 15.7071C4.10536 15.5196 4 15.2652 4 15V9C4 8.73478 4.10536 8.48043 4.29289 8.29289C4.48043 8.10536 4.73478 8 5 8H14C14.2652 8 14.5196 8.10536 14.7071 8.29289C14.8946 8.48043 15 8.73478 15 9V15ZM20 14.38L17 12.88V11.12L20 9.62V14.38Z" fill="currentColor"/></svg>',rgxp:/no watermark video/i,extensions:["mp4","mpeg4","mpg","mpeg","m4v","avi","divx","mov","wmv","movie","asf","webm","flv","3gp","m3u8","m3u","ogv","mpd"],extensions_weight:["mp4","mpeg4","mpg","mpeg","m4v","avi","divx","mov","wmv","movie","asf","webm","flv","m3u8","m3u","3gp"],ctype2extension:{mpeg:"mp4",mp4:"mp4",m4v:"mp4","3gpp":"3gp",flv:"flv",quicktime:"mov",msvideo:"avi","ms-wmv":"wmv","ms-asf":"asf"}},subtitles:{title:"Subtitles",icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3.90869 13.6143V12.3643H11.8253V13.6143H3.90869ZM3.90869 10.2809V9.03096H16.8253V10.2809H3.90869ZM3.90869 6.94759V5.69763H16.8253V6.94759H3.90869Z" fill="currentColor"/>\n</svg>\n',rgxp:/subtitles/i,extensions:["yt_srt","srt","vtt"],extensions_weight:["yt_srt","srt","vtt"]}},i={"4320p":{i18n_label:"quality_8k_uhd",label:"8K UHD",value:1600},"3072p":{i18n_label:"quality_4k_qfhd",label:"4K QFHD",value:1400},"2160p":{i18n_label:"quality_4k_uhd",label:"4K UHD",value:1200},"2048p":{i18n_label:"quality_qhd",label:"Quad HD",value:1100},"1440p":{i18n_label:"quality_qhd",label:"Quad HD",value:1e3},"1080p":{i18n_label:"quality_fhd",label:"Full HD",value:800},"720p":{i18n_label:"quality_hd",label:"HD",value:600},"540p":{i18n_label:"quality_standard",label:"Standard",value:500},"480p":{i18n_label:"quality_standard",label:"Standard",value:500},"360p":{i18n_label:"quality_medium",label:"Medium",value:400},"320p":{i18n_label:"quality_medium",label:"Medium",value:400},"270p":{i18n_label:"quality_small",label:"Small",value:300},"240p":{i18n_label:"quality_small",label:"Small",value:200},"144p":{i18n_label:"quality_mobile",label:"Mobile",value:100}},o=["video","audio","subtitles"];function a(t){return!!t&&-1!==["m3u8","m3u","hls","zip"].indexOf(t)}var s=[4320,3072,2160,2048,1440,1080,720,540,480,360,320,270,240,144],u=[/^(.+\.)?nixcdn\.com/im,/^(.+\.)?vcmedia\.vn/i,/^(.+\.)?kenhhd\.tv/i],c=[/coccoc\.com\/sitemap\.xml/i],l=[/m\.naver\.com\/\/?shorts/i],h="hidePermanent",d="customControlFromServer",f="youtubeControls",p="otherControls",m="116.0.0.0",v=1,g=3,y=1,b="youtubeTurnOffAdblock",_="gserpSelectors",w="off",E=["animevietsub","vuighe","anime47","animehay","phimmoi","motchill","dongchill","dailymotion.com","hhpanda","bluphim","phimtuoitho","subnhanh","tvhay","phim33","hoathinh3d","phimtm","hhkungfu","motphimtv","tvphim","phimhay","xem14","animesub","hh3dhay","ghienphim","vietsub","vipphim","khophim","phimvsub","ohitv"],T="ytbViewCount",O=9,x="ytbMobileOnboardReady";class S{}S.PROMOTE_SERP={_:"promote_serp",GET:"get_promote_serp",CLOSE:"close_promote_serp"},S.ONBOARD_TRACK={GET:"get_onboard_track",SAVE:"save_onboard_track"},S.ONBOARD_IMPORTDATA="get_onboard_importdata",S.DOWNLOAD="download",S.PLAY="play_video",S.SET_FEATURE="set_feature",S.IS_SUPPORTED="is_supported",S.FRAME_TYPE="frame_type",S.FETCH="background_request",S.YOUTUBE={GET_INFO:"youtube_get_info",GET_MPD:"youtube_get_mpd_info"},S.OMNI={ACTIVE:"active_omnibox",DEACTIVE:"deactive_omnibox"},S.METRICS="metrics",S.CACHE="cache.background",S.PIP={REQUEST:"pip",INNER:"inner_frame_pip",ON:{ENTER:"inner_pip_enter",LEAVE:"inner_pip_leave"}},S.CONSOLE_LOG="console.log",S.GET_URL="get_url",S.SAVE_URL="save_url",S.GET_MATCHED_REQUESTS="get_matched_requests",S.GET_SERVER_TIME="get_server_time",S.OPEN_SEARCH_SETTINGS="open_search_engines_settings",S.SCRIPTING={INJECT:"inject_script",NOTIFY:"script_executed",EXEC:"execute_script"},S.OPEN_SETTINGS="open_settings",S.OFFSCREEN={},S.TURN_OFF_ADBLOCK_ON_YOUTUBE="turn_off_adblock_on_youtube",S.TURN_ON_ADBLOCK_ON_YOUTUBE="turn_on_adblock_on_youtube",S.GET_FASTFORWARD_ENABLED="get_ff_enabled";var A=["chrome://","coccoc://"],k=["coccoc.com/webhp","about:blank"],L=["xoilac","thapcam","cakhia","vebo","gavang","c19hcc","90phut","screenbid","socolive","luongson","xembong","livebong","bongda","caheo","soco","rakhoi","tructiepbong","antlive"],R=["anime","vuighe.org"],I=["truyen","manga","comic","manhwa","manhua","toon","ebook","novel","monkeyd","wattpad","waka.vn"]},10:function(t,e,r){"use strict";r.d(e,"h",(function(){return m})),r.d(e,"f",(function(){return v})),r.d(e,"l",(function(){return s})),r.d(e,"k",(function(){return a})),r.d(e,"d",(function(){return o})),r.d(e,"b",(function(){return u})),r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return l})),r.d(e,"i",(function(){return h})),r.d(e,"e",(function(){return p})),r.d(e,"g",(function(){return d})),r.d(e,"j",(function(){return f}));var n=r(14),i=r(0);function o(t){var e;if(!(t instanceof HTMLElement))return{width:0,height:0};t.matches("embed")&&(null===(e=t.parentNode)||void 0===e?void 0:e.matches("object"))&&(t=t.parentNode);var r=null==t?void 0:t.querySelector("embed");r&&r.offsetWidth&&r.offsetHeight&&(t=r);var n=t;return{width:n.offsetWidth,height:n.offsetHeight}}function a(t){return t.split(";").reduce((t,e)=>{var r=e.indexOf(":");if(-1!==r){var n=e.substr(0,r).trim(),i=e.substr(r+1).trim();t[n]=i}return t},{})}function s(t,e){var r=t=>{var r=t.getAttribute("style")||"",n=a(r);for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);var o,s=(o=n,Object.keys(o).map(t=>t+": "+o[t]).join("; ")+";");r!==s&&t.setAttribute("style",s)};Array.isArray(t)?t.forEach(r):r(t)}function u(t){return t.attachShadow?t.attachShadow({mode:"open"}):t.createShadowRoot({mode:"open"})}function c(t,e){var r=document.createElement(t);return e&&(r.className=e),r}function l(t){if("IFRAME"===t.tagName)return t;for(var e=t,r=t.parentElement;(null==r?void 0:r.parentElement)&&"BODY"!==r.tagName;)n(t,r)&&i(t,r)&&(e=r),r=r.parentElement;function n(t,e){var r,n,i=t.getBoundingClientRect(),o=e.getBoundingClientRect();return n=o,(r=i).height>n.height||r.width>n.width||Math.abs(i.top+i.height/2-o.top-o.height/2)<3&&Math.abs(i.left+i.width/2-o.left-o.width/2)<3}function i(t,e){var r=t.getBoundingClientRect(),n=r.width,i=r.height,o=e.getBoundingClientRect(),a=o.width,s=o.height;return Math.abs(a-n)<3&&Math.abs(s-i)<3}return e}function h(t){return d(t)&&f(t)&&!p(t)}function d(t){if("audio"===t.tagName.toLowerCase())return!0;if(n.a.checkWhite(t,"pip-allowfullscreen-false"))return!0;if(t.matches('embed[allowfullscreen="true"], iframe[allowfullscreen], iframe[allow*="fullscreen"], video')&&!n.a.check(t,"pip-allowfullscreen-false"))return!0;if("OBJECT"===t.tagName)return!!Object(i.queryAll)('param[value="true"]',t).filter((function(t){var e;return"allowfullscreen"===(null===(e=t.getAttribute("name"))||void 0===e?void 0:e.toLowerCase())})).length;var e,r=t.src;return!!(t.offsetParent&&r&&(e=r,e.includes("vidio.com/embed")||e.match(/detik\.com\/(?:.*\/)?embed/i)||e.match(/play\.play[\s\S]*(xyz|net)/i)||e.includes("vuighe.net/embed/?url")||(null==r?void 0:r.match(/url=+[\s\S]+(video.docbao.vn)+[\s\S]+(.mp4)/g))||r.match(/drive\.google\.com\/file\/.*\/preview/)))}function f(t){if(["v.douyu.com","www.twitch.tv"].includes(location.host))return!0;var e=t.getAttribute("src");return"video"===t.tagName.toLowerCase()?!!(e&&"blob:null"!==e||t.querySelector("source")):"iframe"!==t.tagName.toLowerCase()||!location.href.includes(e)}function p(t){var e=!1,r=t.querySelector("embed");return r&&(e=n.a.check(r)),e||n.a.check(t)}function m(t){for(var e,r=null===(e=document.body.parentNode)||void 0===e?void 0:e.parentNode;t&&t!==r&&"#document-fragment"!==t.nodeName;){var n=window.getComputedStyle(t);if(n&&"fixed"===n.getPropertyValue("position"))return!0;t=t.parentNode}return!1}function v(){return Boolean(document.fullscreenElement||document.webkitFullscreenElement)}},11:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"f",(function(){return i})),r.d(e,"e",(function(){return o})),r.d(e,"c",(function(){return a})),r.d(e,"g",(function(){return s})),r.d(e,"d",(function(){return u})),r.d(e,"b",(function(){return c})),r.d(e,"h",(function(){return l}));var n=["/pre-roll/","/preroll/","/ads/","||histats.com/","||adnetwork.vn/","||doubleclick.net/","||admicro/","||adnet.vn/","||ds-vn.serving-sys.com/","||lavanetwork.net/","||video.sgame.vn:8080/","blueseed.tv","||new-cdn.blueseed/","||vcmedia.vn/","||innity.net/","||serving-sys.com/","||ambientplatform.vn/","||gvt1.com/","||comment.dantri.com.vn/","||adsquangcao.com/","||facebook.com/connect","||facebook.com/plugins/likebox.php","||facebook.com/plugins/like.php","||cdn.cloudfrale.com","||www990.o0-2.com","||facebook.com/plugins/comments.php","||facebook.com/connect/xd_arbiter","||facebook.com/plugins/page.php","||facebook.com/v*/plugins/*","||googlesyndication.com","||qccoccocmedia.vn/","||coccoc.com/webhp##*","||coccoc.com/welcome##*","||meme.vn/##*","||ads.phimnhanh.net/","||adsquangcao.com/","||edgecastcdn.net/","||qccoccocmedia.vn/","||dev-qccoccocmedia.vn/","||media.adnetwork.vn/","||www.google.com/maps/embed","@@||vhosting.vcmedia.vn/","@@||vcplayer.vcmedia.vn/","@@||vscc.hosting.vcmedia.vn/","@@||vscc.dantri.hosting.vcmedia.vn/","@@||vscc-kenh14-hosting.vcmedia.vn/","@@||hls.vcmedia.vn/","##.adsbygoogle iframe","###adcontainer *","##.ad-container *",'##.facebook-top *, .fb-like-box *, iframe[title^="fb:like_box"]','##iframe[title^="fb:page"]','##[id^="AbdVideoPreroll"]','##[data^="player-ads"]','##[id^="google_ads_iframe_"]',"###pyv-iframe","##.box-ads *","##.ads *","##.video-ads *",'##iframe[onload*="google_iframe_oncopy"]','||youtube.com##[id*="sidebar-ads"] *',"||bit.ly/",'##[name*="zeroclipboard"],[data*="zeroclipboard"]',"||xemphimso.com/##.right-menu *","###AbdPopupAd_left iframe",'||phim.hayhd.vn/###adsdiv iframe,div[class*="ads"] iframe',"||nhaccuatui.com/##.box_right *,#banner-container-bottom *","||adxpansion.com/","||porn99.net##.content-right *","||thuvienanh.org/","||xemvtv.net/###ads-slider *",'||yeucahat.com/##div[id^="adscont"] *',"||sexad.net/","||ads.sex.com/",'||redtube.com/##div[id^="as_"] *','##object[id^="abdPopup"]',"||adnetwork.vn/",'##object[data*=".adnetwork.vn/"]',"||phim3s.net/##.ad_location *","||xhamster.com/###plAds *,.adVideo *,#adBottom *","||exoclick.com/","||trafficstars.com/","||traffichaus.com/","||trafficjunky.net/","||vivo.vn##.content-right-sidebar *","||pornhub.com/###pb_block *,.right-ads *",'||xemphimso.com/##[id^="ebAd"],#eyeDiv *','||vivo.vn/##div[class*="ads"] *',"||phim.hayhd.vn/###block-resize-sidebar *","||phim.hayhd.vn/##.container .col-sm-8+.col-sm-4 *","||pornhub.com,tube8.com,youporn.com,redtube.com###pb_template *","||nhac.vui.vn/##.colRight *","||tube8.com/##.blockHtml *","||vkool.net/##.float-ck *,.col-left *,#sidebar *, #boxes *","||comment.vietid.net/comments","||dantri.com.vn/comment","||dantri.com.vn/##.fr.w510 *",'||vnexpress.net/##[id*="_BANNER_"] *, .block_banner *',"||vnexpress.net/authen/users/guestpost",'||24h.com.vn/##[id*="ADS_"] *',"||ngoisao.net/###right *","||nhaccuatui.com/##.coverImage *","||phimsexporn.com/##.balloons-ck *","/twitter\\.com\\/.*cards\\/.*cardname=poll/","##.twitter-tweet.twitter-tweet-rendered",'##[id^="preroll"] *','##[id^="preroll-player_swf_0"]','##[class^="preroll"] *',"||adpoints.media","||media.yomedia.vn","goldendatagroup.*","||video-juice.com","##.jw-flag-ads > .jw-media > .jw-video","||zing.vn###highlight video",/[\s\S]\.danet.vn\/html\/embed/,/([\/\/]|_)blank|bg.mp4|manclub.mp4|AnimeTVN_P.mp4|main.mp4|init.mp4|blip2.ogg|chunklist(?!.m3u8)|([0-9]+s\.(mp4|m3u8|ogg))|black\.mp4|(wp-content\/uploads\/\d+\/\d+\/[a-zA-Z0-9\-_]+\.(mp4))|bichilltv\.com[\s\S]+\d+\.mp4/,"vividobj.*.cdnviet.com","vcdn.media.innity.net","ds-vn.serving-sys.com","###video-anchor_ad iframe","###pagelet_page_cover video","##.jw-flag-ads-googleima.jw-flag-ads *",/https?:\/\/www\.phimmoi\.net\/resource\/video\/blank\d+\.mp4/,"ads-pd.nbcuni.com",/adtool-premium\/creatives/,/banners[\s\S]*\.trafficfactory[\s\S]*\.mp4/,"contentabc.com","criteo.net","||coccoc.com/search##video[data-savior-token]","||force.com##iframe",'||drive.google.com##[role="main"] iframe:not([id*="video-player"])',"||zingmp3.vn##.Player.--z-video-ads .Player-content","@@||coccoc.com^$document","@@||suckhoedoisong.vn$image","@@||idplanguage.com$image","!PF - 2023","||unreshiramor.com^","!PF - 1740","@@||embed.dugout.com^","!PF - 2023","||unreshiramor.com^$popup,third-party","||hydracdn.network^$popup,third-party","/about:blank#/$popup,domain=22pixx.xyz|9anime.to|disk.ly|dood.to|dood.watch|fmovies.to|gogoanime.pro|hydracdn.network|imagetwist.com|mixdrop.co|mstream.xyz|popads.net|powvideo.net|powvldeo.cc|putlocker.style|run-syndicate.com|spcdn.cc|steamplay.cc|streamtape.com|upstream.to|uptostream.com|vev.io|vev.red|vevo.io|vidcloud.co|videobin.co|videowood.tv|viditodo.com|vidoza.net|vidup.io|vortez.net|vshare.eu|watchserieshd.tv|unreshiramor.com","about:blank","||fdrgtt9edmej010.com","||ribunews.com","||itnuzleafan.com","||yougotacheck.com","||derevya2sh8ka09.com","||syndication.realsrv.com","||prismgadnarc.icu","!PF - 2683","dantri.com.vn#@#.ng-isolate-scope","!PF-2084 - open for savior",'@@||video.kenh14.vn,div^$[class*="ads"]',"!PF - 860","||buy.tinypass.com^$third-party,domain=insider.com","!Not whitelist for Coc Coc adnetword in strict mode","!@@||cdn2.cache.vn/banners/sspAnetTest/cc_ssp_new.js","!@@||static.adconnect.vn/main.js ",'docs.google.com#@#iframe[src="about:blank"]',"@@||tuyensinh247.com/$image,third-party","||jarvispopsu.com^","||03ed9035a0801f.com^","||widow5blackfr.com^","||thanosofcos5.com^","truyenaudiocv.net#$#abort-current-inline-script adblockDetect","truyenaudiocv.net#@#.adsbygoogle","levelmaxblock.js","||se.lingoeroily.com^$third-party","||aloetichansels.casa^$third-party","||glixaing.com^","||yonsandileer.com^","||itheatmoran.com^","||fieldofbachus.com^","||se42ade5e3son7ing.com^","||03ed9035a0801f.com^","||pubmaner5.com^","||susifhfh2d8ldn09.com^","||osshydreigonan.com^","||log.videocampaign.co^","||graizoah.com^","||hoanoola.net^","||agacelebir.com^","||se.lingoeroily.com^","||gpcdreunite.casa^","||zinblemedia.fuse-cloud.com^","||egreephu.com^","||agurgeed.net^","||dartarscuspids.casa^","||ayyubidgconv.casa^","||sillyflowermachine.com^","||stawhoph.com^","||rotabol.com^","||hadesleta.com^","||03ed9035a0801f.com^","||nyalacornily.cam^","||codedexchange.com^$script,third-party","||streetcoddiffident.com^$script,third-party","||tsardagger.com^$script,third-party","||onemboaran.com^$script,third-party","||nyalacornily.cam^$script,third-party","||nomorepecans.com^$script,third-party","||onmarshtompor.com^$third-party","||zo.ogamdidacts.com^$third-party","||quenchskirmishcohere.com^$third-party","||highmaidfhr.com^$third-party","||kgdvs9ov3l2aasw4nuts.com^$third-party","sex-hay.pro,phimsex7.net##.float-ck","cdnx.stream###banner","biphims.tv###overlay",".onetouch7.info","/asset/jquery/slim-3.2.min.js","/asset/vue.min.js?ts=1&_","xnxx-sex-videos.com/a$script","m.phimsexsub.info,phimsexsub.info###a-player","!snippet script","vcomic.net#$#abort-on-property-read window.canRunAds","hataphim.com#$#abort-on-property-write mdpDeBlocker","xnxx-sex-videos.com#$#abort-on-property-write user_out","!Fix salaphim.com","@@||salaphim.com/application/player/js/vastvideoplugin.js","@@||salaphim.com^*.gif$image","@@||salaphim.com^*.php$xmlhttprequest","!Adding rules for vieon.vn","@@||imasdk.googleapis.com/js/sdkloader/ima3.js","!Fix 20210906: biphimz.tv, phim33.co, vlogtruyen.net, phim7z.tv, biphims.tv, hpjav.tv, phephims.net, ailovemanga.com, vlive.tv, vidembed.cc, live90.live, fancoiphim.net, cakhiatv.live, hdzog.com, upornia.com","||xq.ypocrasbywalk.com^$third-party","||phim33.co$popup","||phim33.co/Theme/js/popup.js","||vlogtruyen.net$popup","||au.withyarryish.com^$third-party",'hpjav.tv##iframe[src*="stunninglover.com"]',"fardhvarment.com^$third-party","||rosteldicycle.cam^$third-party","vlive.tv###loginDimmedArea","vlive.tv##.ly_promotion","||chaingab.net^$third-party","live90.live###modalAds","live90.live##.fade-ads","||fancoiphim.net$popup","afon/rass$script","||upornia.com/niasffti/jcfxdexak.js","!Fix 20210916","phimhdvnz.net#$#abort-current-inline-script jQuery /#wrapper/","truyentranh86.com#$#abort-on-property-read document.body","201tube.tv#$#abort-on-property-read document.body","hataphim.com#$#abort-on-property-write mdpDeBlocker","@@||steamforvietnam.org^","@@/api/tracking/*$domain=steamify.steamforvietnam.org","||truyen3s.com/content/js/custom.js","||truyen3s.com/content/js/script.js","truyen3s.com#$#abort-on-property-read document.body","truyen3s.com#$#abort-on-property-read document.documentElement","@@*vast.js$domain=phimchat.vip|phimchat.club","@@/video_ads.$domain=phimchat.vip|phimchat.club","!Fix 20210922","@@$script,xmlhttprequest,domain=napthengay.vn","||bicepsseiner.com^",'dualeotruyen.top##[id^="popup_banner"]',"rakhoi1.tv,cakhia10.tv,cakhia.xyz,cakhia9.tv,rakhoi.tv,cakhiatv.live,cakhialive.tv,cakhia6.tv,cakhia8.tv,cakhia20.tv##.modal-ads","rakhoi1.tv,cakhia10.tv,cakhia.xyz,cakhia9.tv,rakhoi.tv,cakhiatv.live,cakhialive.tv,cakhia6.tv,cakhia8.tv,cakhia20.tv##.slide-bar-top-live-hide-mobi","rakhoi1.tv,cakhia10.tv,cakhia.xyz,cakhia9.tv,rakhoi.tv,cakhiatv.live,cakhialive.tv,cakhia6.tv,cakhia8.tv,cakhia20.tv##.footer-banner",'rakhoi1.tv,cakhia10.tv,cakhia.xyz,cakhia9.tv,rakhoi.tv,cakhiatv.live,cakhialive.tv,cakhia6.tv,cakhia8.tv,cakhia20.tv##div[class^="slide-bar-"]',"rakhoi1.tv,cakhia10.tv,cakhia.xyz,cakhia9.tv,rakhoi.tv,cakhiatv.live,cakhialive.tv,cakhia6.tv,cakhia8.tv,cakhia20.tv##.adHTML2","rakhoi1.tv,cakhia10.tv,cakhia.xyz,cakhia9.tv,rakhoi.tv,cakhiatv.live,cakhialive.tv,cakhia6.tv,cakhia8.tv,cakhia20.tv##.adHTML4","rakhoi1.tv,cakhia10.tv,cakhia.xyz,cakhia9.tv,rakhoi.tv,cakhiatv.live,cakhialive.tv,cakhia6.tv,cakhia8.tv,cakhia20.tv##.adHTML3","xuongphim18z.net##.modal-backdrop","###quang-cao","xuongphim18z.net###pc-preload-modal","truyentranh8.org#$#abort-on-property-read document.body","vuvitv.net,animevisub.net###modal-block-ads-msg","vuvitv.net,animevisub.net##.modal-backdrop","@@/vast.$script,xmlhttprequest,domain=vuianime.net","@@player.vuianime.net/ads_code","bilutvx.net##.abp-ballon","proporn.com##.puFloatLine","/js/ads.js","/asset/angular.min.js$domain=websextop.com","||sexfrisk.com/bounce.js","truyenqqtop.com##.left-banner","/js/upload/main.v2.min.js$domain=s1.zendplace.pro","z.phimsexsub.info##.clipxx","xoso88.tv##.banner","xoso88.tv##.ads_home","!Fix 20210929","xvideo-xxx.com#$#abort-on-property-write user_out","/asset/angular.min.js?t=","||z.phimsexsub.info/pp/puinfo.js","z.phimsexsub.info###htmlctry",'z.phimsexsub.info##div[style*="height: 255px;"]',"@@/1x1.png$domain=miti.vn","ngentotxsex.com#$#abort-on-property-write user_out","@@||mv.vkool.net^$image","!Fix 20211001",'phimlau.online##a[href^="///"][rel="nofollow norefferer noopener"]',"||mg.ratchgablet.com^$script","||sofinpushpile.com^$third-party","@@/advert/*$domain=nimec.gov.vn","!Fix 20211006","sexbombo.com#$#abort-on-property-write user_out","||asg.bhabhiporn.pro^","truyen86.com#$#abort-on-property-read document.body","truyen86.com#$#abort-on-property-read window.canRunAds","xuongphim18z.com###quang-cao","xuongphim18z.com###pc-preload-modal","xuongphim18z.com#$#abort-on-property-read document.cookie","vivutv.net#$#abort-on-property-write popups","@@||gstatic.com^$third-party,domain=google.com","@@||google.com/display-ads-","@@weiyun.com$generichide","@@||gateway.chotot.com^","||ig.lurefuleuryon.com^$script","||lm.anywaypimpish.com^$script","ssphim.net##.uniad-zonetype-preload-overlay","ssphim.net##.uniad-zonetype-preload-container","||dendrafilterednthe4edm7um.com^$script","mitom2.tv#$#abort-current-inline-script jQuery popupBanners","||cdn.hurirk.net/static/js/amvn.js","||playersb.com/js/jquery/jquery-1.4.1.min.js","violet.vn###previewad","||yg.humorersingult.com^","||subnhanh.net/js/ads_xx.js","logo.png$popup,domain=animehay.site","||olivcytyspixd.xyz^$third-party","||casyxndfiyb.xyz^$third-party","gamevui.vn###underplayad","gamevui.vn###topplayad","gamevui.vn###adindexsecond","gamevui.vn###adindextop","gamevui.vn###adrightthird","gamevui.vn###adrighttop","||hu.bathingrefont.com^$script","xoilac1.tv#$#abort-current-inline-script jQuery popupBanners","xoilac1.tv#$#abort-on-property-write adsRedirectPopups","mitom1.tv#$#abort-current-inline-script jQuery popupBanners","mitom1.tv#$#abort-on-property-read adsRedirectPopups","||untimburra.com^$script","||t.dtscout.com^$script","javmup.net#$#abort-current-inline-script Math","||lu.oppleteniffers.com^$script","websosanh.vn#@#.ads-wrap","||x2sfa.javgg.eu^","||id.fc2-ppv.live^$script","||japopav.tv/js/jquery/3.6.0/jquery-1.4.1.1.min.js","||hdvietsub.net/wp-content/themes/movies/js/qcphd.js",'youtube.com#@#div[id^="sponsor-"]',"lucaphim.com,salaphim.com##.dont_show_pop_ups","@@||lucaphim.com^*.php$xmlhttprequest","||fw.noritesroyally.com^$script","||cg.nonentnastier.com^$script","||ay.cydoniarouting.com^$script","xoilac2.com#$#abort-current-inline-script jQuery popupBanners","xoilac2.com#$#abort-on-property-write adsRedirectPopups","phimgii.net###preload-11bet-pc","||lr.heavedmealock.com^","motphimtv.com##.mp-adz","@@$script,domain=game24h.vn","game24h.vn#@#.adsbyvli",'game24h.vn##[data-id="vi-smartbanner-unit"]',"chill.popv.js$script","@@$script,XMLHTTPREQUEST,domain=myreadingmanga.info","iphimmoi.net###popup-giua-man-hinh","iphimmoi.net#$#abort-current-inline-script $ /#btn-film-watch/","dualeotruyentv.com###popup_banner_beta","@@/video_ads.$domain=phimchat.vip|phimchat.xyz","@@||p.jwpcdn.com/player/plugins/vast/$domain=phimchat.vip|phimchat.xyz","@@||imasdk.googleapis.com^$domain=baogiaothong.vn","||rw.preopensorrel.com^$script","hypebeast.com#@#.ad-blocked","@@/storage.adpia.vn/$image,domain=mail.google.com","phephimzz.net##.mp-adz","phephimzz.net##.sda-preload-popup","phephimzz.net##.sda-preload-popup-overlay","phimplay.com#$#abort-current-inline-script jQuery /#itro_popup/","phimplay.com#$#abort-on-property-write amf","@@/quangcao/*$domain=hanoicdc.gov.vn","||us.operonsablate.com^","phimsexkhongche.club#$#abort-on-property-write customDB","sex333.net#$#abort-current-inline-script Math","||kenhvn2.com/js/v3$script","javhd.today###closeButton","luotphim.fun,luotphim.cc,luotphim.vip,luotphimzz.com,webphim.cc#@##fakeplayer","@@||luotphim*/wp-content/uploads/$media","##.adsphim-popup-center","chill.popv.js$script","chillnew.popv.js$script","jav1s.net#$#abort-current-inline-script Math","||sqacbhlngoxw.com^$script,third-party","||ygnnqkxheq.com^$script,third-party","dood.sh#$#abort-on-property-write DoodPop","/ads/ad.js","vn.phimsexsub.info##.clipxx","vn.phimsexsub.info#$#abort-on-property-read pss.add","hentaiz.top##.position-fixed","||cresfpho2ntesepapillo3.com^$script","||opencoccoc.com^$script","mephimtrungz.com##[id^=sponsor-]","||auspiceguidance.com^$script","javhdporn.net###player_3x2_container_inner","adserver.*ads.*","||ip.shoversnobs.com^$script","||yf.seitsinlike.com^$script","||yulunanews.name^$script","||zf.indeftroppo.com^","||ephimmoi.net/wp-content/cache/wpfc-minified/2darkmog/6lbb1.js","||ephimmoi.net/wp-content/cache/wpfc-minified/jnnvv5cn/6lbb0.js","xemphimvn2.com,fullfim.net,xemphimz.net,aphimmoi.org,vn2.vn,fullphim.co,phimzhay.net,vn2phim.net,vn2phim.com,motfim.net,phimvn2.net,phimvn2.org,aphimmoi.net,aphimmoi.com,xemphimvn2.net,phim.vn2.vn#$#abort-on-property-read window.google_ad_status","finance.vietstock.vn###allsite_anchor_bottom","sosanhgia.com##.grid-ads","||fr.neebourinthrow.com^$script","||je.zizzlescomplex.com^$script","phim18hd.com##.top-pc-banner","dualeotruyen.tv###popup_banner_beta","sexdiary.xyz#$#abort-on-property-read document.body","||sinmgaepu3or9a61w.com^","||fofyphugi.com^","||chitaglipti.pro^$script","||ta3nfsordd.com^$script","xnxxz.net#$#abort-current-inline-script Math /atob|break/","@@/pubads.*vtvcab.vn*","@@||search.spotxchange.com*vtvcab.vn*","||accounts.google.com##audio",'||*.google.com*/search##video[src*="encrypted-vtbn0.gstatic.com/video?"]',"||coccoc.com/search/about-us##video","||*.coccoc.com/about-us##video","||*quizz.coccoc.com##video","||youtube.com##.miniplayer video","||onetouch.mic.gov.vn##video","||onetouch.mic.gov.vn##iframe","||mydns.playpdc.xyz/video/","||wizardunstablecommissioner.com/watchnew",'||*##iframe[src*="/recaptcha/api"]','||*##iframe[src*="funcaptcha.com"]','||*##iframe[src*="octocaptcha.com"]','||*##iframe[src*="/captcha/v2"]','||youtube.com##iframe[src^="/live_chat"]','||*vnexpress.net##iframe[src*="vnexpress.net/authen"]','||*##iframe[src*="/authen/users/login"]','||vtc.vn##iframe[src^="javascript:"]','||dantri.com.vn##iframe[src*="gadgets.dantri.com.vn/polls"]','||24h.com.vn##video[src*="/upload/html"]',"cdn.thoctv.com",/scontent.cdninstagram.com.+\&bytestart\=.+\&byteend\=.+/,/tbv\.sb-cd\.com\/.+.mp4/],i=["||mail.google.com/","||docs.google.com/","||dropbox.com/","||meme.vn/"],o=["||soundcloud.com##.playControls","||zingmp3.vn##.video-minimize video","||musicbed.com##img","||oxfordlearnersdictionaries.com##.audio_play_button",'||artgrid.io##video[id^="video_"],#main-clipvideo_9999999999999_html5_api','||coccoc.com/about-us##[id^="youtube-player-"]',"||instagram.com/explore##video",'||instagram.com##a[role="link"] video',"||**##audio","||dantri.com.vn##div,article","||tienganh123.com##span"],a=["||fptplay.net/##.hls-playback embed","||pubvn.tv/bar/threads/##iframe#player","||www.24h.com.vn/###player_video_kieu_moi iframe",'||facebook.com/##iframe[src^="https://attachment.fbsbx.com/external_iframe.php"]',"||coccoc.com/search##video[data-savior-token]","@@www.blogger.com/video.g?*","@@www.youtube.com/embed/*","@@www.dmm.co.jp/service/*",/i1-kinhdoanh.vnecdn.net\/.+\/.+?\.gif/,"@@xh.video/*"],s=[/video\.fhan.*?\.fna\.fbcdn\.net/,"/.[\\s\\S]{0,100}dailymotion.*\\/frag\\(\\d+\\)\\//","||fb88.mp4",/https?:\/\/(!=redirector)\.googlevideo\.com\/videoplayback?.+&source=youtube.+/,"||vimeocdn.com/","||clip.vn/","||subs.xemphimonlines.com/","||dmxleo.dailymotion.com/","||nhacrap.tv/","||nixcdn.com/","||zdn.vn/","/fptplay\\.net\\/.*?seg\\d*-frag\\d*/","/hlscache\\.fptplay\\.net(?:\\.vn)?\\//","/49ef4358-e34d-484f-a18e-495cd9fe3817","/75247339-7897-437d-9627-55b1a1528700","http://www.phimmoi.net/resource/video/blank.mp4","http://xemvtv.net/kaka/blank2.mp4",/https?:\/\/.+\.gvt1\.com\/videoplayback\/.+/,/https?:\/\/.+\.2mdn\.net\/videoplayback\/.+/,/\.[\s\S]{0,1000}RomanoHangoutNew15s7\.mp4$/,/blank_video/,/media\/beacon\.webm/,/https:\/\/cdn2?\.cache\.vn\/skin\/.+\.mp4/,"||mail.google.com/","||docs.google.com/","||drive.google.com/","||dropbox.com/","||fptplay.net/livetv","||twitch.tv","@@||twitch.tv/videos/","||talktv.vn","@@||talktv.vn/video/","garena.live","www.dkn.tv","xemphimso.com"],u=[/^https:\/\/(www\.)?tiktok.com\/@[^/]+$/,/^https:\/\/(www\.)?instagram.com\//i,/^https:\/\/(www\.)?lazi.vn\//i],c=[/docs\.google\.com/,/.+\.sharepoint\.com\/:p:\//],l=[/(www\.)?youtube\.com/,/(www\.)?hayko\.tv/,/(www\.)?boyfriendtv\.com/,/(www\.)?kuaishou\.com/,/(www\.)?theyounglove\.com/,/(www\.)?netflix\.com\/watch/i]},13:function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},14:function(t,e,r){"use strict";(function(t){var n=r(11),i=r(2),o=r(0),a=r(1),s=r(30);function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),s=new S(i||[]);return n(a,"_invoke",{value:E(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function p(){}function m(){}var v={};c(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(A([])));y&&y!==e&&r.call(y,o)&&(v=y);var b=m.prototype=f.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var i;n(this,"_invoke",{value:function(n,o){function a(){return new e((function(i,a){!function n(i,o,a,s){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function E(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return k()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=T(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function T(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),c(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new w(l(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(b),c(b,s,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}var c=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},l={ad_filter:"",hide_savior:"hide-widget",disable_pin_rx:"disallow-pip",disable_savior_rx:"disable_savior_sites"},h=["disallow-pip","disable_savior_sites"];e.a=new class{constructor(){this.extra={},this._loadRules(n.a),this._loadRules(n.f,"pip"),this._loadRules(n.c,"pip-allowfullscreen-false"),this._loadRules(n.g,"requests"),this._loadRules(n.e,"hide-widget"),this._loadRegex(n.d,"disallow-pip"),this._loadRegex(n.b,"disable_savior_sites"),this.loadCustomRules()}loadCustomRules(){return c(this,void 0,void 0,u().mark((function e(){var r,n,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Storage.get(["ADLIST_CUSTOM_RULE"]);case 2:if(r=e.sent,(n=(null==r?void 0:r.ADLIST_CUSTOM_RULE)||{}).timestamp&&!(n.timestamp+288e5<Date.now())){e.next=17;break}if(t.IS_CONTENT_SCRIPT){e.next=17;break}return"https://browser.coccoc.com/api/savior/rules",e.prev=7,e.next=10,fetch("https://browser.coccoc.com/api/savior/rules",{mode:"no-cors"}).then(t=>t.json());case 10:(c=e.sent)&&(c.timestamp=Date.now(),i.a.set("ADLIST_CUSTOM_RULE",c),n=c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.warn("Caught an error",e.t0);case 17:Object.keys(n).forEach(t=>{var e=l[t];if("string"==typeof e){if(h.includes(e))return void this._loadRegex(n[t],t);this._loadRules(n[t],e||void 0),delete n[t]}});try{n.youtube_logic&&("object"!=typeof n.youtube_logic&&(n.youtube_logic=JSON.parse(n.youtube_logic||"{}")),i.a.set(a.x,n.youtube_logic)),n.gserp_selector&&("object"!=typeof n.gserp_selector&&(n.gserp_selector=JSON.parse(n.gserp_selector||"{}")),i.a.set(a.m,n.gserp_selector)),n.custom_control&&("object"!=typeof n.custom_control&&(n.custom_control=JSON.parse(n.custom_control||"{}")),i.a.set(a.b,n.custom_control)),delete n.timestamp,delete n.custom_control,delete n.youtube_logic,delete n.gserp_selector,Object.keys(n).length&&i.a.set(a.r,n)}catch(t){}t.IS_CONTENT_SCRIPT||s.a.loadTestsFromServer();case 20:case"end":return e.stop()}}),e,this,[[7,14]])})))}check(t,e){var r=e?this.extra[e]:this.rules;return this._testRules(t,r)}checkWhite(t,e){var r=e?this.extra[e]:this.rules;return this._testWhiteList(t,r)}checkRegex(t,e){var r=this.extra[e];return!(!r||!Array.isArray(r)||"string"!=typeof t)&&r.some(e=>e instanceof RegExp&&e.test(t))}shouldWidgetAttachToParentNode(t){return n.h.some(e=>e.test(t))}shouldDisableSavior(t){return(this.extra.disable_savior_sites||n.b).some(e=>e.test(t))}_loadRules(t,e){var r=this._parseFilters(t);if(e){if(!this.extra[e])return void(this.extra[e]=r);var n=this.extra[e];if(Array.isArray(n))return;this._appendRules(n,r)}else{if(!this.rules)return void(this.rules=r);this._appendRules(this.rules,r)}}_appendRules(t,e){t.blCosmetics.push(...e.blCosmetics),t.blUrls.push(...e.blUrls),t.wlCosmetics.push(...e.wlCosmetics),t.wlUrls.push(...e.wlUrls)}_loadRegex(t,e){Array.isArray(t)&&e&&(this.extra[e]||(this.extra[e]=[]),this.extra[e].push(...t))}_testRules(t,e){if(!e)return!1;var r;if("string"==typeof t?r=t:(t.src||t.href)&&(r=t.src||t.href),null==r?void 0:r.startsWith("data:"))return!!/^data:(audio|video)/i.test(r);if(r){for(var n=e.wlUrls.length,i=0;i<n;i++)try{if(e.wlUrls[i].test(r))return!1}catch(t){}n=e.blUrls.length;for(var o=0;o<n;o++)try{if(e.blUrls[o].test(r))return!0}catch(t){}}if(!(t instanceof EventTarget))return!1;for(var a=t.ownerDocument.location.href,s=0;s<e.wlCosmetics.length;s++)try{var u=e.wlCosmetics[s];if(("~"===u.domain[0]&&a.match(u.domain.substr(1))||a.match(u.domain))&&u.selectors.some(t.matches.bind(t)))return!1}catch(t){}for(var c=0;c<e.blCosmetics.length;c++)try{var l=e.blCosmetics[c];if(("~"===l.domain[0]&&a.match(l.domain.substr(1))||a.match(l.domain))&&l.selectors.some(t.matches.bind(t)))return!0}catch(t){}return!1}_testWhiteList(t,e){if(!e)return!1;var r;if("string"==typeof t?r=t:(t.src||t.href)&&(r=t.src||t.href),r)for(var n=e.wlUrls.length,i=0;i<n;i++)try{if(e.wlUrls[i].test(r))return!0}catch(t){}if(!(t instanceof EventTarget))return!1;for(var o=t.ownerDocument.location.href,a=0;a<e.wlCosmetics.length;a++)try{var s=e.wlCosmetics[a];if(("~"===s.domain[0]&&o.match(s.domain.substr(1))||o.match(s.domain))&&s.selectors.some(t.matches.bind(t)))return!0}catch(t){}return!1}_convertWildcard(t){if(/^\/.*?\/$/.test(t)&&/[[\\(){}]/.test(t))return new RegExp(t.replace(/^\/|\/$/g,""),"i");var e=t.replace(/[.?+\\[{()]/g,t=>"\\"+t).replace(/\^/g,"[\\w\\d_.%-]").replace(/\*/g,".*").replace(/\|\|/g,"^\\w+://([\\d\\w-]+\\.)*").replace(/\|/g,"$");return new RegExp(e,"i")}_getParsingRegex(){if(this.regex)return this.regex;return this.regex=new RegExp("^\\s*(@@)?(/(?:[^/]|\\\\/)+/|(?:[^#$]+|#(?!#))+)?(?:(#@#|##)([^$]+))?(?:\\$(.*))?\\s*$","i"),this.regex}_parseFilters(t){var e=t;"string"==typeof t&&(e=t.split(/[\r\n]+/));for(var r={blUrls:[],wlUrls:[],blCosmetics:[],wlCosmetics:[]},n={"":{bl:[],wl:[]}},i=0;i<e.length;i++){var o=e[i];if(!/^\s*!|^\s*\[.*?\]\s*$/.test(o)){var a=void 0;try{if(!(a=this._getParsingRegex().exec(o)))throw new Error}catch(t){console.warn("AdFilter: could not parse adblock rule: "+o);continue}var s={whitelist:a[1],url:a[2],separator:a[3],selector:a[4],comment:a[5]};if(s.separator)for(var u=s.url?s.url.split(/,/):[""],c=void 0,l=0;l<u.length;l++)(c=u[l])in n||(n[c]={bl:[],wl:[]}),c=n[c],"#@#"===s.separator?(s.whitelist||n[""].wl.push(s.selector),c[s.whitelist?"bl":"wl"].push(s.selector)):c[s.whitelist?"wl":"bl"].push(s.selector);else{if(!s.url)continue;var h="@@"===s.whitelist?r.wlUrls:r.blUrls;try{var d=this._convertWildcard(s.url);h.push(d)}catch(t){}}}}for(var f=Object.keys(n),p=0;p<f.length;p++){var m=f[p],v=n[m];if(v.bl.length)try{r.blCosmetics.push({domain:this._convertWildcard(m),selectors:n[m].bl})}catch(t){}if(v.wl.length)try{r.wlCosmetics.push({domain:this._convertWildcard(m),selectors:n[m].wl})}catch(t){}}return r}}}).call(this,r(9))},15:function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!l){var t=s(d);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},17:function(t,e,r){"use strict";function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),s=new S(n||[]);return i(a,"_invoke",{value:E(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function p(){}function m(){}var v={};c(v,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(A([])));y&&y!==e&&r.call(y,a)&&(v=y);var b=m.prototype=f.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var n;i(this,"_invoke",{value:function(i,o){function a(){return new e((function(n,a){!function n(i,o,a,s){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}})}function E(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return k()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=T(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function T(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function A(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,i(b,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,c(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),c(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new w(l(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(b),c(b,u,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}r.d(e,"a",(function(){return o}));var i=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))};function o(t){return i(this,void 0,void 0,n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,chrome.runtime.sendMessage(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Caught",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))}},18:function(t,e,r){"use strict";var n={};function i(t,e,r){r||(r=Error);var i=function(t){var r,n;function i(r,n,i){return t.call(this,function(t,r,n){return"string"==typeof e?e:e(t,r,n)}(r,n,i))||this}return n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=t,n[t]=i}function o(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}i("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(t,e,r){var n,i,a,s;if("string"==typeof e&&(i="not ",e.substr(!a||a<0?0:+a,i.length)===i)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}(t," argument"))s="The ".concat(t," ").concat(n," ").concat(o(e,"type"));else{var u=function(t,e,r){return"number"!=typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(u," ").concat(n," ").concat(o(e,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},19:function(t,e,r){"use strict";(function(e){var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=c;var i=r(36),o=r(40);r(13)(c,i);for(var a=n(o.prototype),s=0;s<a.length;s++){var u=a[s];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(t){if(!(this instanceof c))return new c(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||e.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,r(15))},2:function(t,e,r){"use strict";var n=r(7),i=r(1);var o=new class{constructor(){this._storage=chrome.storage.local,this._handlerMap=new Map,this._options={},this._default={skipping_ads_enable:!0,detach_enabled:!0,on_page_buttons:!0,min_stream_size:30720,prefer_last_quality:!0,last_quality:void 0,hide_play_now_tooltip:!1,hide_play_now_tooltip_bottom:!1,instant_actions_tooltip_shown:!1,instant_actions_tooltip_shown_count:0,instant_actions_button_download:!1,preferred_quality_level:n.b.DEFAULT_QUALITY_LEVEL,show_3gp_ext:!1,video_changed:!1,ADLIST_CUSTOM_RULE:{},[i.s]:[]},this.loaded=!1;var t=this;chrome.storage.onChanged.addListener((e,r)=>{var n;if("local"===r){for(var i in e)t._options[i]=e[i].newValue;for(var o in e)null===(n=this._handlerMap.get(o))||void 0===n||n.forEach(t=>t())}})}load(){var t=this;return new Promise(e=>{t._storage.get(null,r=>{t._options=r,t.loaded=!0,e(r)})})}set(t,e){var r={};r[t]=e,this._storage.set(r),this.loaded&&("string"==typeof t||"number"==typeof t&&void 0!==e)&&(this._options[t]=e)}get(t){return this.loaded&&t in this._options?this._options[t]:this._default[t]}has(t){return void 0!==this._options[t]}remove(t){delete this._options[t],this._storage.remove([t],()=>{var t=chrome.runtime.lastError;t&&console.warn("Caught",t)})}addOptionChangedListener(t,e){var r,n=null!==(r=this._handlerMap.get(t))&&void 0!==r?r:[];n.push(e),this._handlerMap.set(t,n)}};e.a=o},21:function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(54),i=r(55),o=r(50);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,r)}function c(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=d(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,r),i=(t=s(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|f(e.length);return 0===(t=s(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=s(t,e<0?0:0|f(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function d(t,e){var r=e.length<0?0:0|f(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(t).length;default:if(n)return B(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return A(this,e,r);case"latin1":case"binary":return k(this,e,r);case"base64":return x(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=r;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var h=!0,d=0;d<u;d++)if(c(t,o+d)!==c(e,d)){h=!1;break}if(h)return o}return-1}function b(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function _(t,e,r,n){return $(B(e,t.length-r),t,r,n)}function w(t,e,r,n){return $(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function E(t,e,r,n){return w(t,e,r,n)}function T(t,e,r,n){return $(Y(e),t,r,n)}function O(t,e,r,n){return $(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function x(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function S(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=r)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return c(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return l(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):m.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(n,i),l=t.slice(e,r),h=0;h<s;++h)if(c[h]!==l[h]){o=c[h],a=l[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return E(this,t,e,r);case"base64":return T(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function L(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=q(t[o]);return i}function R(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function P(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function N(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function C(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(t,e,r,n,o){return o||C(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function U(t,e,r,n,o){return o||C(t,0,r,8),i.write(t,e,r,n,52,8),r+8}u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||I(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||D(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||D(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);D(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);D(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return j(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return j(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return U(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return U(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=u.isBuffer(t)?t:B(new u(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function q(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Y(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(9))},22:function(t,e,r){t.exports=function(){"use strict";
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var t=Object.prototype.toString,e=Array.isArray||function(e){return"[object Array]"===t.call(e)};function r(t){return"function"==typeof t}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(t,e){return null!=t&&"object"==typeof t&&e in t}var o=RegExp.prototype.test,a=/\S/;function s(t){return!function(t,e){return o.call(t,e)}(a,t)}var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},c=/\s*/,l=/\s+/,h=/\s*=/,d=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function p(t){this.string=t,this.tail=t,this.pos=0}function m(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function v(){this.cache={}}p.prototype.eos=function(){return""===this.tail},p.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var r=e[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},p.prototype.scanUntil=function(t){var e,r=this.tail.search(t);switch(r){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=e.length,e},m.prototype.push=function(t){return new m(t,this)},m.prototype.lookup=function(t){var e,n,o,a=this.cache;if(a.hasOwnProperty(t))e=a[t];else{for(var s,u,c,l=this,h=!1;l;){if(t.indexOf(".")>0)for(s=l.view,u=t.split("."),c=0;null!=s&&c<u.length;)c===u.length-1&&(h=i(s,u[c])||(n=s,o=u[c],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(o))),s=s[u[c++]];else s=l.view[t],h=i(l.view,t);if(h){e=s;break}l=l.parent}a[t]=e}return r(e)&&(e=e.call(this.view)),e},v.prototype.clearCache=function(){this.cache={}},v.prototype.parse=function(t,r){var i=this.cache,o=t+":"+(r||g.tags).join(":"),a=i[o];return null==a&&(a=i[o]=function(t,r){if(!t)return[];var i,o,a,u=!1,m=[],v=[],y=[],b=!1,_=!1,w="",E=0;function T(){if(b&&!_)for(;y.length;)delete v[y.pop()];else y=[];b=!1,_=!1}function O(t){if("string"==typeof t&&(t=t.split(l,2)),!e(t)||2!==t.length)throw new Error("Invalid tags: "+t);i=new RegExp(n(t[0])+"\\s*"),o=new RegExp("\\s*"+n(t[1])),a=new RegExp("\\s*"+n("}"+t[1]))}O(r||g.tags);for(var x,S,A,k,L,R,I=new p(t);!I.eos();){if(x=I.pos,A=I.scanUntil(i))for(var D=0,P=A.length;D<P;++D)s(k=A.charAt(D))?(y.push(v.length),w+=k):(_=!0,u=!0,w+=" "),v.push(["text",k,x,x+1]),x+=1,"\n"===k&&(T(),w="",E=0,u=!1);if(!I.scan(i))break;if(b=!0,S=I.scan(f)||"name",I.scan(c),"="===S?(A=I.scanUntil(h),I.scan(h),I.scanUntil(o)):"{"===S?(A=I.scanUntil(a),I.scan(d),I.scanUntil(o),S="&"):A=I.scanUntil(o),!I.scan(o))throw new Error("Unclosed tag at "+I.pos);if(L=">"==S?[S,A,x,I.pos,w,E,u]:[S,A,x,I.pos],E++,v.push(L),"#"===S||"^"===S)m.push(L);else if("/"===S){if(!(R=m.pop()))throw new Error('Unopened section "'+A+'" at '+x);if(R[1]!==A)throw new Error('Unclosed section "'+R[1]+'" at '+x)}else"name"===S||"{"===S||"&"===S?_=!0:"="===S&&O(A)}if(T(),R=m.pop())throw new Error('Unclosed section "'+R[1]+'" at '+I.pos);return function(t){for(var e,r=[],n=r,i=[],o=0,a=t.length;o<a;++o)switch((e=t[o])[0]){case"#":case"^":n.push(e),i.push(e),n=e[4]=[];break;case"/":i.pop()[5]=e[2],n=i.length>0?i[i.length-1][4]:r;break;default:n.push(e)}return r}(function(t){for(var e,r,n=[],i=0,o=t.length;i<o;++i)(e=t[i])&&("text"===e[0]&&r&&"text"===r[0]?(r[1]+=e[1],r[3]=e[3]):(n.push(e),r=e));return n}(v))}(t,r)),a},v.prototype.render=function(t,e,r,n){var i=this.parse(t,n),o=e instanceof m?e:new m(e,void 0);return this.renderTokens(i,o,r,t,n)},v.prototype.renderTokens=function(t,e,r,n,i){for(var o,a,s,u="",c=0,l=t.length;c<l;++c)s=void 0,"#"===(a=(o=t[c])[0])?s=this.renderSection(o,e,r,n):"^"===a?s=this.renderInverted(o,e,r,n):">"===a?s=this.renderPartial(o,e,r,i):"&"===a?s=this.unescapedValue(o,e):"name"===a?s=this.escapedValue(o,e):"text"===a&&(s=this.rawValue(o)),void 0!==s&&(u+=s);return u},v.prototype.renderSection=function(t,n,i,o){var a=this,s="",u=n.lookup(t[1]);if(u){if(e(u))for(var c=0,l=u.length;c<l;++c)s+=this.renderTokens(t[4],n.push(u[c]),i,o);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)s+=this.renderTokens(t[4],n.push(u),i,o);else if(r(u)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(n.view,o.slice(t[3],t[5]),(function(t){return a.render(t,n,i)})))&&(s+=u)}else s+=this.renderTokens(t[4],n,i,o);return s}},v.prototype.renderInverted=function(t,r,n,i){var o=r.lookup(t[1]);if(!o||e(o)&&0===o.length)return this.renderTokens(t[4],r,n,i)},v.prototype.indentPartial=function(t,e,r){for(var n=e.replace(/[^ \t]/g,""),i=t.split("\n"),o=0;o<i.length;o++)i[o].length&&(o>0||!r)&&(i[o]=n+i[o]);return i.join("\n")},v.prototype.renderPartial=function(t,e,n,i){if(n){var o=r(n)?n(t[1]):n[t[1]];if(null!=o){var a=t[6],s=t[5],u=t[4],c=o;return 0==s&&u&&(c=this.indentPartial(o,u,a)),this.renderTokens(this.parse(c,i),e,n,c)}}},v.prototype.unescapedValue=function(t,e){var r=e.lookup(t[1]);if(null!=r)return r},v.prototype.escapedValue=function(t,e){var r=e.lookup(t[1]);if(null!=r)return g.escape(r)},v.prototype.rawValue=function(t){return t[1]};var g={name:"mustache.js",version:"3.2.1",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,to_html:void 0,Scanner:void 0,Context:void 0,Writer:void 0},y=new v;return g.clearCache=function(){return y.clearCache()},g.parse=function(t,e){return y.parse(t,e)},g.render=function(t,r,n,i){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(e(o=t)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)');var o;return y.render(t,r,n,i)},g.to_html=function(t,e,n,i){var o=g.render(t,e,n);if(!r(i))return o;i(o)},g.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return u[t]}))},g.Scanner=p,g.Context=m,g.Writer=v,g}()},26:function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,r,n,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new a(r,n||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},c.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},c.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},c.prototype.emit=function(t,e,r,n,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,n),!0;case 5:return l.fn.call(l.context,e,r,n,o),!0;case 6:return l.fn.call(l.context,e,r,n,o,a),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,r);break;case 4:l[c].fn.call(l[c].context,e,r,n);break;default:if(!u)for(d=1,u=new Array(h-1);d<h;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},c.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},c.prototype.removeListener=function(t,e,r,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||n&&!a.once||r&&a.context!==r||u(this,o);else{for(var s=0,c=[],l=a.length;s<l;s++)(a[s].fn!==e||n&&!a[s].once||r&&a[s].context!==r)&&c.push(a[s]);c.length?this._events[o]=1===c.length?c[0]:c:u(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c},28:function(t,e,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(21),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},29:function(t,e,r){"use strict";var n=r(18).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,r,o){if("function"==typeof r)return t(e,null,r);r||(r={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&e.readable,s=r.writable||!1!==r.writable&&e.writable,u=function(){e.writable||l()},c=e._writableState&&e._writableState.finished,l=function(){s=!1,c=!0,a||o.call(e)},h=e._readableState&&e._readableState.endEmitted,d=function(){a=!1,h=!0,s||o.call(e)},f=function(t){o.call(e,t)},p=function(){var t;return a&&!h?(e._readableState&&e._readableState.ended||(t=new n),o.call(e,t)):s&&!c?(e._writableState&&e._writableState.ended||(t=new n),o.call(e,t)):void 0},m=function(){e.req.on("finish",l)};return!function(t){return t.setHeader&&"function"==typeof t.abort}(e)?s&&!e._writableState&&(e.on("end",u),e.on("close",u)):(e.on("complete",l),e.on("abort",p),e.req?m():e.on("request",m)),e.on("end",d),e.on("finish",l),!1!==r.error&&e.on("error",f),e.on("close",p),function(){e.removeListener("complete",l),e.removeListener("abort",p),e.removeListener("request",m),e.req&&e.req.removeListener("finish",l),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("end",d),e.removeListener("error",f),e.removeListener("close",p)}}},3:function(t,e,r){"use strict";r.d(e,"d",(function(){return u})),r.d(e,"f",(function(){return c})),r.d(e,"e",(function(){return l})),r.d(e,"b",(function(){return h})),r.d(e,"g",(function(){return d})),r.d(e,"c",(function(){return f})),r.d(e,"a",(function(){return p}));var n=r(1),i=r(0),o=/([^/]+)$/i,a=/\.([^/.]*)$/i;function s(t){return t&&0!==t.indexOf("data:image")?/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/\.?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t):[]}function u(t){var e="",r="";try{var n=t.split("/");e=n[0];var i=n[1].split(";")[0];switch(r=i,i){case"webm":r="video"==e?"webm":"weba";break;case"3gpp":r="3gp";break;case"3gpp2":r="3g2";break;case"ogg":r="video"==e?"ogv":"oga";break;case"mpeg":r="video"==e?"mpeg":"mp3";break;case"x-midi":r="midi";break;case"x-msvideo":r="avi";break;case"mp2t":r="ts"}return{type:e,ext:r}}catch(t){return{type:e,ext:r}}}function c(t,e){var r="object"==typeof t?t.videoUrl:t,n=new URL(r,r.startsWith("http")?void 0:location.origin),s=(n.pathname.match(o)||[])[1]||"",c=s.split(".").map(t=>t.toLowerCase());s=decodeURIComponent(s.replace(a,"")),c.shift(),0===c.length&&Object(i.isSpecialUrls)(t)&&(c=["m3u8"]);var l=c[c.length-1]||"",h=null;if(n.href.startsWith("data:")){var d=u(n.href.match(/data:([a-z]+\/[a-z0-9]+);/i)[1]);l=d.ext,h=d.type}var f={url:"object"==typeof t?t:n.href,protocol:n.protocol,host:n.host,port:n.port,pathname:n.pathname,filename:s,ext:l,exts:c,hash:n.hash,search:n.search,type:h};if(f.port||delete f.port,e){var p={};n.search.replace(/^\?/,"").split(/&/).forEach(t=>{var e=t.split("=");p[e[0]]=e[1]}),f.query=p}return"flac"==l&&(f.quality="Lossless",f.resolution="lossless"),f}function l(t){var e,r="object"==typeof t?t.videoUrl:t;if(r.startsWith("data:")){var i=r.match(/data:([a-z]+)/)[1];return["audio","video"].includes(i)?i:""}var o=(null===(e=s(r))||void 0===e?void 0:e[11])||"";if(!o)return"";var a=new Map,u=["no_watermark_video"];Object.keys(n.o).forEach(t=>{if(!u.includes(t))for(var e=n.o[t].extensions,r=0;r<e.length;r++)a.set(e[r],t)}),r.includes("googlevideo.com/videoplayback")&&"videoplayback"===o&&r.includes("mp4")&&(o="video.mp4"),r.includes("videoplayback")&&"videoplayback"===o&&r.includes("mp4")&&(o="video.mp4");var c=o.split("."),l=c.length-1;if(l<=0)return"";var h=c[l].toLowerCase();return a.get(h)}function h(t){if((t=Object.create(t)).query){for(var e in t.search=[],t.query)void 0!==t.query[e]?t.search.push(e+"="+encodeURIComponent(t.query[e])):t.search.push(e);t.search="?"+t.search.join("&"),delete t.query}return t.href}function d(t){var e=(t=t.replace(/^[#?]{1}/,"")).split("&"),r={};return e.forEach(t=>{var e=t.split("=");Object(i.defined)(e[0])&&Object(i.defined)(e[1])&&(r[e[0]]=decodeURIComponent(e[1].replace(/\+/g," ")))}),r}var f=(()=>{for(var t=["facebook.com","youtube.com","video.vnexpress.net","mp3.zing.vn","radio.zing.vn","tv.zing.vn","nhaccuatui.com","video.thethao247.vn","video.ngoisao.net","xvideos.com","phimmoi.net","clip.vn","yan.vn","xem.vn","pornhub.com","xhamster.com","dailymotion.com","xnxx.com","hdonline.vn","phim3s.net","redtube.com","phim14.net","soundcloud.com","youporn.com","vimeo.com","fptplay.net","haivn.com","chiasenhac.com","movies.hdviet.com","nhac.vui.vn","nhacso.net","anime47.com","tube8.com","talktv.vn","chatvl.info","cohet.tv","vlxx.tv","hayhaytv.vn","xemphimso.com","vivo.vn","xemvtv.net","vkool.net","chimsedinang.com","keeng.vn","vuighe.net","vetv.vn","xemphimon.com","ixxx.com","biphim.com","kenhvideo.com","videogame.vn","phim.in","voh.com.vn","phimsexporn.com","porn99.net","news.zing.vn","me.zing.vn","twitter.com","24h.com.vn","phim.clip.vn","video.ringring.vn","v.nhaccuatui.com","clip.vietnamnet.vn","afamily.vn","media.bongdaplus.vn","bongdaclip.com","gamek.vn","phapluattp.vn","hdviet.com","haiivl.com","chatvl.com","2sao.vn","videos.vietgiaitri.com","nhac.vietgiaitri.com","megafun.vn","phim.hayhd.vn","cand.com.vn","ohay.tv","phim.megabox.vn","anhtrang.org","phim.anhtrang.org","8bongda.com","xemphimone.com","bongda365.com.vn","phimhd.vn","dinotube.com","phimvipvn.net","animeax.com","phimdata.com","phimnhanh.net","vipphim.net","phimvon.com","pubvn.tv","phim22.com","phim7.com","hayxemphim.com","m-viet.com","thethaoclip.com","nhac.hay365.com","ssphim.com","phimtructuyenhd.com","xuongphim.tv","vino.vn/mp3","haivl.io","nhacvang.org","starmovies.mobi","clipvuivn.com","phimporn.com","123tv.vn","phimonlinehd.net","hai24h.net","jax.vn","kenhgioitre.net","chiaseclip.net","phim.xixam.com","bilutv.com","phimbathu.com","instagram.com","banhtv.com","txxx.com","video.vietnamnet.vn","video.bongdaplus.vn","creatives.livejasmin.com","tv.naver.com","tv.tuoitre.vn","icdrama.se","video.thanhnien.vn","spankbang.com","dmm.co.jp","v.youku.com","v.qq.com","daikynguyenvn.com","thethao247.vn","e.vnexpress.net","ione.vnexpress.net","kenh14.vn","dantri.com.vn","baomoi.com","emdep.vn","tuoitre.vn","soha.vn","video.congan.com.vn","cafef.vn","bongda.com.vn","bongdaso.com","eva.vn","danviet.vn","cliptv.vn","bbc.co.uk","edition.cnn.com","buzzfeed.com","businessinsider.com","cnet.com","dailymail.co.uk","bilutvx.net","chill123.gotdns.ch"],e={},r=0,n=t.length;r<n;++r){var i=t[r];console.assert(!(i in e),'Duplicate "'+i+'": '+e[i]+", "+r),e[i]=r+1}return function(t){for(var r=function(t){var e;return(null===(e=s(t))||void 0===e?void 0:e[6])||""}(t),n=e[r];!n&&r;){var i=r.indexOf(".")+1;if(0===i)break;r=r.substr(i),n=e[r]}return 100+(0|n)}})();function p(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t||new URL(e);if(e.includes("https")||e.includes("//"))return e.includes("http")||(e="https:"+e),e;if(r&&e.startsWith("/"))return n.origin?n.origin+e:e;var i=(n.host+n.pathname).split("/").filter(t=>!!t).slice(0,-1),o=e.split("/").filter(t=>!!t),a=o.lastIndexOf(".."),s=o.slice(0,a+1),u=o.slice(a+1);s.length>0&&(i=i.slice(0,-s.length));var c=i.indexOf(u[0]);if(-1==c)i.push(...u);else{c+=1;for(var l=1;l<u.length;++l){var h=u[l];i.includes(h)||(i[c-1]===u[l-1]?i[c]=h:i.push(h)),c+=1}}return n.protocol+"//"+i.join("/")}},30:function(t,e,r){"use strict";var n=r(1),i=r(4),o=r(2),a=r(42),s=r.n(a);function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l=20,h=new Date;if(h.getMonth()>=8){l=5;var d=h.getDate();d>=8&&(l=2),d>=11&&(l=1)}class f{constructor(){this.tests={ytdlservice:{groups:["A"],buckets:l},youtubeMobileonboarding:{groups:["A",null,null,null,null,null,null,null,null,null,"B",null,null,null,null,null,null,null,null,null],buckets:20},coccocMobileMovieonboarding:{groups:["A",null,null,null,null,null,null,null,null,null,"B",null,null,null,null,null,null,null,null,null],buckets:20},setCCAsDefaultonboarding:{groups:["A",...Array(49).fill(null),"B",...Array(49).fill(null),"C",...Array(49).fill(null),"D",...Array(49).fill(null)],buckets:200},coccocFootballonboarding:{groups:["A"],buckets:1},coccocAnimeonboarding:{groups:["A"],buckets:1},coccocMangaonboarding:{groups:["A"],buckets:1}},this.loadTestsFromServer(),this.cookies={},this.forced={}}loadTestsFromServer(){var t=o.a.get(n.r)||{};o.a.get(n.b);t.ab_test_data&&Object.entries(t.ab_test_data).forEach(t=>{var e=u(t,2),r=e[0],n=e[1];n.groups&&n.buckets&&(this.tests[r]=n)})}processRequest(t){var e=t.testName;return e?this.getCookies().then(this.getTest.bind(this,e)):Promise.reject("No test name")}getCookies(){return new Promise((t,e)=>{chrome.cookies.getAll({url:"https://coccoc.com"},r=>{var n=r.find(t=>"uid"===t.name),i=r.find(t=>"forceAB"===t.name),o=r.find(t=>"idCookie"===t.name);if(n&&n.value){if(this.cookies={uid:n.value,idCookie:null==o?void 0:o.value},i&&i.value){this.cookies.forceAB=i.value;try{var a=decodeURIComponent(this.cookies.forceAB);this.forced=f.parseForcedTests(a)}catch(t){console.warn("Cannot parse forced tests")}}t()}else e("No uid cookie")})})}getTest(t){var e=this.forced[t];if(void 0!==e){var r=this.tests[t]?this.tests[t].groups[e]:null;return Promise.resolve({group:e,groupName:r})}var n=this.tests[t];if(!n||n.time&&n.time.end&&(Date.parse(n.time.end)<Date.now()||n.time&&n.time.start&&Date.parse(n.time.start)>Date.now()))return Promise.resolve({group:null});var i=f.generateGroup(n.groups,n.buckets,this.cookies.uid,t);if(!i)return Promise.resolve({group:null});var o=n.groups.indexOf(i);return Promise.resolve({group:o,groupName:i})}static generateGroup(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=t[parseInt((new s.a).update(r+String(n)).digest("hex").slice(-12),16)%e]||null;if("setCCAsDefaultonboarding"===n&&o){i.a.log("Onboarding.setCCAsDefault.Variant",{A:1,B:2,C:3,D:4}[o])}return o}static parseForcedTests(t){return(t||"").split(",").filter(Boolean).reduce((function(t,e){var r=e.split(":");return t[r[0]]=Number(r[1]),t}),{})}checkIsNewUser(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=decodeURIComponent(this.cookies.idCookie||"");return e.match(/\d+:\d+:\w+$/)?(Date.now()-Number(new Date(1e3*Number(e.split(":")[1])*86400)))/1e3/86400<t:null}}e.a=new f},32:function(t,e,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}g(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&g(t,"error",e,r)}(t,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var i,o,a,s;if(c(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),void 0===a)a=o[e]=r,++t._eventsCount;else if("function"==typeof a?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i}function p(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):v(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function v(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function g(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,l=v(u,c);for(r=0;r<c;++r)o(l[r],this,e)}return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,n,i,o,a;if(c(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},s.prototype.listeners=function(t){return p(this,t,!0)},s.prototype.rawListeners=function(t){return p(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},33:function(t,e,r){"use strict";var n=r(28).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function l(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=a(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=a(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=a(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},36:function(t,e,r){"use strict";(function(e,n){var i;t.exports=x,x.ReadableState=O;r(32).EventEmitter;var o=function(t,e){return t.listeners(e).length},a=r(37),s=r(21).Buffer,u=e.Uint8Array||function(){};var c,l=r(57);c=l&&l.debuglog?l.debuglog("stream"):function(){};var h,d,f,p=r(58),m=r(38),v=r(39).getHighWaterMark,g=r(18).codes,y=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,_=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(13)(x,a);var E=m.errorOrDestroy,T=["error","close","destroy","pause","resume"];function O(t,e,n){i=i||r(19),t=t||{},"boolean"!=typeof n&&(n=e instanceof i),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=v(this,t,"readableHighWaterMark",n),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=r(33).StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function x(t){if(i=i||r(19),!(this instanceof x))return new x(t);var e=this instanceof i;this._readableState=new O(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function S(t,e,r,n,i){c("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(c("onEofChunk"),e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?L(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,R(t)))}(t,a);else if(i||(o=function(t,e){var r;n=e,s.isBuffer(n)||n instanceof u||"string"==typeof e||void 0===e||t.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],e));var n;return r}(a,e)),o)E(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),n)a.endEmitted?E(t,new w):A(t,a,e,!0);else if(a.ended)E(t,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?A(t,a,e,!1):I(t,a)):A(t,a,e,!1)}else n||(a.reading=!1,I(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function A(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&L(t)),I(t,e)}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),x.prototype.destroy=m.destroy,x.prototype._undestroy=m.undestroy,x.prototype._destroy=function(t,e){e(t)},x.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=s.from(t,e),e=""),r=!0),S(this,t,e,!1,r)},x.prototype.unshift=function(t){return S(this,t,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(t){h||(h=r(33).StringDecoder);var e=new h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};function k(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function L(t){var e=t._readableState;c("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(c("emitReadable",e.flowing),e.emittedReadable=!0,n.nextTick(R,t))}function R(t){var e=t._readableState;c("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,j(t)}function I(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(D,t,e))}function D(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var r=e.length;if(c("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function P(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function N(t){c("readable nexttick read 0"),t.read(0)}function C(t,e){c("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),j(t),e.flowing&&!e.reading&&t.read(0)}function j(t){var e=t._readableState;for(c("flow",e.flowing);e.flowing&&null!==t.read(););}function U(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function M(t){var e=t._readableState;c("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,n.nextTick(q,e,t))}function q(t,e){if(c("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function B(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}x.prototype.read=function(t){c("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return c("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?M(this):L(this),null;if(0===(t=k(t,e))&&e.ended)return 0===e.length&&M(this),null;var n,i=e.needReadable;return c("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&c("length less than watermark",i=!0),e.ended||e.reading?c("reading or ended",i=!1):i&&(c("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=k(r,e))),null===(n=t>0?U(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&M(this)),null!==n&&this.emit("data",n),n},x.prototype._read=function(t){E(this,new _("_read()"))},x.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,e);var a=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?u:v;function s(e,n){c("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),t.removeListener("close",p),t.removeListener("finish",m),t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",s),r.removeListener("end",u),r.removeListener("end",v),r.removeListener("data",d),h=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}function u(){c("onend"),t.end()}i.endEmitted?n.nextTick(a):r.once("end",a),t.on("unpipe",s);var l=function(t){return function(){var e=t._readableState;c("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,j(t))}}(r);t.on("drain",l);var h=!1;function d(e){c("ondata");var n=t.write(e);c("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==B(i.pipes,t))&&!h&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function f(e){c("onerror",e),v(),t.removeListener("error",f),0===o(t,"error")&&E(t,e)}function p(){t.removeListener("finish",m),v()}function m(){c("onfinish"),t.removeListener("close",p),v()}function v(){c("unpipe"),r.unpipe(t)}return r.on("data",d),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",f),t.once("close",p),t.once("finish",m),t.emit("pipe",r),i.flowing||(c("pipe resume"),r.resume()),t},x.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=B(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},x.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?L(this):i.reading||n.nextTick(N,this))),r},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(t,e){var r=a.prototype.removeListener.call(this,t,e);return"readable"===t&&n.nextTick(P,this),r},x.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||n.nextTick(P,this),e},x.prototype.resume=function(){var t=this._readableState;return t.flowing||(c("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(C,t,e))}(this,t)),t.paused=!1,this},x.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},x.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<T.length;o++)t.on(T[o],this.emit.bind(this,T[o]));return this._read=function(e){c("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=r(60)),d(this)}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),x._fromList=U,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(x.from=function(t,e){return void 0===f&&(f=r(61)),f(x,t,e)})}).call(this,r(9),r(15))},37:function(t,e,r){t.exports=r(32).EventEmitter},38:function(t,e,r){"use strict";(function(e){function r(t,e){i(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(n,a):(a._writableState.errorEmitted=!0,e.nextTick(r,a,t)):e.nextTick(r,a,t):o?(e.nextTick(n,a),o(t)):e.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,r(15))},39:function(t,e,r){"use strict";var n=r(18).codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,r,i){var o=function(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}(e,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},4:function(t,e,r){"use strict";var n=r(6),i=r(17);class o{constructor(){this.SOURCE_POPUP_PAGE=0,this.SOURCE_OPTIONS_PAGE=10,this.SOURCE_CONTENT_SCRIPT=20,this.SOURCE_BACKGROUND_PAGE=30,this.LEGACY_METRICS_NAME_MAP={ButtonClicked:"TryItNowButtonClicked",CheckBoxClicked:"OneClickCheckbox"},this.PAGE_WELCOME_SCREEN=0,this.PAGE_DOWNLOADS_LIST=1,this.PAGE_ONE_CLICK_DOWNLOAD=2,this.PAGE_NO_MEDIA_FOUND=3,this.PAGE_OPTIONS=4,this.PAGE_CONTENT_SHOW_CONTROLS=5,this.PAGE_CONTENT_NO_MEDIA=9,this.YOUTUBE_ADS_BLOCK_ERROR=0,this.YOUTUBE_ADS_BLOCK_ERROR_POPUP=1,this.YOUTUBE_ADS_BLOCK_ERROR_BY_SAVIOR=2,this.YOUTUBE_ADS_BLOCK_ERROR_POPUP_BY_SAVIOR=3,this.YOUTUBE_SKIP_ADS_SHOWN=1,this.YOUTUBE_SKIP_ADS_FAST_FWD=2,this.YOUTUBE_SKIP_ADS_SEE=3,this.DOWNLOAD_AUTO=0,this.DOWNLOAD_BUTTON=1,this.DOWNLOAD_ALL=2,this.DOWNLOAD_REQUEST_SIZE=3,this.DOWNLOAD_REQUEST_SIZE_FAILED=4,this.DOWNLOAD_SOUND_ONLY=5,this.DOWNLOAD_YOUTUBE_ERROR=6,this.DOWNLOAD_CANCELED=7,this.DOWNLOAD_SUBTITLES=9,this.BUTTON_MAIN=0,this.BUTTON_TRY_IT_NOW=1,this.BUTTON_SHOW_DOWNLOADS=2,this.BUTTON_OPEN_SETTINGS=3,this.BUTTON_DOWNLOAD_ALL=4,this.BUTTON_MORE_OPTIONS=5,this.BUTTON_HIDE_PERMANENT=6,this.BUTTON_FAKE_QUALITY=7,this.BUTTON_DETACH=8,this.BUTTON_HIDE=9,this.CHECK_BOX_ENABLE_ONE_CLICK=0,this.CHECK_BOX_SHOW_ON_PAGE_BUTTONS=2,this.CHECK_BOX_PREFER_LAST_QUALITY=4,this.CHECK_BOX_DETACH_ENABLED=6,this.CHECK_BOX_DARK_THEM_ENABLED=8,this.PIP_DETACH_CLICK=0,this.PIP_RESTORE_CLICK=1,this.PIP_SITE_LINK_CLICK=2,this.PLAY_NOW_SHOWN=0,this.PLAY_NOW_WIDGET_CLICKED=1,this.PLAY_NOW_TOOLTIP_SHOWN=2,this.PLAY_NOW_TOOLTIP_CLOSED=3,this.PLAY_NOW_TOOLTIP_NOT_SHOW_AGAIN=4,this.PLAY_NOW_TOOLTIP_BOTTOM_SHOWN=5,this.PLAY_NOW_TOOLTIP_BOTTOM_CLOSED=6,this.PLAY_NOW_TOOLTIP_BOTTOM_NOT_SHOW_AGAIN=7,this.EXTENSION_MP4=1,this.EXTENSION_MP3=2,this.EXTENSION_WEBM=3,this.EXTENSION_3GP=4,this.EXTENSION_SRT=5,this.EXTENSION_OTHER=6,this.SEND_MOBILE_SHOW=1,this.SEND_MOBILE_CLICK=2,this.SEND_MOBILE_CLICK_CLOSE=3,this.SEND_MOBILE_CLICK_A=4,this.SEND_MOBILE_CLICK_G=5,this.SEND_MOBILE_CLICK_W=6,this.SEND_MOBILE_CLICK_AUDIO=7,this.SEND_MOBILE_ERROR=9,this.TURN_LIGHT_ON=0,this.TURN_LIGHT_OFF=1,this.ONBOARD_POPUP_SHOWN=1,this.ONBOARD_POPUP_SHOWN_SECOND=1,this.ONBOARD_POPUP_SHOWN_THIRD=1,this.ONBOARD_TRY_NOW_BTN_CLICK=1,this.CLOSE_ONBOARD_POPUP=1,this.OPEN_SETTING_POPUP=1,this.OPEN_SETTING_CONTENT=2}get source(){if(!chrome.action&&!chrome.pageAction)return this.SOURCE_CONTENT_SCRIPT;switch(location.pathname){case"/popup.html":return this.SOURCE_POPUP_PAGE;case"/options.html":return this.SOURCE_OPTIONS_PAGE;case"/background.js":case"/background.html":return this.SOURCE_BACKGROUND_PAGE;default:return null}}_getFullName(t){return"Savior."+(this.LEGACY_METRICS_NAME_MAP[t]||t)}_getTotalValue(t,e,r){return 0===t.indexOf("Refr")||r||["PageShown","YTBlockType","YTSkipAdShown","ForceDisableAdblockOnYoutube"].includes(t)||(null==t?void 0:t.startsWith("Onboarding."))||"number"!=typeof e?e:e+this.source}_doLog(t,e,r){var n,o=this._getFullName(e);if(!(parseInt((null===(n=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./))||void 0===n?void 0:n[2])||"")<=50))if(this.source===this.SOURCE_CONTENT_SCRIPT)Object(i.a)({type:"metrics",method:"log",params:{name:e,value:r}});else if(chrome.metricsPrivate)switch(t){case"recordSmallCount":chrome.metricsPrivate.recordValue({metricName:o,type:chrome.metricsPrivate.MetricTypeType.HISTOGRAM_LINEAR,min:0,max:100,buckets:100},r);break;case"recordValue":chrome.metricsPrivate.recordValue({metricName:o,type:chrome.metricsPrivate.MetricTypeType.HISTOGRAM_LINEAR,min:0,max:1e3,buckets:1002},r);break;case"recordCustomData":chrome.metricsPrivate.recordCustomData(r)}else if("recordCustomData"===t){if(r&&1===r.length)return void console.info("%c[Metrics] %crecordCustomData %c%s","color:gray","color:silver","color: lightgreen",r[0].key,JSON.parse(r[0].value));console.info("%c[Metrics]","color:gray","recordCustomData",r)}else console.info("%c[Metrics]","color:gray",t,o,r)}static _getMethodByName(t){switch(t){case"Refr":case"RefrSE":case"RefrFE":case"RefrPin":return"recordValue";case"recordCustomData":return"recordCustomData";default:return"recordSmallCount"}}log(t,e,r){try{var i=o._getMethodByName(t);if("recordCustomData"===i&&n.a.CUSTOM_METRICS_JSON)return void this._doLog(i,t,e);var a=this._getTotalValue(t,e,r);this._doLog(i,t,a)}catch(t){console.warn("Catched",t)}}logYtExtension(t){switch(t.toLowerCase()){case"mp4":this.log("YtExtension",this.EXTENSION_MP4);break;case"mp3":this.log("YtExtension",this.EXTENSION_MP3);break;case"webm":this.log("YtExtension",this.EXTENSION_WEBM);break;case"3gp":this.log("YtExtension",this.EXTENSION_3GP);break;case"srt":this.log("YtExtension",this.EXTENSION_SRT);break;default:this.log("YtExtension",this.EXTENSION_OTHER)}}logSendMobile(t){this.log("SendMobile",t)}logFromContentScript(t,e){this.log(t,e,!0)}logRequest(t){var e=Object.keys(t).reduce((e,r,n)=>e+=`${n?"&":""}${r}=${t[r]}`,"?");navigator.sendBeacon("https://coccoc.com/log"+e)}}e.a=new o},40:function(t,e,r){"use strict";(function(e,n){function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}var o;t.exports=x,x.WritableState=O;var a={deprecate:r(51)},s=r(37),u=r(21).Buffer,c=e.Uint8Array||function(){};var l,h=r(38),d=r(39).getHighWaterMark,f=r(18).codes,p=f.ERR_INVALID_ARG_TYPE,m=f.ERR_METHOD_NOT_IMPLEMENTED,v=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,y=f.ERR_STREAM_DESTROYED,b=f.ERR_STREAM_NULL_VALUES,_=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,E=h.errorOrDestroy;function T(){}function O(t,e,a){o=o||r(19),t=t||{},"boolean"!=typeof a&&(a=e instanceof o),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new v;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,i,o){--e.pendingcb,r?(n.nextTick(o,i),n.nextTick(I,t,e),t._writableState.errorEmitted=!0,E(t,i)):(o(i),t._writableState.errorEmitted=!0,E(t,i),I(t,e))}(t,r,i,e,o);else{var a=L(r)||t.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||k(t,r),i?n.nextTick(A,t,r,a,o):A(t,r,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function x(t){var e=this instanceof(o=o||r(19));if(!e&&!l.call(x,this))return new x(t);this._writableState=new O(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function S(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new y("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function A(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),I(t,e)}function k(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,o=new Array(n),a=e.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,S(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,h=r.callback;if(S(t,e,!1,e.objectMode?1:c.length,c,l,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function L(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function R(t,e){t._final((function(r){e.pendingcb--,r&&E(t,r),e.prefinished=!0,t.emit("prefinish"),I(t,e)}))}function I(t,e){var r=L(e);if(r&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(R,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}r(13)(x,s),O.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(O.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||this===x&&(t&&t._writableState instanceof O)}})):l=function(t){return t instanceof this},x.prototype.pipe=function(){E(this,new g)},x.prototype.write=function(t,e,r){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=t,u.isBuffer(i)||i instanceof c);return s&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof r&&(r=T),o.ending?function(t,e){var r=new _;E(t,r),n.nextTick(e,r)}(this,r):(s||function(t,e,r,i){var o;return null===r?o=new b:"string"==typeof r||e.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(E(t,o),n.nextTick(i,o),!1)}(this,o,t,r))&&(o.pendingcb++,a=function(t,e,r,n,i,o){if(!r){var a=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,r));return e}(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var c=e.length<e.highWaterMark;c||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else S(t,e,!1,s,n,i,o);return c}(this,o,s,t,e,r)),a},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||k(this,t))},x.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(t,e,r){r(new m("_write()"))},x.prototype._writev=null,x.prototype.end=function(t,e,r){var i=this._writableState;return"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||function(t,e,r){e.ending=!0,I(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,i,r),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),x.prototype.destroy=h.destroy,x.prototype._undestroy=h.undestroy,x.prototype._destroy=function(t,e){e(t)}}).call(this,r(9),r(15))},41:function(t,e,r){"use strict";t.exports=l;var n=r(18).codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(19);function c(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);u.call(this,t),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(e,r){d(t,e,r)}))}function d(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}r(13)(l,u),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,r){r(new i("_transform()"))},l.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},42:function(t,e,r){"use strict";var n=r(13),i=r(53),o=r(28).Buffer,a=new Array(16);function s(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(t,e){return t<<e|t>>>32-e}function c(t,e,r,n,i,o,a){return u(t+(e&r|~e&n)+i+o|0,a)+e|0}function l(t,e,r,n,i,o,a){return u(t+(e&n|r&~n)+i+o|0,a)+e|0}function h(t,e,r,n,i,o,a){return u(t+(e^r^n)+i+o|0,a)+e|0}function d(t,e,r,n,i,o,a){return u(t+(r^(e|~n))+i+o|0,a)+e|0}n(s,i),s.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var r=this._a,n=this._b,i=this._c,o=this._d;r=c(r,n,i,o,t[0],3614090360,7),o=c(o,r,n,i,t[1],3905402710,12),i=c(i,o,r,n,t[2],606105819,17),n=c(n,i,o,r,t[3],3250441966,22),r=c(r,n,i,o,t[4],4118548399,7),o=c(o,r,n,i,t[5],1200080426,12),i=c(i,o,r,n,t[6],2821735955,17),n=c(n,i,o,r,t[7],4249261313,22),r=c(r,n,i,o,t[8],1770035416,7),o=c(o,r,n,i,t[9],2336552879,12),i=c(i,o,r,n,t[10],4294925233,17),n=c(n,i,o,r,t[11],2304563134,22),r=c(r,n,i,o,t[12],1804603682,7),o=c(o,r,n,i,t[13],4254626195,12),i=c(i,o,r,n,t[14],2792965006,17),r=l(r,n=c(n,i,o,r,t[15],1236535329,22),i,o,t[1],4129170786,5),o=l(o,r,n,i,t[6],3225465664,9),i=l(i,o,r,n,t[11],643717713,14),n=l(n,i,o,r,t[0],3921069994,20),r=l(r,n,i,o,t[5],3593408605,5),o=l(o,r,n,i,t[10],38016083,9),i=l(i,o,r,n,t[15],3634488961,14),n=l(n,i,o,r,t[4],3889429448,20),r=l(r,n,i,o,t[9],568446438,5),o=l(o,r,n,i,t[14],3275163606,9),i=l(i,o,r,n,t[3],4107603335,14),n=l(n,i,o,r,t[8],1163531501,20),r=l(r,n,i,o,t[13],2850285829,5),o=l(o,r,n,i,t[2],4243563512,9),i=l(i,o,r,n,t[7],1735328473,14),r=h(r,n=l(n,i,o,r,t[12],2368359562,20),i,o,t[5],4294588738,4),o=h(o,r,n,i,t[8],2272392833,11),i=h(i,o,r,n,t[11],1839030562,16),n=h(n,i,o,r,t[14],4259657740,23),r=h(r,n,i,o,t[1],2763975236,4),o=h(o,r,n,i,t[4],1272893353,11),i=h(i,o,r,n,t[7],4139469664,16),n=h(n,i,o,r,t[10],3200236656,23),r=h(r,n,i,o,t[13],681279174,4),o=h(o,r,n,i,t[0],3936430074,11),i=h(i,o,r,n,t[3],3572445317,16),n=h(n,i,o,r,t[6],76029189,23),r=h(r,n,i,o,t[9],3654602809,4),o=h(o,r,n,i,t[12],3873151461,11),i=h(i,o,r,n,t[15],530742520,16),r=d(r,n=h(n,i,o,r,t[2],3299628645,23),i,o,t[0],4096336452,6),o=d(o,r,n,i,t[7],1126891415,10),i=d(i,o,r,n,t[14],2878612391,15),n=d(n,i,o,r,t[5],4237533241,21),r=d(r,n,i,o,t[12],1700485571,6),o=d(o,r,n,i,t[3],2399980690,10),i=d(i,o,r,n,t[10],4293915773,15),n=d(n,i,o,r,t[1],2240044497,21),r=d(r,n,i,o,t[8],1873313359,6),o=d(o,r,n,i,t[15],4264355552,10),i=d(i,o,r,n,t[6],2734768916,15),n=d(n,i,o,r,t[13],1309151649,21),r=d(r,n,i,o,t[4],4149444226,6),o=d(o,r,n,i,t[11],3174756917,10),i=d(i,o,r,n,t[2],718787259,15),n=d(n,i,o,r,t[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=s},436:function(t,e,r){"use strict";r.r(e),function(t){r(484),r(44);var e=r(2),n=r(0),i=r(22),o=r.n(i),a=r(88),s=r(7),u=r(4);function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,i){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),s=new S(i||[]);return n(a,"_invoke",{value:E(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d={};function f(){}function p(){}function m(){}var v={};u(v,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(A([])));y&&y!==e&&r.call(y,o)&&(v=y);var b=m.prototype=f.prototype=Object.create(v);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var i;n(this,"_invoke",{value:function(n,o){function a(){return new e((function(i,a){!function n(i,o,a,s){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function E(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return k()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=T(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function T(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=h(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:p,configurable:!0}),p.displayName=u(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new w(l(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}var l=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))};t.savior_referrer=location.href,t.tab_url=location.href;class h{constructor(){this.EE=EE,this.$el=document.body,this.closeTimeOut=void 0,this.state={isFirstRun:!1,downloads:null},this.render=this.render.bind(this),EE.on("popup.downloads.get.success",t=>{this.setState({downloads:t})}),EE.on("message.background.send",t=>{"play_video"===t.type&&this.autoClose()}),this.render()}setState(t){this.state=Object.assign(Object.assign({},this.state),t),this.render()}autoClose(){clearTimeout(this.closeTimeOut);this.closeTimeOut=setTimeout(()=>null===window||void 0===window?void 0:window.close(),800)}cancelClose(){clearTimeout(this.closeTimeOut)}render(){var t,r,i;if(this.state.isFirstRun){this.$el.classList.add("done");var c=(null===(t=Object(n.query)("#welcome-template"))||void 0===t?void 0:t.textContent)||"",l=Object(n.query)("#welcome");l&&(l.innerHTML=o.a.render(c,{i18n_welcome_title:Object(n.i18n)("popup_welcome_title"),i18n_welcome_text:Object(n.i18n)("popup_welcome_text"),i18n_welcome_button:Object(n.i18n)("popup_welcome_button")}))}else{var h=Object(n.query)("#downloads",this.$el),d=Object(n.query)("#one-click-block",this.$el);if(h.hidden&&d.hidden&&this.state.downloads){var f;this.$el.classList.add("done"),this.EE.once("download-list.first-scope",t=>f=t);var p=0;this.EE.once("download-list.videos-count",t=>p=t);var m=new a.a(this.EE,this.state.downloads,!0,e.a.get("one_click")),v=1===p&&e.a.get("one_click");if(v){var g=(null===(r=Object(n.query)("#one-click-template",this.$el))||void 0===r?void 0:r.textContent)||"",y=null==f?void 0:f.scopeDownloads[f.index];d.innerHTML=o.a.render(g,{media:y,size:"",i18n_type:Object(n.i18n)("media_fields_type_"+(null==y?void 0:y.type)),i18n_downloading_media:Object(n.i18n)("widget_downloading_media"),i18n_starting_download:Object(n.i18n)("popup_starting_download"),i18n_popup_title:Object(n.i18n)("popup_title"),i18n_download_failed:Object(n.i18n)("popup_download_failed"),i18n_one_click:Object(n.i18n)("popup_one_click"),is_single:!0}),d.hidden=!1,h.hidden=!0,this.autoClose(),u.a.log("PageShown",u.a.PAGE_ONE_CLICK_DOWNLOAD)}else h.appendChild(m.$el),h.hidden=!1;var b=e.a.get("preferred_quality_level"),_=o.a.render((null===(i=Object(n.query)("#footer-template"))||void 0===i?void 0:i.textContent)||"",{oneClick:v,quality_levels:s.b.QUALITY_LEVELS.map(t=>({i18n_ql_title:Object(n.i18n)("ql_"+t.toLowerCase()),name:t,is_checked:t===b})),i18n_one_click:Object(n.i18n)("popup_one_click"),i18n_preferred_quality:Object(n.i18n)("popup_preferred_quality"),i18n_no_media_found:Object(n.i18n)("popup_no_media_found")}),w=Object(n.query)("#footer",this.$el);if(w.innerHTML=_,w.hidden=!1,v){var E=Object(n.query)("#one-click");E.addEventListener("mouseenter",()=>this.cancelClose()),E.addEventListener("mouseleave",()=>this.autoClose())}var T=Object(n.query)(".j-one-click");null==T||T.addEventListener("click",()=>e.a.set("one_click",!e.a.get("one_click")));var O=Object(n.query)("#quality-level-selection");null==O||O.addEventListener("change",()=>{e.a.set("preferred_quality_level",O.value),EE.emit("preferred-quality-level.changed"),u.a.log("OneClickQualityChanged",s.b.getOneClickQualityIndex(O.value)),this.setState({})}),EE.on("preferred-quality-level.changed",()=>this.setState({})),u.a.log("PageShown",this.state.downloads.length?u.a.PAGE_NO_MEDIA_FOUND:u.a.PAGE_DOWNLOADS_LIST)}var x=Object(n.query)(".j-one-click");x&&(x.checked=e.a.get("one_click"));var S=Object(n.query)("#quality-level-selection");S&&(S.value=e.a.get("preferred_quality_level"))}}}function d(t,e){return l(this,void 0,void 0,c().mark((function r(){return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!t){r.next=6;break}return r.next=4,chrome.tabs.sendMessage(t,e);case 4:r.next=8;break;case 6:return r.next=8,chrome.runtime.sendMessage(e);case 8:r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))}try{e.a.load().then(()=>{chrome.tabs.query({windowId:chrome.windows.WINDOW_ID_CURRENT,active:!0},e=>{var r=e&&e[0]&&e[0].id||-1;t.savior_referrer=e[0].url||"",t.tab_url=e[0].url||"",u.a.log("PageShown",u.a.PAGE_WELCOME_SCREEN),EE.on("message.received",t=>{switch(t.type){case"contentscript.downloads.get.success":EE.emit("popup.downloads.get.success",t.data);break;case"cache.background.hit":EE.emit("media-provider.cache.hit",t.data.id,t.data.result);break;case"cache.background.miss":EE.emit("media-provider.cache.miss",t.data.id);break;case"widget_playnow":EE.emit("widget.show_playnow",t);break;case"download_canceled":EE.emit("widget.download_canceled",t)}}),chrome.runtime.onMessage.addListener(t=>EE.emit("message.received",t)),EE.on("message.content-script.send",t=>d(r,t)),EE.on("message.background.send",t=>d(null,t)),EE.on("media-provider.cache.get",(t,e)=>{var r={type:"cache.background",data:{id:t,method:"get",params:{key:e}}};EE.emit("message.background.send",r)}),EE.on("media-provider.cache.put",(t,e,r)=>{var n={type:"cache.background",data:{id:t,method:"put",params:{key:e,value:r}}};EE.emit("message.background.send",n)}),EE.on("download",t=>EE.emit("message.background.send",{type:"download",data:t})),EE.emit("message.content-script.send",{type:"popup.downloads.get"})}),new h})}catch(t){console.log("Caught",t)}}.call(this,r(9))},44:function(t,e,r){"use strict";(function(t){var e=r(26);t.EE||(t.EE=new e.EventEmitter),t.IS_CONTENT_SCRIPT=!0,t.savior_referrer=location.href,t.tab_url=location.href}).call(this,r(9))},45:function(t,e,r){"use strict";function n(t){var e=t.match(/\d/g);return e?e.length:0}function i(t){var e=t.match(/[A-Za-z]/g);return e?e.length:0}function o(t){return t.replace(/xem|phim|clips?|videos?|online/gi,"").replace(/^\s?-\s?/gi,"").trim()}e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.title;if("string"!=typeof t||"string"!=typeof e)return t;var r=/(vkool)|(vphimzz\.net)|(thichxemphim\.net)|(video\.vietnam\.vn)/i;if(document.location.host.match(r))return document.title?document.title.replace(/Xem Phim /i,""):t;if(location.host.includes("hhkungfu.tv")){var a=document.querySelector(".button_movie_clicked");return document.title&&a?document.title.replace(/\d+/,a.innerText||""):document.title}if("videoplayback"===t||"video"===t)return o(e);if("tv.naver.com"===document.location.host&&"content"===t&&(t=document.getElementsByClassName("_clipTitle")[0].title),"m.naver.com"===document.location.host&&t.length>5)return t;"keeng.vn"===document.location.host&&e.includes("Album")&&(t=document.getElementsByClassName("song_active")[0].children[0].title),"www.facebook.com"===document.location.host&&(e=e.replace(/^\([0-9]+\)\s/,""));var s=t.replace(/[\W+_]/g,""),u=s.length,c=n(s),l=i(s),h=u?c/u:0,d=u?l/u:0;return.99>h+d?e:h>=.5?o(e):t}},48:function(t,e){function r(){return t.exports=r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,r.apply(this,arguments)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},484:function(t,e){},50:function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},51:function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,r(9))},53:function(t,e,r){"use strict";var n=r(28).Buffer,i=r(56).Transform;function o(t){i.call(this),this._block=n.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(13)(o,i),o.prototype._transform=function(t,e,r){var n=null;try{this.update(t,e)}catch(t){n=t}r(n)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},o.prototype.update=function(t,e){if(function(t,e){if(!n.isBuffer(t)&&"string"!=typeof t)throw new TypeError(e+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(t)||(t=n.from(t,e));for(var r=this._block,i=0;this._blockOffset+t.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=t[i++];this._update(),this._blockOffset=0}for(;i<t.length;)r[this._blockOffset++]=t[i++];for(var a=0,s=8*t.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},54:function(t,e,r){"use strict";e.byteLength=function(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=c(t),a=n[0],s=n[1],u=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,s)),l=0,h=s>0?a-4:a;for(r=0;r<h;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;2===s&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,u[l++]=255&e);1===s&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function l(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},55:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,h=r?i-1:0,d=r?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-l)-1,f>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+t[e+h],h+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),o-=c}return(f?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[r+f]=255&a,f+=p,a/=256,c-=8);t[r+f-p]|=128*m}},56:function(t,e,r){(e=t.exports=r(36)).Stream=e,e.Readable=e,e.Writable=r(40),e.Duplex=r(19),e.Transform=r(41),e.PassThrough=r(62),e.finished=r(29),e.pipeline=r(63)},57:function(t,e){},58:function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=r(21).Buffer,s=r(59).inspect,u=s&&s.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,r,c;return e=t,(r=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return a.alloc(0);for(var e,r,n,i=a.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,r=i,n=s,a.prototype.copy.call(e,r,n),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;for(t-=n.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),0==(t-=o)){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=a.allocUnsafe(t),r=this.head,n=1;for(r.data.copy(e),t-=r.data.length;r=r.next;){var i=r.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),0==(t-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,e}},{key:u,value:function(t,e){return s(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&o(e.prototype,r),c&&o(e,c),t}()},59:function(t,e){},6:function(t,e,r){"use strict";(function(t){r.d(e,"b",(function(){return a}));var n=r(1);function i(t){return t.split(".").map(t=>parseInt(t))}function o(t,e){if(!t)return!1;var r=e.split(" ");if(2!==r.length)return!1;var n=-1;switch(r[0]){case">":n=1;break;case">=":n=0}var o,a,s,u=i(r[1]);return a=u,(0!==(s=(o=t)[0]-a[0])||0!=(s=o[1]-a[1])||0!=(s=o[2]-a[2])?s:s=o[3]-a[3])>=n}function a(t){var e=t.match(/Chrome\/([\d.]+)/);return e&&e[1]&&(e=i(e[1])),o.bind(null,e)}var s=function(t){var e=t.match(/Chrome\/([\d.]+)/);e&&e[1]&&(e=i(e[1]));var r=o.bind(null,e);return{YT:{mp4:!0,m4a:!0,webm:r(">= 39.0.2171.103"),weba:r(">= 39.0.2171.103")},M3U8:r("> 62.4.3202.180"),SOUND_ONLY:r("> 55.4.2883.114")||!!e&&50===e[0]&&r("> 50.3.2661.150"),SUBTITLES:r("> 55.4.2883.114")||!!e&&50===e[0]&&r("> 50.3.2661.150"),PLAY_NOW_BOTTOM_TOOLTIP:r("> 55.4.2883.126"),IS_ADS_PIP_PARAMS:r("> 60.4.3112.120"),MEDIA_WEB_REQUEST:r(">= 58.4.3029.118"),SERP_ADD_STRUCTURES:r(">= 62.4.3202.176"),SERP_ADD_INNER_STRUCTURES:r(">= 64.4.3282.200"),MOBILE_TRANSFER_PANEL:!0,CUSTOM_METRICS_JSON:r(">= 64.4.3282.236"),DASH_DOWNLOAD:r(">= 72.0.3626.130"),WEB_REQUEST_EXTRA_HEADERS:r(">= 72.0.0.0"),NATIVE_PIP:r(">= 74.0.0.0"),DOWNLOAD:{EXTRA_DATAS:r(">= 103.0.0.0"),M3U8_AUDIO:r(">= 109.0.0.0")},CHATGPT:r(">= 110.0.0.0"),DO_NOT_ONBOARD_YOUTUBE_ANTI_ADBLOCKER:r(">= 117.0.0.0"),DO_NOT_FAST_FORWARD_YOUTUBE_ADS:r(">= "+n.i),SRT_V3_SUPPORT:r(">= 121.0.0.0")}}(t.navigator.userAgent);e.a=s}).call(this,r(9))},60:function(t,e,r){"use strict";(function(e){var n;function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o=r(29),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(t,e){return{value:t,done:e}}function p(t){var e=t[a];if(null!==e){var r=t[d].read();null!==r&&(t[l]=null,t[a]=null,t[s]=null,e(f(r,!1)))}}function m(t){e.nextTick(p,t)}var v=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((i(n={get stream(){return this[d]},next:function(){var t=this,r=this[u];if(null!==r)return Promise.reject(r);if(this[c])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise((function(r,n){e.nextTick((function(){t[u]?n(t[u]):r(f(void 0,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(t,e){return function(r,n){t.then((function(){e[c]?r(f(void 0,!0)):e[h](r,n)}),n)}}(i,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(f(o,!1));n=new Promise(this[h])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var t=this;return new Promise((function(e,r){t[d].destroy(null,(function(t){t?r(t):e(f(void 0,!0))}))}))})),n),v);t.exports=function(t){var e,r=Object.create(g,(i(e={},d,{value:t,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,u,{value:null,writable:!0}),i(e,c,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var n=r[d].read();n?(r[l]=null,r[a]=null,r[s]=null,t(f(n,!1))):(r[a]=t,r[s]=e)},writable:!0}),e));return r[l]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[s];return null!==e&&(r[l]=null,r[a]=null,r[s]=null,e(t)),void(r[u]=t)}var n=r[a];null!==n&&(r[l]=null,r[a]=null,r[s]=null,n(f(void 0,!0))),r[c]=!0})),t.on("readable",m.bind(null,r)),r}}).call(this,r(15))},61:function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},62:function(t,e,r){"use strict";t.exports=i;var n=r(41);function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}r(13)(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},63:function(t,e,r){"use strict";var n;var i=r(18).codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function u(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===n&&(n=r(29)),n(t,{readable:e,writable:i},(function(t){if(t)return o(t);s=!0,o()}));var u=!1;return function(e){if(!s&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function c(t){t()}function l(t,e){return t.pipe(e)}function h(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map((function(t,r){var o=r<e.length-1;return u(t,o,r>0,(function(t){n||(n=t),t&&a.forEach(c),o||(a.forEach(c),i(n))}))}));return e.reduce(l)}},66:function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],u=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t){return t.split(".")}r.d(e,"a",(function(){return a}));var a={store:new Map,register:function(t,e){var r=n(o(t),1)[0];this.store.set(t,e),window.addEventListener(r,e)},unregister:function(t){var e=n(o(t),1)[0],r=this.store.get(t);r&&window.removeEventListener(e,r)},registerClickaway:function(t,e,r){this.register("click.clickaway_"+t,(function(t){var n=t.target,i=!0;e.forEach(t=>{(t==n||(null==t?void 0:t.contains(n)))&&(i=!1)}),i&&(null==r||r())}))},unregisterClickaway:function(t){this.unregister("click.clickaway_"+t)}}},68:function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(81),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(9))},7:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(0),i=r(1);class o{constructor(){this.QUALITY_TYPES={},this.QUALITY_TYPES[o.QL_VIDEO_ULTRAHD]={quality:o.QL_HIGH,i18n_quality:Object(n.i18n)(i.v["3072p"].i18n_label),qualityIndex:8,size:3072,videoTitle:"Super HD"},this.QUALITY_TYPES["4K"]=this.QUALITY_TYPES[o.QL_VIDEO_ULTRAHD],this.QUALITY_TYPES["4K UHD"]=this.QUALITY_TYPES[o.QL_VIDEO_ULTRAHD],this.QUALITY_TYPES[o.QL_VIDEO_ULTRAHD]={quality:o.QL_HIGH,i18n_quality:Object(n.i18n)(i.v["2160p"].i18n_label),qualityIndex:7,size:2160,videoTitle:"Ultra HD"},this.QUALITY_TYPES[o.QL_VIDEO_ULTRAHD]={quality:o.QL_HIGH,i18n_quality:Object(n.i18n)(i.v["1440p"].i18n_label),qualityIndex:6,size:1440,videoTitle:"Quad HD"},this.QUALITY_TYPES["Quad HD"]=this.QUALITY_TYPES[o.QL_VIDEO_ULTRAHD],this.QUALITY_TYPES[o.QL_VIDEO_FULLHD]={quality:o.QL_HIGH,i18n_quality:Object(n.i18n)(i.v["1080p"].i18n_label),qualityIndex:5,size:1080,videoTitle:"Full HD",audioTitle:"High",vimeoQuality:"1080p",zingTag:["1080p","label1080"],dailymotionQuality:"1080p",clipvnQuality:"5"},this.QUALITY_TYPES[o.QL_HIGH]=this.QUALITY_TYPES[o.QL_VIDEO_FULLHD],this.QUALITY_TYPES[o.QL_HIGHEST]=Object.assign({},this.QUALITY_TYPES[o.QL_VIDEO_FULLHD]),this.QUALITY_TYPES[o.QL_HIGHEST].qualityIndex+=.01,this.QUALITY_TYPES[o.QL_VIDEO_HD]={quality:o.QL_HIGH,i18n_quality:Object(n.i18n)(i.v["720p"].i18n_label),qualityIndex:4,size:720,videoTitle:"HD",audioTitle:"High",zingTag:["720p","label720"],vimeoQuality:"720p",dailymotionQuality:["hd","720p"],facebookQuality:["hd_src","hd_src_no_ratelimit"],JWQuality:"highquality",clipvnQuality:"4"},this.QUALITY_TYPES[o.QL_VIDEO_STANDARD]={quality:o.QL_MEDIUM,i18n_quality:Object(n.i18n)(i.v["480p"].i18n_label),qualityIndex:3,size:480,videoTitle:"Standard",audioTitle:"Standard",zingTag:["480p"],dailymotionQuality:"480p",vimeoQuality:"480p",facebookQuality:["sd_src","sd_src_no_ratelimit"],JWQuality:"location",clipvnQuality:"3"},this.QUALITY_TYPES[o.QL_VIDEO_MEDIUM]={quality:o.QL_MEDIUM,i18n_quality:Object(n.i18n)(i.v["360p"].i18n_label),qualityIndex:2,size:360,videoTitle:"Medium",audioTitle:"Medium",vimeoQuality:"360p",dailymotionQuality:"380p",zingTag:["source","360p"],JWQuality:"lowquality",clipvnQuality:"2"},this.QUALITY_TYPES[o.QL_VIDEO_SMALL]={quality:o.QL_LOW,i18n_quality:Object(n.i18n)(i.v["270p"].i18n_label),qualityIndex:1,size:240,altSizes:[270],videoTitle:"Small",audioTitle:"Low",dailymotionQuality:"240p",vimeoQuality:"270p",zingTag:["f","f240"],clipvnQuality:"1"},this.QUALITY_TYPES[o.QL_LOW]=this.QUALITY_TYPES[o.QL_VIDEO_SMALL],this.QUALITY_TYPES[o.QL_VIDEO_MOBILE]={quality:o.QL_LOW,i18n_quality:Object(n.i18n)(i.v["144p"].i18n_label),qualityIndex:0,size:144,altSizes:[180],videoTitle:"Mobile",audioTitle:"Low",dailymotionQuality:"144p",vimeoQuality:"",clipvnQuality:"0"},this.PREFERRED_QUALITY_INDEX={},this.PREFERRED_QUALITY_INDEX[o.QL_HIGH]=this.QUALITY_TYPES[o.QL_VIDEO_ULTRAHD].qualityIndex,this.PREFERRED_QUALITY_INDEX[o.QL_MEDIUM]=this.QUALITY_TYPES[o.QL_VIDEO_STANDARD].qualityIndex,this.PREFERRED_QUALITY_INDEX[o.QL_LOW]=this.QUALITY_TYPES[o.QL_VIDEO_SMALL].qualityIndex,this.DEFAULT_QUALITY_LEVEL=o.QL_HIGH,this.QUALITY_LEVELS=[o.QL_HIGH,o.QL_MEDIUM,o.QL_LOW],this.VIDEO_QUALITY_LEVELS=[o.QL_VIDEO_ULTRAHD,o.QL_VIDEO_FULLHD,o.QL_VIDEO_HD,o.QL_VIDEO_STANDARD,o.QL_VIDEO_MEDIUM,o.QL_VIDEO_SMALL,o.QL_VIDEO_MOBILE],this.DEFAULT_QUALITY_TYPE=o.QL_VIDEO_STANDARD}getFacebookQuality(t){var e;return null===(e=this._getVideoQuality("facebookQuality",t))||void 0===e?void 0:e.videoTitle}getDailymotionQuality(t){var e;return null===(e=this._getVideoQuality("dailymotionQuality",t))||void 0===e?void 0:e.videoTitle}getZingVideoQuality(t){var e;return null===(e=this._getVideoQuality("zingTag",t))||void 0===e?void 0:e.videoTitle}getZingAudioQuality(t){var e;return null===(e=this._getVideoQuality("zingTag",t))||void 0===e?void 0:e.audioTitle}getVimeoQuality(t){var e;return null===(e=this._getVideoQuality("vimeoQuality",t))||void 0===e?void 0:e.videoTitle}getClipvnQuality(t){var e;return null===(e=this._getVideoQuality("clipvnQuality",t))||void 0===e?void 0:e.videoTitle}getJWQuality(t){var e;return null===(e=this._getVideoQuality("JWQuality",t))||void 0===e?void 0:e.videoTitle}getQualityBySize(t){var e;return null===(e=this._getVideoQuality("size",t))||void 0===e?void 0:e.videoTitle}getSizeByQuality(t){return(this.QUALITY_TYPES[t]||{}).size||0}getI18nOfQuality(t){var e;return null===(e=this.QUALITY_TYPES[t])||void 0===e?void 0:e.i18n_quality}_getVideoQuality(t,e,r){for(var n in this.QUALITY_TYPES){var i=this.QUALITY_TYPES[n][t];if(Array.isArray(i)||(i=[i]),-1!==i.indexOf(e))return this.QUALITY_TYPES[n]}return r?null:this.QUALITY_TYPES[this.DEFAULT_QUALITY_TYPE]}_getTypeByQualityType(t){for(var e in this.QUALITY_TYPES)if(t===e||t===this.QUALITY_TYPES[e].videoTitle||t===this.QUALITY_TYPES[e].audioTitle)return this.QUALITY_TYPES[e];return this.QUALITY_TYPES[this.DEFAULT_QUALITY_TYPE]}_calculateWeight(t,e){var r,n=(null===(r=i.o[t.type])||void 0===r?void 0:r.extensions_weight)||[],o=n.indexOf(t.ext),a=this._getTypeByQualityType(t.quality||"").qualityIndex;return o/n.length+Math.abs(e-a)/7}getQualityLevelByType(t){return Object.keys(this.QUALITY_TYPES).indexOf(this._getTypeByQualityType(t).videoTitle)}getVideoQualityIndex(t){return this.VIDEO_QUALITY_LEVELS.concat().reverse().indexOf(t)}getOneClickQualityIndex(t){return this.QUALITY_LEVELS.concat().reverse().indexOf(t)}getQualityLevelByQualityType(t){return this._getTypeByQualityType(t).quality}getQualityIndexByVideoTitleQuality(t){return void 0!==this.QUALITY_TYPES[t]?this.QUALITY_TYPES[t].qualityIndex:this.getOneClickQualityIndex(t)}getQualityNameByResolution(t){var e=parseInt(t),r=Object.values(this.QUALITY_TYPES),n=r.find(t=>t.size===e||t.altSizes&&t.altSizes.includes(e));if(n)return n.videoTitle;var i=r.find(t=>t.size<e);return i?i.videoTitle:null}getQualityExtFromDowload(t){return(t.ext||"")+"/"+(t.quality||"")+"/"+(t.resolution||"")}chooseBestDownload(t,e,r){var n=t.length;if(r)for(var i=r.split("/").filter(t=>t).length>2,o=0;o<n;++o){var a=t[o],s=this.getQualityExtFromDowload(a);if(s===r)return a;if(i){var u=r.replace(/(.+)\/.+/,"$1");if(s.replace(/(.+)\/.+/,"$1")===u)return a}}e=e||this.DEFAULT_QUALITY_LEVEL;var c=t.filter(t=>"video"===t.type||"no_watermark_video"===t.type);c&&c.length||(c=t),n=c.length;for(var l=this.PREFERRED_QUALITY_INDEX[e],h=1e3,d=-1,f=0;f<n;++f){var p=c[f],m=this._calculateWeight(p,l);h>m&&(h=m,d=f)}return c[e.toLocaleLowerCase()===r?0:d]}}o.QL_HIGHEST="Highest",o.QL_HIGH="High",o.QL_MEDIUM="Medium",o.QL_LOW="Low",o.QL_VIDEO_ULTRAHD="Ultra HD",o.QL_VIDEO_FULLHD="Full HD",o.QL_VIDEO_HD="HD",o.QL_VIDEO_STANDARD="Standard",o.QL_VIDEO_MEDIUM="Medium",o.QL_VIDEO_SMALL="Small",o.QL_VIDEO_MOBILE="Mobile",e.b=new o},74:function(t,e,r){(function(e){var r;r="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=r}).call(this,r(9))},8:function(t,e,r){"use strict";r.d(e,"a",(function(){return I})),r.d(e,"c",(function(){return D})),r.d(e,"d",(function(){return P})),r.d(e,"e",(function(){return N})),r.d(e,"b",(function(){return C}));var n=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var r=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(r,1),r>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var r=e.length,n=0;n<r;++n)e[n].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),o=e.length,a=0;a<o;++a)e[a].apply(this,i)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}(),i=r(48),o=r.n(i),a=r(86);
/*! @name m3u8-parser @version 7.1.0 @license Apache-2.0 */
class s extends n{constructor(){super(),this.buffer=""}push(t){let e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)}}const u=String.fromCharCode(9),c=function(t){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),r={};return e[1]&&(r.length=parseInt(e[1],10)),e[2]&&(r.offset=parseInt(e[2],10)),r},l=function(t){const e={};if(!t)return e;const r=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))'));let n,i=r.length;for(;i--;)""!==r[i]&&(n=/([^=]*)=(.*)/.exec(r[i]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),e[n[0]]=n[1]);return e};class h extends n{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(t){let e,r;if(0===(t=t.trim()).length)return;if("#"!==t[0])return void this.trigger("data",{type:"uri",uri:t});this.tagMappers.reduce((e,r)=>{const n=r(t);return n===t?e:e.concat([n])},[t]).forEach(t=>{for(let e=0;e<this.customParsers.length;e++)if(this.customParsers[e].call(this,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t),e)this.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(t),e)return r={type:"tag",tagType:"inf"},e[1]&&(r.duration=parseFloat(e[1])),e[2]&&(r.title=e[2]),void this.trigger("data",r);if(e=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(t),e)return r={type:"tag",tagType:"targetduration"},e[1]&&(r.duration=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#EXT-X-VERSION:([0-9.]*)?/.exec(t),e)return r={type:"tag",tagType:"version"},e[1]&&(r.version=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(t),e)return r={type:"tag",tagType:"media-sequence"},e[1]&&(r.number=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(t),e)return r={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(r.number=parseInt(e[1],10)),void this.trigger("data",r);if(e=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(t),e)return r={type:"tag",tagType:"playlist-type"},e[1]&&(r.playlistType=e[1]),void this.trigger("data",r);if(e=/^#EXT-X-BYTERANGE:(.*)?$/.exec(t),e)return r=o()(c(e[1]),{type:"tag",tagType:"byterange"}),void this.trigger("data",r);if(e=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(t),e)return r={type:"tag",tagType:"allow-cache"},e[1]&&(r.allowed=!/NO/.test(e[1])),void this.trigger("data",r);if(e=/^#EXT-X-MAP:(.*)$/.exec(t),e){if(r={type:"tag",tagType:"map"},e[1]){const t=l(e[1]);t.URI&&(r.uri=t.URI),t.BYTERANGE&&(r.byterange=c(t.BYTERANGE))}this.trigger("data",r)}else if(e=/^#EXT-X-STREAM-INF:(.*)$/.exec(t),e){if(r={type:"tag",tagType:"stream-inf"},e[1]){if(r.attributes=l(e[1]),r.attributes.RESOLUTION){const t=r.attributes.RESOLUTION.split("x"),e={};t[0]&&(e.width=parseInt(t[0],10)),t[1]&&(e.height=parseInt(t[1],10)),r.attributes.RESOLUTION=e}r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))}this.trigger("data",r)}else{if(e=/^#EXT-X-MEDIA:(.*)$/.exec(t),e)return r={type:"tag",tagType:"media"},e[1]&&(r.attributes=l(e[1])),void this.trigger("data",r);if(e=/^#EXT-X-ENDLIST/.exec(t),e)this.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t),e)this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(t),e)return r={type:"tag",tagType:"program-date-time"},e[1]&&(r.dateTimeString=e[1],r.dateTimeObject=new Date(e[1])),void this.trigger("data",r);if(e=/^#EXT-X-KEY:(.*)$/.exec(t),e)return r={type:"tag",tagType:"key"},e[1]&&(r.attributes=l(e[1]),r.attributes.IV&&("0x"===r.attributes.IV.substring(0,2).toLowerCase()&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),void this.trigger("data",r);if(e=/^#EXT-X-START:(.*)$/.exec(t),e)return r={type:"tag",tagType:"start"},e[1]&&(r.attributes=l(e[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),void this.trigger("data",r);if(e=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(t),e)return r={type:"tag",tagType:"cue-out-cont"},e[1]?r.data=e[1]:r.data="",void this.trigger("data",r);if(e=/^#EXT-X-CUE-OUT:(.*)?$/.exec(t),e)return r={type:"tag",tagType:"cue-out"},e[1]?r.data=e[1]:r.data="",void this.trigger("data",r);if(e=/^#EXT-X-CUE-IN:(.*)?$/.exec(t),e)return r={type:"tag",tagType:"cue-in"},e[1]?r.data=e[1]:r.data="",void this.trigger("data",r);if(e=/^#EXT-X-SKIP:(.*)$/.exec(t),e&&e[1])return r={type:"tag",tagType:"skip"},r.attributes=l(e[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(u)),void this.trigger("data",r);if(e=/^#EXT-X-PART:(.*)$/.exec(t),e&&e[1])return r={type:"tag",tagType:"part"},r.attributes=l(e[1]),["DURATION"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseFloat(r.attributes[t]))})),["INDEPENDENT","GAP"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=/YES/.test(r.attributes[t]))})),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=c(r.attributes.BYTERANGE)),void this.trigger("data",r);if(e=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t),e&&e[1])return r={type:"tag",tagType:"server-control"},r.attributes=l(e[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseFloat(r.attributes[t]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=/YES/.test(r.attributes[t]))})),void this.trigger("data",r);if(e=/^#EXT-X-PART-INF:(.*)$/.exec(t),e&&e[1])return r={type:"tag",tagType:"part-inf"},r.attributes=l(e[1]),["PART-TARGET"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseFloat(r.attributes[t]))})),void this.trigger("data",r);if(e=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t),e&&e[1])return r={type:"tag",tagType:"preload-hint"},r.attributes=l(e[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(t){if(r.attributes.hasOwnProperty(t)){r.attributes[t]=parseInt(r.attributes[t],10);const e="BYTERANGE-LENGTH"===t?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[e]=r.attributes[t],delete r.attributes[t]}})),void this.trigger("data",r);if(e=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t),e&&e[1])return r={type:"tag",tagType:"rendition-report"},r.attributes=l(e[1]),["LAST-MSN","LAST-PART"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseInt(r.attributes[t],10))})),void this.trigger("data",r);if(e=/^#EXT-X-DATERANGE:(.*)$/.exec(t),e&&e[1]){r={type:"tag",tagType:"daterange"},r.attributes=l(e[1]),["ID","CLASS"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=String(r.attributes[t]))})),["START-DATE","END-DATE"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=new Date(r.attributes[t]))})),["DURATION","PLANNED-DURATION"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=parseFloat(r.attributes[t]))})),["END-ON-NEXT"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=/YES/i.test(r.attributes[t]))})),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach((function(t){r.attributes.hasOwnProperty(t)&&(r.attributes[t]=r.attributes[t].toString(16))}));const t=/^X-([A-Z]+-)+[A-Z]+$/;for(const e in r.attributes){if(!t.test(e))continue;const n=/[0-9A-Fa-f]{6}/g.test(r.attributes[e]),i=/^\d+(\.\d+)?$/.test(r.attributes[e]);r.attributes[e]=n?r.attributes[e].toString(16):i?parseFloat(r.attributes[e]):String(r.attributes[e])}this.trigger("data",r)}else if(e=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(t),e)this.trigger("data",{type:"tag",tagType:"independent-segments"});else{if(e=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(t),e)return r={type:"tag",tagType:"content-steering"},r.attributes=l(e[1]),void this.trigger("data",r);this.trigger("data",{type:"tag",data:t.slice(4)})}}}}else this.trigger("data",{type:"comment",text:t.slice(1)})})}addParser({expression:t,customType:e,dataParser:r,segment:n}){"function"!=typeof r&&(r=t=>t),this.customParsers.push(i=>{if(t.exec(i))return this.trigger("data",{type:"custom",data:r(i),customType:e,segment:n}),!0})}addTagMapper({expression:t,map:e}){this.tagMappers.push(r=>t.test(r)?e(r):r)}}const d=function(t){const e={};return Object.keys(t).forEach((function(r){var n;e[(n=r,n.toLowerCase().replace(/-(\w)/g,t=>t[1].toUpperCase()))]=t[r]})),e},f=function(t){const{serverControl:e,targetDuration:r,partTargetDuration:n}=t;if(!e)return;const i="#EXT-X-SERVER-CONTROL",o="holdBack",a="partHoldBack",s=r&&3*r,u=n&&2*n;r&&!e.hasOwnProperty(o)&&(e[o]=s,this.trigger("info",{message:`${i} defaulting HOLD-BACK to targetDuration * 3 (${s}).`})),s&&e[o]<s&&(this.trigger("warn",{message:`${i} clamping HOLD-BACK (${e[o]}) to targetDuration * 3 (${s})`}),e[o]=s),n&&!e.hasOwnProperty(a)&&(e[a]=3*n,this.trigger("info",{message:`${i} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),n&&e[a]<u&&(this.trigger("warn",{message:`${i} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${u}).`}),e[a]=u)};class p extends n{constructor(){super(),this.lineStream=new s,this.parseStream=new h,this.lineStream.pipe(this.parseStream),this.lastProgramDateTime=null;const t=this,e=[];let r,n,i={},u=!1;const c=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};let p=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],segments:[]};let m=0,v=0;const g={};this.on("end",()=>{i.uri||!i.parts&&!i.preloadHints||(!i.map&&r&&(i.map=r),!i.key&&n&&(i.key=n),i.timeline||"number"!=typeof p||(i.timeline=p),this.manifest.preloadSegment=i)}),this.parseStream.on("data",(function(s){let h,y;({tag(){({version(){s.version&&(this.manifest.version=s.version)},"allow-cache"(){this.manifest.allowCache=s.allowed,"allowed"in s||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const t={};"length"in s&&(i.byterange=t,t.length=s.length,"offset"in s||(s.offset=m)),"offset"in s&&(i.byterange=t,t.offset=s.offset),m=t.offset+t.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),s.title&&(i.title=s.title),s.duration>0&&(i.duration=s.duration),0===s.duration&&(i.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=e},key(){if(s.attributes)if("NONE"!==s.attributes.METHOD)if(s.attributes.URI){if("com.apple.streamingkeydelivery"===s.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:s.attributes});if("com.microsoft.playready"===s.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:s.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===s.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(s.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===s.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==s.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):s.attributes.KEYID&&"0x"===s.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:s.attributes.KEYFORMAT,keyId:s.attributes.KEYID.substring(2)},pssh:Object(a.a)(s.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}s.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),n={method:s.attributes.METHOD||"AES-128",uri:s.attributes.URI},void 0!==s.attributes.IV&&(n.iv=s.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else n=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence"(){isFinite(s.number)?this.manifest.mediaSequence=s.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+s.number})},"discontinuity-sequence"(){isFinite(s.number)?(this.manifest.discontinuitySequence=s.number,p=s.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+s.number})},"playlist-type"(){/VOD|EVENT/.test(s.playlistType)?this.manifest.playlistType=s.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+s.playlist})},map(){r={},s.uri&&(r.uri=s.uri),s.byterange&&(r.byterange=s.byterange),n&&(r.key=n)},"stream-inf"(){this.manifest.playlists=e,this.manifest.mediaGroups=this.manifest.mediaGroups||l,s.attributes?(i.attributes||(i.attributes={}),o()(i.attributes,s.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,!(s.attributes&&s.attributes.TYPE&&s.attributes["GROUP-ID"]&&s.attributes.NAME))return void this.trigger("warn",{message:"ignoring incomplete or missing media group"});const t=this.manifest.mediaGroups[s.attributes.TYPE];t[s.attributes["GROUP-ID"]]=t[s.attributes["GROUP-ID"]]||{},h=t[s.attributes["GROUP-ID"]],y={default:/yes/i.test(s.attributes.DEFAULT)},y.default?y.autoselect=!0:y.autoselect=/yes/i.test(s.attributes.AUTOSELECT),s.attributes.LANGUAGE&&(y.language=s.attributes.LANGUAGE),s.attributes.URI&&(y.uri=s.attributes.URI),s.attributes["INSTREAM-ID"]&&(y.instreamId=s.attributes["INSTREAM-ID"]),s.attributes.CHARACTERISTICS&&(y.characteristics=s.attributes.CHARACTERISTICS),s.attributes.FORCED&&(y.forced=/yes/i.test(s.attributes.FORCED)),h[s.attributes.NAME]=y},discontinuity(){p+=1,i.discontinuity=!0,this.manifest.discontinuityStarts.push(e.length)},"program-date-time"(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=s.dateTimeString,this.manifest.dateTimeObject=s.dateTimeObject),i.dateTimeString=s.dateTimeString,i.dateTimeObject=s.dateTimeObject;const{lastProgramDateTime:t}=this;this.lastProgramDateTime=new Date(s.dateTimeString).getTime(),null===t&&this.manifest.segments.reduceRight((t,e)=>(e.programDateTime=t-1e3*e.duration,e.programDateTime),this.lastProgramDateTime)},targetduration(){!isFinite(s.duration)||s.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+s.duration}):(this.manifest.targetDuration=s.duration,f.call(this,this.manifest))},start(){s.attributes&&!isNaN(s.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:s.attributes["TIME-OFFSET"],precise:s.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out"(){i.cueOut=s.data},"cue-out-cont"(){i.cueOutCont=s.data},"cue-in"(){i.cueIn=s.data},skip(){this.manifest.skip=d(s.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",s.attributes,["SKIPPED-SEGMENTS"])},part(){u=!0;const t=this.manifest.segments.length,e=d(s.attributes);i.parts=i.parts||[],i.parts.push(e),e.byterange&&(e.byterange.hasOwnProperty("offset")||(e.byterange.offset=v),v=e.byterange.offset+e.byterange.length);const r=i.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${r} for segment #${t}`,s.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((t,e)=>{t.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${e} lacks required attribute(s): LAST-PART`})})},"server-control"(){const t=this.manifest.serverControl=d(s.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),f.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const t=this.manifest.segments.length,e=d(s.attributes),r=e.type&&"PART"===e.type;i.preloadHints=i.preloadHints||[],i.preloadHints.push(e),e.byterange&&(e.byterange.hasOwnProperty("offset")||(e.byterange.offset=r?v:0,r&&(v=e.byterange.offset+e.byterange.length)));const n=i.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${n} for segment #${t}`,s.attributes,["TYPE","URI"]),e.type)for(let r=0;r<i.preloadHints.length-1;r++){const o=i.preloadHints[r];o.type&&(o.type===e.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${n} for segment #${t} has the same TYPE ${e.type} as preload hint #${r}`}))}},"rendition-report"(){const t=d(s.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);const e=this.manifest.renditionReports.length-1,r=["LAST-MSN","URI"];u&&r.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+e,s.attributes,r)},"part-inf"(){this.manifest.partInf=d(s.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",s.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),f.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(d(s.attributes));const t=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_("#EXT-X-DATERANGE #"+t,s.attributes,["ID","START-DATE"]);const e=this.manifest.dateRanges[t];e.endDate&&e.startDate&&new Date(e.endDate)<new Date(e.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),e.duration&&e.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),e.plannedDuration&&e.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const r=!!e.endOnNext;if(r&&!e.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),r&&(e.duration||e.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),e.duration&&e.endDate){const r=e.startDate.getTime()+1e3*e.duration;this.manifest.dateRanges[t].endDate=new Date(r)}if(g[e.id]){for(const t in g[e.id])if(e[t]&&JSON.stringify(g[e.id][t])!==JSON.stringify(e[t])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const t=this.manifest.dateRanges.findIndex(t=>t.id===e.id);this.manifest.dateRanges[t]=o()(this.manifest.dateRanges[t],e),g[e.id]=o()(g[e.id],e),this.manifest.dateRanges.pop()}else g[e.id]=e},"independent-segments"(){this.manifest.independentSegments=!0},"content-steering"(){this.manifest.contentSteering=d(s.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",s.attributes,["SERVER-URI"])}}[s.tagType]||c).call(t)},uri(){i.uri=s.uri,e.push(i),this.manifest.targetDuration&&!("duration"in i)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),i.duration=this.manifest.targetDuration),n&&(i.key=n),i.timeline=p,r&&(i.map=r),v=0,null!==this.lastProgramDateTime&&(i.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=1e3*i.duration),i={}},comment(){},custom(){s.segment?(i.custom=i.custom||{},i.custom[s.customType]=s.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[s.customType]=s.data)}})[s.type].call(t)}))}warnOnMissingAttributes_(t,e,r){const n=[];r.forEach((function(t){e.hasOwnProperty(t)||n.push(t)})),n.length&&this.trigger("warn",{message:`${t} lacks required attribute(s): ${n.join(", ")}`})}push(t){this.lineStream.push(t)}end(){this.lineStream.push("\n"),this.manifest.dateRanges.length&&null===this.lastProgramDateTime&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}}var m=r(7),v=r(3),g=r(0);function y(t,e,r,n){return{match:function(e){if(t.filename&&t.filename!==e.filename)return!1;var r=e.host;if(!r||e.title)return!1;if(!t.hosts)return!0;for(var n=t.hosts.length-1;n>=0;n--)if(r.endsWith(t.hosts[n]))return!0;return!1},location:Array.isArray(e)?e:[e],selector:r,auxSelector:n}}function b(t,e,r){return y({hosts:[".googlevideo.com","docs.google.com"],filename:"videoplayback"},t,e,r)}function _(t,e){return b(t,"title",e)}var w=[y({hosts:["ustream.tv"]},/^ustream.tv\/recorded\/([0-9]+)/i,"#ViewerContent h2"),y({hosts:["yan.vn"]},/^yan\.vn/i,'title, [role="complementary"] h3'),y({hosts:["vcdn.vn",".googlevideo.com","docs.google.com"]},/^phim22\.com/i,"title"),y({hosts:["olivia24.com"]},/^olivia24\.com/,"h1.visible-lg.visible-md"),y({},/vipphim\.net/,"title"),y({},/^kenh14\.vn/,"h1.title"),y({},/vtv\.vn/,"h1.news-title,h1.video-title"),y({},/dantri\.com\.vn/,"#video-title"),y({hosts:[".memeclip.com"]},/nguoiduatin\.vn/,"title"),b(/^phim3s.net\/phim/i,"h2.title a",".serverlist .server li a.active"),b(/^thegioiphim\.eu\/movie-episode-full\.php/i,".category-main"),b(/^hayghe\.com\/xem-phim/i,"#tit_player"),b(/^phim14\.net\/xem-phim/i,".blocktitle h1 a",".server_item .active a"),b(/^phimnhanh\.net\/movie/i,"h1 > a",".epicurrent"),b(/^xemnghe\.com\/phim/i,"h1"),b(/^phimhd\.vn\/xem-phim/i,"h1.title","a.playing"),_(/^phimmoi\.net\/phim/i,".episode-link.active"),_(/^phimtv\.vn\/xem-phim/i,"a.playing"),_(/^sieukhungz\.net/i,"h1"),y({hosts:["203.162.121.25:88","110.164.180.35","130.211.247.87"]},/^m-viet\.com/i,"h1"),y({hosts:["memeclip.com"]},/^meme\.vn/i,"h1"),y({hosts:["memeclip.com"]},/^doisongphapluat\.com/,"title"),y({},/^keeng\.vn\/video\//,"title"),y({},/^vlxx\.tv\/video/,"title"),y({},/^keeng\.vn\/video/,".info-keeng-player"),y({},/^kickstarter\.com/,"title"),y({},/^tv\.tuoitre\.vn/,".info h1"),y({},/video\.vietnamnet\.vn/,"h3.video-main-home-title"),y({},/thethao247\.vn/,".thumbblock > p"),y({},/video\.vnexpress\.net/,"h1.title"),y({},/video\.kenh14\.vn/,".video-info_title"),y({hosts:["vtvgo.vn"]},/vtvgo\.vn/,".container .select_program.active h3, .box-vtv-live .select_program.active div:nth-child(2)"),_(/phim/i)],E=/^((xem )?phim)|(video:)/i,T=/(-? picasaweb( \d+)?)|(\| server .*)?$/i,O=/^https?:\/\/(www\.)?/i;var x=r(45),S=5e5,A=1e6,k=2e6,L=4e6;function R(t){return t?Object.keys(t).map(e=>Object.keys(t[e]).map(r=>Object.assign(Object.assign({},t[e][r]),{id:e,name:r}))).flat():[]}function I(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new p;n.push(t),n.end();var i=n.manifest.playlists;return i||(i=[{attributes:{BANDWIDTH:0,CODECS:""},timeline:0,uri:null==e?void 0:e.url}]),i&&i.length?(r&&(i=i.sort((t,e)=>t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:0)),i):[]}function D(t,e){var r,n,i,o=new p;if(o.push(t),o.end(),t.includes("#EXT-X-KEY")&&location.href.includes("24h.com.vn")){var a,s=/"hlsPrefix":\s*"(.+?)"(,|;)*\n*/.exec(Object(g.queryAll)("script").filter(t=>t.innerText&&t.innerText.includes("videoAds1Conf"))[0].innerText);s&&(a=s[1]);var u=new RegExp((a||"keybfa4658f7ae831205709fd307698c661")+"([\\s\\S]+)\\.key").exec(t);if(u){var c=function(t,e){e||(e="application/octet-stream"),window.URL=window.URL||window.webkitURL;var r=t;if("application/octet-stream"===e){var n=t;r=new Uint8Array(n.length/2);for(var i=0;i<r.length;i++)r[i]=parseInt(n.substr(2*i,2),16)}return r}(u[1]);i=btoa(String.fromCharCode.apply(null,c))}}var l=I(t,e,!0),h=(null==l?void 0:l.map(t=>{var r,n,a,s,u,c,l,h,d,f,p=Object(v.a)(e?new URL(e.url):void 0,t.uri,!0),y=Object(v.f)(p);if(location.href.includes("24h.com.vn")&&(y.dashVideoId=i),(null===(r=y.host)||void 0===r?void 0:r.includes("vietsubtv.org"))&&(t.uri="https://player7.vietsubtv.org/jwplayer7/redirect.php?url="+decodeURIComponent(t.uri).split("=")[1],(y=Object(v.f)(t.uri)).ext="m3u8",y.exts=["m3u8"]),y.type="video",t.attributes.CODECS){var b=t.attributes.CODECS.split(",");1==b.length&&/^(mp4a)/i.test(b[0])&&(y.type="audio")}if(t.attributes&&t.attributes.RESOLUTION){var _=t.attributes.RESOLUTION.height,R=m.b.getQualityNameByResolution(_);R&&(y.quality=R),y.resolution=_?_+"p":""}if(y.quality||(t.attributes.BANDWIDTH?y.quality=(f=t.attributes.BANDWIDTH)<S?"Low":f<A?"Medium":f<k?"Standard":f<L?"High":"Highest":y.quality="Standard"),(null==e?void 0:e.dashVideoId)&&(y.dashVideoId=e.dashVideoId),e&&(e.referrer&&(y.referrer=e.referrer),y.url.match(/https:\/\/master1\.ttstream\.online[\s\S]*\.m3u8/g)&&(y.referrer="https://ttstream.online/"),y.url.match(/https:\/\/[\s\S]*\.cdnx\.live[\s\S]*\.m3u8/g)&&(y.referrer="https://cdnx.live/"),y.url.match(/https:\/\/[\s\S]*\.phim18hd\.net[\s\S]*\.m3u8/g)&&(y.referrer="https://phim18hd.net/"),"biphimz.co"===location.host&&(y.referrer=null===(n=Object(g.query)("iframe"))||void 0===n?void 0:n.src),location.host.match(/vlxyz\.net/)&&(y.referrer=location.href),location.host.match(/xhvictory\.com/)&&!t.uri.includes("//")&&(y.url=`https://${y.host}${t.uri}`,y.pathname=t.uri),/master\.(html|php)/i.test(y.url)&&(y.ext="m3u8",y.exts=["m3u8"]),e.skipReferrer&&(delete y.referrer,y.skipReferrer=!0)),(null===(a=y.host)||void 0===a?void 0:a.includes("hls.streamphim.xyz"))&&(y.ext="m3u8",y.exts=["m3u8"]),(null===(s=y.host)||void 0===s?void 0:s.includes("sanstream.xyz"))&&(y.ext="m3u8",y.exts=["m3u8"]),location.host.includes("newsiqra.com")&&(y.ext=null==e?void 0:e.ext,y.exts=e?[e.ext]:void 0,y.referrer=y.url),y.ext||(y.ext="m3u8",y.exts=["m3u8"]),e&&e.fixName)y.filename=e.fixName;else{var I=function(){var t,e,r,n,i,o,a=location.href;if(!O.test(a))return null;a=a.replace(O,"");for(var s=0;s<w.length;++s)if(o=w[s],g.isMatches(a,o.location)){try{var u=g.queryAll(o.selector||"null");if(u.length?i=(null===(t=u.shift())||void 0===t?void 0:t.textContent)||"":(i=(null===(e=g.query("title"))||void 0===e?void 0:e.textContent)||"",o.selector="title"),"title"===o.selector&&(i=i.replace(E,"").replace(T,"")),o.auxSelector){var c=(null===(n=null===(r=g.query(o.auxSelector))||void 0===r?void 0:r.textContent)||void 0===n?void 0:n.trim())||"";c&&(i+=" ("+c+")")}i=i.replace(/\s+/g," ").trim()}catch(t){console.log(t)}if(i)return{title:i,test:o.match}}return a.match(/^fptplay\.net/i)?{title:null,test:function(t){var e=t.pathname.split("/"),r=e.length-1,n=e[r];return"chunklist.m3u8"===n&&r>0&&(n=e[r-1]),n&&(this.title=n),!0}}:null}();I&&I.title?y.title=Object(x.a)(I.title,document.title):y.title=document.title.trim(),(null===(u=y.title)||void 0===u?void 0:u.trim())&&(y.filename=y.title)}(null===(c=y.filename)||void 0===c?void 0:c.trim())||(y.filename="Noname"),y._hls=!0;var D,P=null===(h=null===(l=o.manifest)||void 0===l?void 0:l.mediaGroups)||void 0===h?void 0:h.AUDIO;if(P&&Object.keys(P).length>0){var N=Object.keys(P);D=P[(null===(d=t.attributes)||void 0===d?void 0:d.AUDIO)||N[0]||"audio-0"]}if(D){var C=Object(v.a)(e,D[Object.keys(D)[Object.keys(D).length-1]].uri);y.url={audioUrl:C,videoUrl:y.url},y._hls=!1,y._isDashMPD=!0}return y}))||[];try{var d=R(null===(r=o.manifest.mediaGroups)||void 0===r?void 0:r.AUDIO).map(t=>{var r=Object(v.a)(e,t.uri,!0);return Object.assign(Object.assign({},Object(v.f)(r)),{filename:h[0].filename,type:"audio"})})||[],f=R(null===(n=o.manifest.mediaGroups)||void 0===n?void 0:n.SUBTITLES).map(t=>{var r=Object(v.a)(e,t.uri,!0),n=Object(v.f)(r),i=Object.assign(Object.assign({},n),{filename:h[0].filename,quality:t.name,type:"subtitles"});return"m3u8"==n.ext&&(i._hls=!0),"mpd"==n.ext&&(i._isDashMPD=!0),["srt","vtt"].includes(n.ext||"")||(n.ext="srt",n.exts=["srt"]),i})||[];h.push(...d),h.push(...f)}catch(t){console.warn(t)}if(1==h.length&&h[0].url==(null==e?void 0:e.url)&&(null==t?void 0:t.match(/^\s*#extm3u/i))){if(h[0].play_list=t,/cdn\.linksht\./i.test(e.url))return h;try{for(var y=t.split("\n"),b="",_=1,D=y.length;_<D;_++)y[_].match(/^#extinf:/i)&&(b=y[_+1]);b.match(/^([a-z]+:)?\/\//i)&&!e.notReplaceUrlWithGoogle&&(h[0].originalUrl=h[0].url,h[0].url="https://google.com")}catch(t){}e.skipUrlToCombineHls&&!e.notReplaceUrlWithGoogle&&(h[0].originalUrl=h[0].url,h[0].url="https://google.com")}return h}function P(t){return t.some(t=>"string"==typeof t.url&&t.url.match(/m3u8?/i))}function N(t,e){return t.find((r,n)=>!("string"!=typeof r.url||!r.url.match(/m3u8?/i))&&(t[n]=e,!0))}function C(t,e){var r=new p;r.push(t),r.end();var n=r.manifest.segments;return e&&(n=n.map(t=>(t.uri.startsWith("http")||(t.uri=new URL(t.uri,e).href),Object.assign({},t)))),n}},81:function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var n,i,o,a,s,u=1,c={},l=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},n=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,n=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):n=function(t){setTimeout(p,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),n=function(e){t.postMessage(a+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return c[u]=i,n(u),u++},d.clearImmediate=f}function f(t){delete c[t]}function p(t){if(l)setTimeout(p,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}(e)}finally{f(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(9),r(15))},86:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return o}));var n=r(74),i=r.n(n);function o(e){for(var r,n=(r=e,i.a.atob?i.a.atob(r):t.from(r,"base64").toString("binary")),o=new Uint8Array(n.length),a=0;a<n.length;a++)o[a]=n.charCodeAt(a);return o}}).call(this,r(21).Buffer)},88:function(t,e,r){"use strict";(function(t,n){var i=r(22),o=r.n(i),a=r(2),s=r(0),u=r(7),c=r(1),l=r(10),h=r(89),d=r(4),f=r(66),p=r(8),m=r(3);function v(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */v=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,i){var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),s=new S(i||[]);return n(a,"_invoke",{value:E(t,r,s)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function d(){}function f(){}function p(){}var m={};u(m,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(A([])));y&&y!==e&&r.call(y,o)&&(m=y);var b=p.prototype=d.prototype=Object.create(m);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var i;n(this,"_invoke",{value:function(n,o){function a(){return new e((function(i,a){!function n(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}(n,o,i,a)}))}return i=i?i.then(a,a):a()}})}function E(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return k()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=T(a,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function T(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=l(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,n(b,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=u(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},_(w.prototype),u(w.prototype,a,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new w(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(b),u(b,s,"Generator"),u(b,o,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=A,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function g(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var b=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))};e.a=class{constructor(t,e,r,n,i){this.EE=t,this.$el=Object(l.a)("div","savior-download-list"),this.isPopUp=r,this._download=this._download.bind(this),this._checkFileSize=this._checkFileSize.bind(this),this._sizeQueue=Object(h.a)(this._checkFileSize,3),this.initState(e,r,n,i),this.render(),this._eventListener()}initState(t,e,r,n){var i=this._processQualitiesForRender(t),o=a.a.get("preferred_quality_level"),s=a.a.get("prefer_last_quality")&&a.a.get("last_quality"),c=i.map((t,i)=>{var a=0===i&&!e&&!r&&n,c=t.media.flatMap(t=>t.media),l=u.b.chooseBestDownload(c,o,s);r&&0===i&&(l.downloadClicked=!0,this._download(l,i));var h=u.b.getQualityExtFromDowload(l);return{scopeDownloads:c,index:Math.max(0,c.map(t=>u.b.getQualityExtFromDowload(t)).indexOf(h)),isSelectBoxShow:a}});this.state={renderDownloads:i,downloadScopes:c}}_eventListener(){var t,e,r,n,i=this;EE.on("widget.show_playnow",t=>{var e,r,n=t.params,o=g((null===(e=i.state.renderDownloads[n.scopeIndex])||void 0===e?void 0:e.media)||[]);try{for(o.s();!(r=o.n()).done;){var a=r.value.media.find(t=>Object(s.isSameMedia)(t,n));if(a){a.state=n.state,a.playable=n.playable,delete a.downloadClicked,a.playId=n.playId;break}}}catch(t){o.e(t)}finally{o.f()}this.setState()}),EE.on("widget.download_canceled",t=>{var e,r,n=t.params,o=g((null===(e=i.state.renderDownloads[n.scopeIndex])||void 0===e?void 0:e.media)||[]);try{for(o.s();!(r=o.n()).done;){var a=r.value.media.find(t=>Object(s.isSameMedia)(t,n));if(a){delete a.error,delete a.succeed,delete a.playable,delete a.state,delete a.downloadClicked;break}}}catch(t){o.e(t)}finally{o.f()}this.setState()}),EE.on("download_list.download_result",t=>{var e,r,n=g((null===(e=i.state.renderDownloads[t.scopeIndex])||void 0===e?void 0:e.media)||[]);try{for(n.s();!(r=n.n()).done;){var o=r.value.media.find(e=>e.id===t.id&&e.url===t.url);if(!o)break;o.succeed=t.succeed,o.error=t.error;break}}catch(t){n.e(t)}finally{n.f()}this.setState()}),EE.on("preferred-quality-level.changed",()=>{var t=a.a.get("preferred_quality_level"),e=a.a.get("prefer_last_quality")&&a.a.get("preferred_quality:"+t);this.state.downloadScopes.forEach(r=>{var n=u.b.getQualityLevelByQualityType(r.scopeDownloads[r.index].quality);if(t!==n){var i=u.b.chooseBestDownload(r.scopeDownloads,t,e),o=u.b.getQualityExtFromDowload(i);r.index=Math.max(0,r.scopeDownloads.map(t=>u.b.getQualityExtFromDowload(t)).indexOf(o))}}),this.setState()}),this.EE.emit("download-list.videos-count",null===(t=this.state.downloadScopes)||void 0===t?void 0:t.length),(null===(n=null===(r=null===(e=this.state.downloadScopes)||void 0===e?void 0:e[0])||void 0===r?void 0:r.scopeDownloads)||void 0===n?void 0:n.length)>0&&this.EE.emit("download-list.first-scope",this.state.downloadScopes[0])}setState(t){this.state=Object.assign(Object.assign({},this.state),t),this.render()}_processQualitiesForRender(t){return Object(s.splitMediaByTitle)((e=t,r=Array.isArray(e.media)?e.media:e,r.forEach(t=>{var r,n=e.type||t.type;t.quality=t.quality||u.b.DEFAULT_QUALITY_TYPE,t.i18n_quality||(t.i18n_quality=u.b.getI18nOfQuality(t.quality));var i=(null===(r=c.o[n])||void 0===r?void 0:r.extensions)||[],o=i.length-1,a=i.indexOf(t.ext),s=o-(a=void 0!==a?a:o);t.sortValues=t.sortValues||{},t.sortValues.qualityValue||(t.sortValues.qualityValue=100*(u.b.getQualityIndexByVideoTitleQuality(t.quality)||1)),t.sortValues.extensionValue=s,t.sortValues.totalValue=t.sortValues.qualityValue+t.sortValues.extensionValue}),r=r.sort((t,e)=>{var r,n,i;try{if(t.sortValues.totalValue===e.sortValues.totalValue&&t.resolution&&e.resolution){var o=/[0-9]+/i;return["source","hdr"].includes(null===(r=t.resolution)||void 0===r?void 0:r.toLowerCase())||((null===(n=t.resolution.match(o))||void 0===n?void 0:n[0])||0)>((null===(i=e.resolution.match(o))||void 0===i?void 0:i[0])||0)?-1:1}return t.sortValues.totalValue>e.sortValues.totalValue?-1:1}catch(t){return 0}}))).map((function(t){var e=new Set,r=Object.assign({},t),n=[...c.o.video.extensions];return a.a.get("show_3gp_ext")&&(n=n.sort((t,e)=>"3gp"===t?-1:"3gp"===e?1:0)),r.media=t.media.filter(r=>{var i;i=void 0!==r.resolution?`${r.type}_${r.quality}_${r.resolution}_${r.ext}`:`${r.type}_${r.quality}_${r.ext}`;var o=t.media.some(t=>{if(t.quality!==r.quality)return!1;if(t===r)return!1;if(t.type!==r.type)return!1;var e=n.indexOf(t.ext)<n.indexOf(r.ext),i=!r.resolution&&!!t.resolution||parseInt(t.resolution||"undefined")>parseInt(r.resolution||"undefined"),o=r.resolution===t.resolution&&r.resolution&&t.resolution;return e&&o||i});return!e.has(i)&&!o&&(e.add(i),r.id=i.replace(/\s/g,"_"),!0)}),r})).map((function(t){var e=[];return t.media.forEach(t=>{var r,n=t.type,i=e.find(t=>t.type===n);i?i.media.push(t):e.push({media:[t],i18n_type:Object(s.i18n)("media_fields_type_"+n),i18n_downloading_media:Object(s.i18n)("widget_downloading_media"),type_icon:(null===(r=c.o[n])||void 0===r?void 0:r.icon)||"",type:n})}),e=e.sort((t,e)=>c.w.indexOf(t.type)<c.w.indexOf(e.type)?-1:1),Object.assign(Object.assign({},t),{media:e})}));var e,r}_download(e,r){return b(this,void 0,void 0,v().mark((function n(){var i,o,a,u,c,l,h,f;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(d.a.log("Download",d.a.DOWNLOAD_BUTTON),i=128,e){n.next=4;break}return n.abrupt("return");case 4:if(o={id:e.id,url:e.url,filename:Object(s.getFilenameFromTitleOfDownload)(e),referrer:e.referrer,hls:e._hls,dashMPD:e._isDashMPD,scopeIndex:r,extraData:e.extraData,useDoubleDownloadTrick:e.useDoubleDownloadTrick,type:e.type},"string"==typeof e.url&&e.url.includes("cdnx.stream")&&!e.referrer?e.referrer="https://cdnx.stream":"string"==typeof e.url&&e.url.includes("anicdn.stream")&&!e.referrer?e.referrer="https://gogoplay1.com/":e.skipReferrer||(o.referrer=e.referrer||t.savior_referrer),o.skipReferrer=e.skipReferrer,e.skipConvert&&(o.skipConvert=e.skipConvert),o.referrer&&o.referrer.includes("bilutv.org/")&&o.url.includes("zadn.vn/")&&delete o.referrer,e.play_list&&(o.play_list=e.play_list),void 0!==e.soundOnly&&(o.soundOnly=e.soundOnly,o.resolution=e.resolution||i),void 0!==e.quality&&(o.quality=e.quality),void 0!==o.soundOnly&&o.soundOnly&&d.a.log("Download",d.a.DOWNLOAD_SOUND_ONLY),o.filename&&o.filename.match(/\.yt_srt$/i)&&d.a.log("Download",d.a.DOWNLOAD_SUBTITLES),"subtitles"!=o.type||"m3u8"!=o.ext&&!o.hls){n.next=49;break}return n.prev=15,n.next=18,fetch(o.url).then(t=>t.text());case 18:if(a=n.sent,1!=(u=Object(p.b)(a,o.url)).length){n.next=30;break}o.url=u[0].uri,e.url=u[0].uri,e._hls=!1,c=Object(m.f)(u[0].uri),e.ext=c.ext,e.exts=c.exts,o.filename=Object(s.getFilenameFromTitleOfDownload)(e),n.next=43;break;case 30:return n.next=32,Promise.allSettled(u.map(t=>fetch(t.uri).then(t=>t.text())));case 32:l=n.sent,h=l.map(t=>t.value).join("\n"),o.play_list=h,f=Object.assign(Object.assign({},e),{ext:"vtt",exts:["vtt"],url:"data:text/plain;charset=utf-8,"+encodeURIComponent(h)}),e.ext=f.ext,e.exts=f.exts,e._hls=!1,e.url=f.url,o.filename=Object(s.getFilenameFromTitleOfDownload)(f),o.ext=f.ext,o.url=f.url;case 43:o.hls=!1,n.next=49;break;case 46:n.prev=46,n.t0=n.catch(15),Object(s.devLog)(n.t0);case 49:e._isDashMPD&&void 0!==e._dash_video_id&&(o.dashMPD=e._isDashMPD,o.dashVideoId=e._dash_video_id),e._hls&&e.dashVideoId&&(o.hls=e._hls,o.dashVideoId=""+e.dashVideoId),e.hlsKeyMem&&(o.hlsKeyMem=e.hlsKeyMem),EE.emit("download",{method:"download",params:o});case 53:case"end":return n.stop()}}),n,null,[[15,46]])})))}render(){var t,e,r=this.isPopUp?{is_single:!1,i18n_download:Object(s.i18n)("popup_download"),i18n_wait:Object(s.i18n)("popup_download_starting"),i18n_one_click:Object(s.i18n)("popup_one_click"),i18n_preferred_quality:Object(s.i18n)("popup_preferred_quality"),i18n_no_media_found:Object(s.i18n)("popup_no_media_found"),i18n_popup_title:Object(s.i18n)("popup_title"),i18n_download_failed:Object(s.i18n)("popup_download_failed"),i18n_sound_only:Object(s.i18n)("popup_sound_only"),i18n_play_now:Object(s.i18n)("play_now_play_now"),has_pip:!1,downloads:this.state.renderDownloads}:{i18n_check_label:Object(s.i18n)("popup_check_label"),i18n_check_all:Object(s.i18n)("popup_check_all"),i18n_check_none:Object(s.i18n)("popup_check_none"),i18n_download_selected:Object(s.i18n)("popup_download_selected"),i18n_download:Object(s.i18n)("popup_download"),i18n_wait:Object(s.i18n)("popup_download_starting"),i18n_one_click:Object(s.i18n)("popup_one_click"),i18n_downloading_media:Object(s.i18n)("widget_downloading_media"),i18n_preferred_quality:Object(s.i18n)("popup_preferred_quality"),i18n_no_media_found:Object(s.i18n)("popup_no_media_found"),i18n_no_media_found_widget:Object(s.i18n)("widget_no_media_found"),i18n_download_failed:Object(s.i18n)("popup_download_failed"),i18n_pip_button:Object(s.i18n)("popup_pip_button"),i18n_sound_only:Object(s.i18n)("popup_sound_only"),i18n_play_now:Object(s.i18n)("play_now_play_now"),downloads:this.state.renderDownloads},i=(null===(t=Object(s.query)("#list-template"))||void 0===t?void 0:t.textContent)||a.a.get("template-list")||"";this.$el.innerHTML=o.a.render(i,r,{media_template:a.a.get(this.isPopUp?"template-media-popup":"template-media")}),Object(s.queryAll)(".j-media-scope",this.$el).forEach((t,e)=>{var r,i,o=this.state.downloadScopes[e],c=Object(s.query)(".select",t);null==c||c.addEventListener("click",()=>{for(var t,e=o.isSelectBoxShow,r=0;r<(null===(t=this.state.downloadScopes)||void 0===t?void 0:t.length);r++)this.state.downloadScopes[r].isSelectBoxShow=!1;o.isSelectBoxShow=!e,this.setState()});var l=Object(s.queryAll)(".quality-label",t);null==l||l.forEach((t,e)=>{e===o.index&&t.classList.add("selected"),t.addEventListener("click",()=>{o.isSelectBoxShow=!1,o.index=e;var r=o.scopeDownloads[o.index];if(a.a.get("prefer_last_quality")&&1===this.state.downloadScopes.length){var n=u.b.getQualityLevelByQualityType(r.quality),i=t.getAttribute("data-quality-value");return a.a.set("preferred_quality_level",n),a.a.set("last_quality",i),EE.emit("preferred-quality-level.changed",{qualityValue:i,qualityLevel:n}),void d.a.log("VideoQualityChanged",u.b.getVideoQualityIndex(r.quality))}this.setState(),d.a.log("VideoQualityChanged",u.b.getVideoQualityIndex(r.quality))})});var h=Object(s.query)(".quality-selector-box",t),p=Object(s.query)("#quality-level-selection")||Object(s.query)("#footer");o.isSelectBoxShow?(null==h||h.removeAttribute("hidden"),n(()=>{f.a.registerClickaway("quality",[h,p],()=>{o.isSelectBoxShow=!1,null==h||h.setAttribute("hidden",""),f.a.unregisterClickaway("quality")})})):(null==h||h.setAttribute("hidden",""),f.a.unregisterClickaway("quality"));var m=Object(s.queryAll)(".j-quality-option[data-quality]",t);null==m||m.forEach(t=>t.setAttribute("hidden","")),null===(r=null==m?void 0:m[o.index])||void 0===r||r.removeAttribute("hidden");var v=Object(s.queryAll)(".j-quality-download",t);null==v||v.forEach(t=>t.setAttribute("hidden","")),null===(i=null==v?void 0:v[o.index])||void 0===i||i.removeAttribute("hidden"),null==v||v.forEach((t,r)=>{var n=o.scopeDownloads[r];if(n.playable||!n.succeed&&!n.error||(t.classList.remove("btn-progress"),t.classList.add("j-disabled","btn-started"),n.error&&(t.innerHTML='Err<span class="md-hide">or</span>')),n.state&&!n.playable)return t.classList.add("j-disabled"),void t.setAttribute("disabled","true");t.addEventListener("click",()=>{var r;if(n.playable){var i=null===(r=t.closest(".body"))||void 0===r?void 0:r.querySelector(".tooltip-box");return i&&(i.classList.remove("tooltip-shown"),a.a.set("hide_play_now_tooltip",!0)),this._play(n),void d.a.log("PlayNow",d.a.PLAY_NOW_SHOWN)}n.state="downloading",t.classList.add("j-disabled","btn-progress"),t.setAttribute("disabled","true"),this._download(n,e)}),n.downloadClicked&&t.setAttribute("disabled","true")});for(var g=0;g<this.state.downloadScopes.length;++g)this._sizeQueue.push({scopeIndex:g,index:this.state.downloadScopes[g].index})}),this.isPopUp&&(null===(e=Object(s.query)("#popup-closer",this.$el))||void 0===e||e.addEventListener("click",()=>{d.a.log("OpenSettings",d.a.OPEN_SETTING_POPUP),EE.emit("message.background.send",{type:c.a.OPEN_SETTINGS})}))}_checkFileSize(t,e){var r=t.scopeIndex,n=t.index,i=this.state.downloadScopes[r].scopeDownloads[n],o=Object(s.query)("#size_"+i.id,Object(s.queryAll)(".j-media-scope",this.$el)[r]);if(!i||i.size||""===i.size)return o.classList.add("done"),void("function"==typeof e&&e());if(i._hls||i._isDashMPD||Object(c.C)(i.ext)||i.ignoreSize){var a=Object(s.beautifyFileSize)();return o.textContent=""+a,i.size=a,o.classList.add("done"),void("function"==typeof e&&e())}d.a.log("Download",d.a.DOWNLOAD_REQUEST_SIZE),o.classList.add("size-loading"),this._getUrlSize(i.url).then(t=>{if("function"==typeof e&&e(),o&&(o.classList.add("done"),o.classList.remove("size-loading"),null!==t)){var r=Object(s.beautifyFileSize)(t);o.textContent=""+r,i.size=r,this._setSizeText(o,r),0===t&&d.a.log("Download",d.a.DOWNLOAD_REQUEST_SIZE_FAILED)}}).catch(()=>{"function"==typeof e&&e(),o.classList.add("done"),o.textContent="(Error)";var t=Object(s.query)("#media_"+i.id,this.$el);null==t||t.setAttribute("disabled","disabled"),this._setSizeText(o,"(Error)")})}_setSizeText(t,e){var r=Object(s.findParent)(t,"select-wrapper");if(r){var n=r.querySelector(".j-quality.selected .j-checked-size");n&&(n.innerText=e)}}_getUrlSize(t){return new Promise((e,r)=>{var n=[];function i(t){t&&n.push(Object(s.getSize)(t))}"object"==typeof t?[t.audioUrl,t.videoUrl].forEach(i):i(t);(n.length>0?1===n.length?n[0]:Promise.all(n):Promise.reject()).then((function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var i=Object(s.flatten)(r),o=0,a=i.length-1;a>=0;a--)o+=i[a];e(o)})).catch(()=>{r(null)})})}_play(t){d.a.log("PlayNow",d.a.PLAY_NOW_WIDGET_CLICKED),EE.emit("message.background.send",{type:"play_video",id:t.playId})}}}).call(this,r(9),r(68).setImmediate)},89:function(t,e,r){"use strict";function n(t){return function(...e){var r=e.pop();return t.call(this,e,r)}}r.d(e,"a",(function(){return V}));var i="function"==typeof queueMicrotask&&queueMicrotask,o="function"==typeof setImmediate&&setImmediate,a="object"==typeof process&&"function"==typeof process.nextTick;function s(t){setTimeout(t,0)}function u(t){return(e,...r)=>t(()=>e(...r))}var c=u(i?queueMicrotask:o?setImmediate:a?process.nextTick:s);function l(t){return f(t)?function(...e){const r=e.pop();return h(t.apply(this,e),r)}:n((function(e,r){var n;try{n=t.apply(this,e)}catch(t){return r(t)}if(n&&"function"==typeof n.then)return h(n,r);r(null,n)}))}function h(t,e){return t.then(t=>{d(e,null,t)},t=>{d(e,t&&t.message?t:new Error(t))})}function d(t,e,r){try{t(e,r)}catch(t){c(t=>{throw t},t)}}function f(t){return"AsyncFunction"===t[Symbol.toStringTag]}function p(t){if("function"!=typeof t)throw new Error("expected a function");return f(t)?l(t):t}function m(t,e=t.length){if(!e)throw new Error("arity is undefined");return function(...r){return"function"==typeof r[e-1]?t.apply(this,r):new Promise((n,i)=>{r[e-1]=(t,...e)=>{if(t)return i(t);n(e.length>1?e:e[0])},t.apply(this,r)})}}function v(t){return function(e,...r){return m((function(n){var i=this;return t(e,(t,e)=>{p(t).apply(i,r.concat(e))},n)}))}}function g(t,e,r,n){e=e||[];var i=[],o=0,a=p(r);return t(e,(t,e,r)=>{var n=o++;a(t,(t,e)=>{i[n]=e,r(t)})},t=>{n(t,i)})}function y(t){return t&&"number"==typeof t.length&&t.length>=0&&t.length%1==0}const b={};function _(t){function e(...e){if(null!==t){var r=t;t=null,r.apply(this,e)}}return Object.assign(e,t),e}function w(t){if(y(t))return function(t){var e=-1,r=t.length;return function(){return++e<r?{value:t[e],key:e}:null}}(t);var e,r,n,i,o=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()}(t);return o?function(t){var e=-1;return function(){var r=t.next();return r.done?null:(e++,{value:r.value,key:e})}}(o):(r=(e=t)?Object.keys(e):[],n=-1,i=r.length,function t(){var o=r[++n];return"__proto__"===o?t():n<i?{value:e[o],key:o}:null})}function E(t){return function(...e){if(null===t)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}function T(t,e,r,n){let i=!1,o=!1,a=!1,s=0,u=0;function c(){s>=e||a||i||(a=!0,t.next().then(({value:t,done:e})=>{if(!o&&!i){if(a=!1,e)return i=!0,void(s<=0&&n(null));s++,r(t,u,l),u++,c()}}).catch(h))}function l(t,e){if(s-=1,!o)return t?h(t):!1===t?(i=!0,void(o=!0)):e===b||i&&s<=0?(i=!0,n(null)):void c()}function h(t){o||(a=!1,i=!0,n(t))}c()}var O=t=>(e,r,n)=>{if(n=_(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if("AsyncGenerator"===e[Symbol.toStringTag])return T(e,t,r,n);if(function(t){return"function"==typeof t[Symbol.asyncIterator]}(e))return T(e[Symbol.asyncIterator](),t,r,n);var i=w(e),o=!1,a=!1,s=0,u=!1;function c(t,e){if(!a)if(s-=1,t)o=!0,n(t);else if(!1===t)o=!0,a=!0;else{if(e===b||o&&s<=0)return o=!0,n(null);u||l()}}function l(){for(u=!0;s<t&&!o;){var e=i();if(null===e)return o=!0,void(s<=0&&n(null));s+=1,r(e.value,e.key,E(c))}u=!1}l()};var x=m((function(t,e,r,n){return O(e)(t,p(r),n)}),4);function S(t,e,r){r=_(r);var n=0,i=0,{length:o}=t,a=!1;function s(t,e){!1===t&&(a=!0),!0!==a&&(t?r(t):++i!==o&&e!==b||r(null))}for(0===o&&r(null);n<o;n++)e(t[n],n,E(s))}function A(t,e,r){return x(t,1/0,e,r)}var k=m((function(t,e,r){return(y(t)?S:A)(t,p(e),r)}),3);var L=m((function(t,e,r){return g(k,t,e,r)}),3);v(L);var R=m((function(t,e,r){return x(t,1,e,r)}),3);var I=m((function(t,e,r){return g(R,t,e,r)}),3);v(I);Symbol("promiseCallback");class D{constructor(){this.head=this.tail=null,this.length=0}removeLink(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t}empty(){for(;this.head;)this.shift();return this}insertAfter(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1}insertBefore(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1}unshift(t){this.head?this.insertBefore(this.head,t):P(this,t)}push(t){this.tail?this.insertAfter(this.tail,t):P(this,t)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var t=this.head;t;)yield t.data,t=t.next}remove(t){for(var e=this.head;e;){var{next:r}=e;t(e)&&this.removeLink(e),e=r}return this}}function P(t,e){t.length=1,t.head=t.tail=e}function N(t,e,r){if(null==e)e=1;else if(0===e)throw new RangeError("Concurrency must not be zero");var n=p(t),i=0,o=[];const a={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function s(t,e){return t?e?void(a[t]=a[t].filter(t=>t!==e)):a[t]=[]:Object.keys(a).forEach(t=>a[t]=[])}function u(t,...e){a[t].forEach(t=>t(...e))}var l=!1;function h(t,e,r,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");var i,o;function a(t,...e){return t?r?o(t):i():e.length<=1?i(e[0]):void i(e)}g.started=!0;var s=g._createTaskItem(t,r?a:n||a);if(e?g._tasks.unshift(s):g._tasks.push(s),l||(l=!0,c(()=>{l=!1,g.process()})),r||!n)return new Promise((t,e)=>{i=t,o=e})}function d(t){return function(e,...r){i-=1;for(var n=0,a=t.length;n<a;n++){var s=t[n],c=o.indexOf(s);0===c?o.shift():c>0&&o.splice(c,1),s.callback(e,...r),null!=e&&u("error",e,s.data)}i<=g.concurrency-g.buffer&&u("unsaturated"),g.idle()&&u("drain"),g.process()}}function f(t){return!(0!==t.length||!g.idle())&&(c(()=>u("drain")),!0)}const m=t=>e=>{if(!e)return new Promise((e,r)=>{!function(t,e){const r=(...n)=>{s(t,r),e(...n)};a[t].push(r)}(t,(t,n)=>{if(t)return r(t);e(n)})});s(t),function(t,e){a[t].push(e)}(t,e)};var v=!1,g={_tasks:new D,_createTaskItem:(t,e)=>({data:t,callback:e}),*[Symbol.iterator](){yield*g._tasks[Symbol.iterator]()},concurrency:e,payload:r,buffer:e/4,started:!1,paused:!1,push(t,e){if(Array.isArray(t)){if(f(t))return;return t.map(t=>h(t,!1,!1,e))}return h(t,!1,!1,e)},pushAsync(t,e){if(Array.isArray(t)){if(f(t))return;return t.map(t=>h(t,!1,!0,e))}return h(t,!1,!0,e)},kill(){s(),g._tasks.empty()},unshift(t,e){if(Array.isArray(t)){if(f(t))return;return t.map(t=>h(t,!0,!1,e))}return h(t,!0,!1,e)},unshiftAsync(t,e){if(Array.isArray(t)){if(f(t))return;return t.map(t=>h(t,!0,!0,e))}return h(t,!0,!0,e)},remove(t){g._tasks.remove(t)},process(){if(!v){for(v=!0;!g.paused&&i<g.concurrency&&g._tasks.length;){var t=[],e=[],r=g._tasks.length;g.payload&&(r=Math.min(r,g.payload));for(var a=0;a<r;a++){var s=g._tasks.shift();t.push(s),o.push(s),e.push(s.data)}i+=1,0===g._tasks.length&&u("empty"),i===g.concurrency&&u("saturated");var c=E(d(t));n(e,c)}v=!1}},length:()=>g._tasks.length,running:()=>i,workersList:()=>o,idle:()=>g._tasks.length+i===0,pause(){g.paused=!0},resume(){!1!==g.paused&&(g.paused=!1,c(g.process))}};return Object.defineProperties(g,{saturated:{writable:!1,value:m("saturated")},unsaturated:{writable:!1,value:m("unsaturated")},empty:{writable:!1,value:m("empty")},drain:{writable:!1,value:m("drain")},error:{writable:!1,value:m("error")}}),g}m((function(t,e,r,n){n=_(n);var i=p(r);return R(t,(t,r,n)=>{i(e,t,(t,r)=>{e=r,n(t)})},t=>n(t,e))}),4);var C=m((function(t,e,r,n){return g(O(e),t,r,n)}),4);var j=m((function(t,e,r,n){var i=p(r);return C(t,e,(t,e)=>{i(t,(t,...r)=>t?e(t):e(t,r))},(t,e)=>{for(var r=[],i=0;i<e.length;i++)e[i]&&(r=r.concat(...e[i]));return n(t,r)})}),4);m((function(t,e,r){return j(t,1/0,e,r)}),3);m((function(t,e,r){return j(t,1,e,r)}),3);function U(t,e){return(r,n,i,o)=>{var a,s=!1;const u=p(i);r(n,(r,n,i)=>{u(r,(n,o)=>n||!1===n?i(n):t(o)&&!a?(s=!0,a=e(!0,r),i(null,b)):void i())},t=>{if(t)return o(t);o(null,s?a:e(!1))})}}m((function(t,e,r){return U(t=>t,(t,e)=>e)(k,t,e,r)}),3);m((function(t,e,r,n){return U(t=>t,(t,e)=>e)(O(e),t,r,n)}),4);m((function(t,e,r){return U(t=>t,(t,e)=>e)(O(1),t,e,r)}),3);function M(t){return(e,...r)=>p(e)(...r,(e,...r)=>{"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&r.forEach(e=>console[t](e)))})}M("dir");m((function(t,e,r){r=E(r);var n,i=p(t),o=p(e);function a(t,...e){if(t)return r(t);!1!==t&&(n=e,o(...e,s))}function s(t,e){return t?r(t):!1!==t?e?void i(a):r(null,...n):void 0}return s(null,!0)}),3);function q(t){return(e,r,n)=>t(e,n)}m((function(t,e,r){return k(t,q(p(e)),r)}),3);var B=m((function(t,e,r,n){return O(e)(t,q(p(r)),n)}),4);var Y=m((function(t,e,r){return B(t,1,e,r)}),3);function $(t){return f(t)?t:function(...e){var r=e.pop(),n=!0;e.push((...t)=>{n?c(()=>r(...t)):r(...t)}),t.apply(this,e),n=!1}}m((function(t,e,r){return U(t=>!t,t=>!t)(k,t,e,r)}),3);m((function(t,e,r,n){return U(t=>!t,t=>!t)(O(e),t,r,n)}),4);m((function(t,e,r){return U(t=>!t,t=>!t)(R,t,e,r)}),3);function Q(t,e,r,n){var i=new Array(e.length);t(e,(t,e,n)=>{r(t,(t,r)=>{i[e]=!!r,n(t)})},t=>{if(t)return n(t);for(var r=[],o=0;o<e.length;o++)i[o]&&r.push(e[o]);n(null,r)})}function F(t,e,r,n){var i=[];t(e,(t,e,n)=>{r(t,(r,o)=>{if(r)return n(r);o&&i.push({index:e,value:t}),n(r)})},t=>{if(t)return n(t);n(null,i.sort((t,e)=>t.index-e.index).map(t=>t.value))})}function H(t,e,r,n){return(y(e)?Q:F)(t,e,p(r),n)}m((function(t,e,r){return H(k,t,e,r)}),3);m((function(t,e,r,n){return H(O(e),t,r,n)}),4);m((function(t,e,r){return H(R,t,e,r)}),3);m((function(t,e){var r=E(e),n=p($(t));return function t(e){if(e)return r(e);!1!==e&&n(t)}()}),2);m((function(t,e,r,n){var i=p(r);return C(t,e,(t,e)=>{i(t,(r,n)=>r?e(r):e(r,{key:n,val:t}))},(t,e)=>{for(var r={},{hasOwnProperty:i}=Object.prototype,o=0;o<e.length;o++)if(e[o]){var{key:a}=e[o],{val:s}=e[o];i.call(r,a)?r[a].push(s):r[a]=[s]}return n(t,r)})}),4);M("log");m((function(t,e,r,n){n=_(n);var i={},o=p(r);return O(e)(t,(t,e,r)=>{o(t,e,(t,n)=>{if(t)return r(t);i[e]=n,r(t)})},t=>n(t,i))}),4);u(a?process.nextTick:o?setImmediate:s),m((t,e,r)=>{var n=y(e)?[]:{};t(e,(t,e,r)=>{p(t)((t,...i)=>{i.length<2&&([i]=i),n[e]=i,r(t)})},t=>r(t,n))},3);function V(t,e){var r=p(t);return N((t,e)=>{r(t[0],e)},e,1)}Symbol.iterator;m((function(t,e){if(e=_(e),!Array.isArray(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var r=0,n=t.length;r<n;r++)p(t[r])(e)}),2);function z(t,e,r,n){const i=p(r);return H(t,e,(t,e)=>{i(t,(t,r)=>{e(t,!r)})},n)}m((function(t,e,r){return z(k,t,e,r)}),3);m((function(t,e,r,n){return z(O(e),t,r,n)}),4);m((function(t,e,r){return z(R,t,e,r)}),3);m((function(t,e,r){return U(Boolean,t=>t)(k,t,e,r)}),3);m((function(t,e,r,n){return U(Boolean,t=>t)(O(e),t,r,n)}),4);m((function(t,e,r){return U(Boolean,t=>t)(R,t,e,r)}),3);m((function(t,e,r){var n=p(e);return L(t,(t,e)=>{n(t,(r,n)=>{if(r)return e(r);e(r,{value:t,criteria:n})})},(t,e)=>{if(t)return r(t);r(null,e.sort(i).map(t=>t.value))});function i(t,e){var r=t.criteria,n=e.criteria;return r<n?-1:r>n?1:0}}),3);m((function(t,e){var r,n=null;return Y(t,(t,e)=>{p(t)((t,...i)=>{if(!1===t)return e(t);i.length<2?[r]=i:r=i,n=t,e(t?null:{})})},()=>e(n,r))}));m((function(t,e,r){r=E(r);var n=p(e),i=p(t),o=[];function a(t,...e){if(t)return r(t);o=e,!1!==t&&i(s)}function s(t,e){return t?r(t):!1!==t?e?void n(a):r(null,...o):void 0}return i(s)}),3);m((function(t,e){if(e=_(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var r=0;function n(e){p(t[r++])(...e,E(i))}function i(i,...o){if(!1!==i)return i||r===t.length?e(i,...o):void n(o)}n([])}))},9:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r}});