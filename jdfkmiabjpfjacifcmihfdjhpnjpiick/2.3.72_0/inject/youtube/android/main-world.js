!function(){console.log("here ==========>");try{window.trustedTypes.createPolicy("default",{createScript:function(e){return e}})}catch(error){}let zPlayerResponse={data:null,getQuality:function(e,t){var r=e.response;if(r){this.data=e;var a=r.streamingData?.formats||[],r=r.streamingData?.adaptiveFormats||[];let n=this;clearTimeout(this.timeout),n.timeout=setTimeout(function(){n.sendMessage("COCCOC_MESSAGE_TYPE_ZSITE_LOAD_DATA_TIMEOUT")},1e4),this.getQualityInfo(a.concat(r),e,function(e){clearTimeout(n.timeout),t(e)})}else t({})},getQualityInfo:function(a,c,i){this.loadData(c).then(e=>{var n,t,r;this.cver&&this.ptrackingUrl||({cver:n,ptrackingUrl:t}=this.parseVideoHtml(c.response,document.documentElement.innerHTML),this.cver=n,this.ptrackingUrl=t);for(r of a){let e,n;try{e=this.getStreamingUrl(r.url,r.cipher,r.signatureCipher,this.parsedPlayerJs.cipherFuncName,this.parsedPlayerJs.cipherFunc,this.parsedPlayerJs.cipherInnerFunc),n=this.generateMediaContentUrl(this.cver,this.ptrackingUrl,e,this.parsedPlayerJs.nFuncName,this.parsedPlayerJs.nFunc,this.parsedPlayerJs.cpnInnerVarName,this.parsedPlayerJs.cpnInnerInnerFunc,this.parsedPlayerJs.cpnInnerFunc,this.parsedPlayerJs.cpnFuncName,this.parsedPlayerJs.cpnFunc)}catch(e){}r.zType=coccoc_itagConverter.getType(r.itag),r.zType===coccoc_itagConverter.onlyAudio&&(r.height=-1),r.url=n||e||r.url}document.cc_qualities=a.sort(function(e,n){return n.bitrate-e.bitrate}),this.sendMessage("COCCOC_MESSAGE_TYPE_ZSITE_DATA_LOADED"),i(a)})},loadData:async function(e){var n,t,r;this.playerJsUrl||({playerJsUrl:n,cver:t,ptrackingUrl:r}=this.parseVideoHtml(e.response,document.body.outerHTML),this.playerJsUrl=n,this.cver=t,this.ptrackingUrl=r),!this.playerJsUrl&&e.bootstrapWebPlayerContextConfig&&(this.playerJsUrl=e.bootstrapWebPlayerContextConfig.jsUrl),!this.playerJs&&this.playerJsUrl&&(this.playerJs=await this.loadPlayerJs(this.playerJsUrl)),!this.parsedPlayerJs&&this.playerJs&&(this.parsedPlayerJs={...this.parsePlayerJs(this.playerJs)})},escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},parseVideoHtml:function(e,n){var t,r,a={};let c,i;if(!(o=n.match(new RegExp('/s/player/([^"]+?).js')))||o.length<2)return a;t=o[0];try{for(r of e.responseContext.serviceTrackingParams){var s=r.params.filter(e=>"cver"==e.key).map(e=>e.value);if(0<s.length){c=s[0];break}}}catch(e){return a}if((o=n.match(/"ptrackingUrl":({[^}]+})/))&&2<=o.length){e=o[1],n=JSON.parse(e);i=n.baseUrl}else{var o=document.getElementsByTagName("video")[0];if(!o||!o.src)return a;i=o.src}return{playerJsUrl:t,cver:c,ptrackingUrl:i}},loadPlayerJs:async function(e){return(await fetch(e)).text()},parsePlayerJs:function(e){var n,t,r={};let a,c,i,s="",o="",l="",p=(0<=(i=(i=e.indexOf("enhanced_except_"))<0?e.indexOf("-_w8_"):i)&&(i=e.indexOf(";",i),i+=1,0<=(n=e.lastIndexOf("=function",i)))&&(n=e.lastIndexOf("\n",n),n+=1,o=e.substring(n,i),a=/([^=]+)=function/,(c=o.match(a))&&1<c.length&&(s=c[1]),a=/([^\s]+)===/,c=o.match(a))&&1<c.length&&(l=c[1]),r={...r,nFuncName:s,nFunc:o,nInnerVarName:l},console.log("here ======>"),""),u="",h=(a=new RegExp("([^\ns]+)=function[^\n]+window.crypto.getRandomValues[^\n]+"),(c=e.match(a))&&1<c.length&&(p=c[0],u=c[1]),r={...r,cpnInnerFuncName:u,cpnInnerFunc:p},""),d="",g=(u&&(a=new RegExp(`([^
s]+)=function[^
]+=${this.escapeRegExp(u)}(.+);[^
]+`),c=e.match(a))&&(h=c[0],d=c[1]),r={...r,cpnFunc:h,cpnFuncName:d},""),m=(a=/catch.+return\s+([^(]+)\(/,(c=p.match(a))&&1<c.length&&(g=c[1].replace("$","\\$")),r={...r,cpnInnerInnerFuncName:g},""),y=(g&&(a=new RegExp(g+"=function.+?};","s"),c=e.match(a))&&0<c.length&&(m=c[0]),r={...r,cpnInnerInnerFunc:m},""),v=(m?(a=/4\^(.+).charCodeAt/,(c=m.match(a))&&1<c.length&&(y=c[1])):p&&(a=/4\^(.+).charCodeAt/,c=p.match(a))&&1<c.length&&(y=c[1]),r={...r,cpnInnerVarName:y},""),f=(a=/=([^=(]+)\(decodeURIComponent\(h.s\)/,(c=e.match(a))||(a=/=([^=(]+)\(decodeURIComponent\(.\.s\)/,c=e.match(a)),c&&1<c.length&&(v=c[1]),r={...r,cipherFuncName:v},""),I=(v&&(a=new RegExp(this.escapeRegExp(v)+`=function[^
]+`),c=e.match(a))&&0<c.length&&(f=c[0]),r={...r,cipherFunc:f},""),F=(f&&(a=/;([^.]+)\./,c=f.match(a))&&1<c.length&&(I=c[1]),r={...r,cipherInnerFuncName:I},"");return I&&(n=e.indexOf(` ${I}={`),t=e.indexOf("};",n),t+="};".length,F=e.substring(n,t)),r={...r,cipherInnerFunc:F},console.log(r,"final ======>"),r},getSearchParams:function(e){var n={},e=e.split("?");if(!(e.length<2))for(const a of e[1].split("&")){var t,r=a.split("=");2==r.length&&(t=r[0],r=r[1],n[t]=r)}return n},generateMediaContentUrl:function(cver,ptrackingUrl,streamingUrl,nFuncName,nFunc,cpnInnerVarName,cpnInnerInnerFunc,cpnInnerFunc,cpnFuncName,cpnFunc){const{ptk,oid,ptchn,pltype}=this.getSearchParams(ptrackingUrl);let url=streamingUrl,{n}=this.getSearchParams(streamingUrl);n&&(eval(window.trustedTypes.defaultPolicy.createScript(`
        var ${nFunc};
        n = ${nFuncName}(n);
      `)),url=url.replace(/&n=[^&]+&/,`&n=${n}&`));let cpn;eval(window.trustedTypes.defaultPolicy.createScript(`
      var g = {};
      var window = {};
      var ${cpnInnerVarName} = "";
      var ${cpnInnerInnerFunc};
      var ${cpnInnerFunc};
      ${cpnFunc};
      cpn = ${cpnFuncName}(16);
    `));const searchParams={cpn:cpn,cver:cver,ptk:ptk,oid:oid,ptchn:ptchn,pltype:pltype},components=[];for(const key in searchParams){const value=searchParams[key];value&&components.push([key,value].join("="))}return[url,components.join("&")].join("&")},getStreamingUrl:function(url,cipher,signatureCipher,cipherFuncName,cipherFunc,cipherInnerFunc){let streamingUrl=url,c=cipher||signatureCipher;if(c){"?"==c.charAt(0)&&(c=c.substr(1));const pairs=c.split("&");let params={};for(const pair of pairs){const kv=pair.split("="),k=kv[0],v=kv[1];params[k]=v}let{s,sp,url}=params;if(!(s&&sp&&url))return{};{let sig;eval(window.trustedTypes.defaultPolicy.createScript(`
          var ${cipherInnerFunc};
          var ${cipherFunc};
          sig = encodeURIComponent(${cipherFuncName}(decodeURIComponent(s)));
        `)),url=decodeURIComponent(url),streamingUrl=url+(`&${sp}=`+sig)}}return streamingUrl},sendMessage(e){document.cc_qualities,this.data.response}},coccoc_itagConverter={onlyAudio:1,videoWithoutAudio:2,videoWithAudio:4,audioItag:[140,141,256,258,171,249,250,251,599,600],videoWithoutAudioItag:[160,133,134,135,136,137,264,266,298,299,278,242,243,244,247,248,271,313,302,308,303,315,394,395,396,397,398,399,400,401,402,272,598],videoWithAudioItag:[17,36,5,43,18,22,91,92,93,94,95,96],getType:function(e){return coccoc_itagConverter.audioItag.includes(e)?coccoc_itagConverter.onlyAudio:coccoc_itagConverter.videoWithAudioItag.includes(e)?coccoc_itagConverter.videoWithAudio:coccoc_itagConverter.videoWithoutAudioItag.includes(e)?coccoc_itagConverter.videoWithoutAudio:void 0}};const playerResponse=JSON.parse(document.body.getAttribute("savior-youtube-player-response"));playerResponse&&zPlayerResponse.getQuality({response:playerResponse},function(e){document.body.setAttribute("savior-ytb-data-android-solution",JSON.stringify(e))})}();